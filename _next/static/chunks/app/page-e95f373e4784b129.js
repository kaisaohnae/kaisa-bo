(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{9335:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(65453).v)(e=>({loading:!1,target:"",startLoading:t=>{e(()=>({loading:!0,target:t&&t.target?t.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))},18255:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(65453),r=s(46786),o=s(84859);let n=(0,a.v)()((0,r.Zr)((e,t)=>({userInfo:{},token:"",loginSuccess:async(t,s)=>{let a=o.A.getState();t&&t.token&&t.userInfo&&(e({userInfo:t.userInfo,token:t.token}),a.setCodeList(t.codeList),a.setMenuList(t.menuList),a.setHash("/"),s("/"))},loginFail:()=>{t().removeSession()},removeSession:()=>{e({userInfo:{},token:""})},logout:e=>{t().removeSession(),e("/login")}}),{name:"auth-storage",partialize:e=>({userInfo:e.userInfo,token:e.token})}))},32825:(e,t,s)=>{"use strict";s.d(t,{D:()=>u});var a=s(23464),r=s(9335),o=s(49925);let{startLoading:n,stopLoading:i}=r.A.getState(),{showAlert:l}=o.A.getState(),d=a.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});d.interceptors.request.use(e=>(n(),e),e=>(i(),console.log(e),Promise.reject())),d.interceptors.response.use(e=>{if(i(),200===e.status)return e;Promise.reject()},e=>{var t,s,a;i();let r=null==(t=e.response)?void 0:t.data;return((null==(s=e.response)?void 0:s.status)===401||(null==(a=e.response)?void 0:a.status)===403)&&(window.location.href="/login"),r&&r.message&&l({message:r.message}),Promise.reject()});var c=s(18255);let u=(e,t)=>{let{token:s}=c.A.getState();return d({url:e,data:JSON.stringify(t),method:"post",headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{}},withCredentials:!1})}},41419:(e,t,s)=>{Promise.resolve().then(s.bind(s,83953))},49925:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(65453).v)(e=>({alert:null,error:!1,showAlert:t=>{e(()=>({alert:t}))},hideAlert:()=>{e(()=>({alert:null}))},showError:()=>{e(()=>({error:!0}))},hideError:()=>{e(()=>({error:!1}))}}))},83953:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(95155),r=s(12115),o=s(83540),n=s(42832),i=s(94754),l=s(96025),d=s(52071),c=s(88301),u=s(77557),h=s(32825);class m{async dashboard(e){return(await (0,h.D)("/common/dashboard",e||{})).data}async calendar(e){return(await (0,h.D)("/common/calendar",e||{})).data}}let p=new m;function g(){let[e,t]=(0,r.useState)([]),[s,h]=(0,r.useState)([]),[m,g]=(0,r.useState)(0),f=(0,r.useCallback)(e=>{var t,a;return null!=(a=null==(t=s.find(t=>t.orderStateCode===e))?void 0:t.orderStateCount)?a:0},[s]);(0,r.useEffect)(()=>{p.dashboard({}).then(e=>{g(e.totalPrice),t(e.monthlyData),h(e.orderStateData)}).catch(console.error)},[]);let v=(0,r.useMemo)(()=>{let t=e.map(e=>e.sumPrice),s=Math.max(...t,0);return[Math.floor(.9*Math.min(...t,0)),Math.ceil(1.1*s)]},[e]);return(0,a.jsxs)("div",{id:"main",children:[(0,a.jsx)("ul",{className:"orderState",children:[{code:"예약중",className:"reserving"},{code:"예약취소",className:"canceled"},{code:"결제취소",className:"paymentCanceled"},{code:"결제완료",className:"paymentCompleted"}].map(e=>{let{code:t,className:s}=e;return(0,a.jsxs)("li",{className:s,children:[(0,a.jsx)("p",{className:"codeName",children:t}),(0,a.jsx)("p",{className:"count",children:f(t)})]},t)})}),(0,a.jsx)("div",{style:{width:"100%",padding:"10px 0 20px 0",overflow:"auto"},children:(0,a.jsx)(o.u,{width:1670,height:300,children:(0,a.jsxs)(n.b,{data:e,margin:{top:10,right:0,left:0,bottom:0},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"grad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#be90ff",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"white",stopOpacity:.4})]})}),(0,a.jsx)(i.d,{strokeDasharray:"2 2"}),(0,a.jsx)(l.W,{dataKey:"reserveMonth"}),(0,a.jsx)(d.h,{domain:v,tickFormatter:e=>"".concat(Math.floor(e/1e4))}),(0,a.jsx)(c.m,{}),(0,a.jsx)(u.N,{type:"monotone",dataKey:"sumPrice",stroke:"#9f7aea",strokeWidth:2,dot:!1})]})})})]})}},84859:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(65453),r=s(46786),o=s(57383);let n={id:"",menuActive:!1,hash:"",tab:{idx:0},favList:[],menuList:[],codeList:{}},i=(0,a.v)()((0,r.Zr)((e,t)=>({...n,setHash:t=>{e({hash:t})},setStateToCookie:()=>{o.A.set("settings",JSON.stringify(t()))},reset:()=>{e(n),o.A.remove("settings")},setFavList:t=>{e({favList:t})},setMenuList:t=>{e({menuList:t})},setCodeList:t=>{e({codeList:t})},setMenuActive:t=>{e({menuActive:t})}}),{name:"settings-storage",partialize:e=>({id:e.id,menuActive:e.menuActive,hash:e.hash,tab:e.tab,favList:e.favList,menuList:e.menuList,codeList:e.codeList})}))}},e=>{e.O(0,[185,5998,8441,5964,7358],()=>e(e.s=41419)),_N_E=e.O()}]);