(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1419:(e,t,a)=>{Promise.resolve().then(a.bind(a,3953))},2825:(e,t,a)=>{"use strict";a.d(t,{D:()=>d});var s=a(3464);let{startLoading:o,stopLoading:r}=a(9335).A.getState(),n=s.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});n.interceptors.request.use(e=>(o(),e),e=>(r(),console.log(e),Promise.reject())),n.interceptors.response.use(e=>{if(r(),200===e.status)return e;Promise.reject()},e=>{var t,a,s;r();let o=null===(t=e.response)||void 0===t?void 0:t.data;return(null===(a=e.response)||void 0===a?void 0:a.status)===401||(null===(s=e.response)||void 0===s?void 0:s.status)===403||o&&o.message,Promise.reject()});var i=a(8255);let d=(e,t)=>{let{token:a}=i.A.getState();return n({url:e,data:JSON.stringify(t),method:"post",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{}},withCredentials:!1})}},3953:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(5155),o=a(2115),r=a(3540),n=a(2832),i=a(4754),d=a(6025),u=a(2071),c=a(3778),l=a(5989),m=a(2825);class h{async dashboard(e){return(await (0,m.D)("/common/dashboard",e||{})).data}async calendar(e){return(await (0,m.D)("/common/calendar",e||{})).data}}let p=new h;function v(){let[e,t]=(0,o.useState)([]),[a,m]=(0,o.useState)([]),[h,v]=(0,o.useState)(0),f=(0,o.useCallback)(e=>{var t,s;return null!==(s=null===(t=a.find(t=>t.orderStateCode===e))||void 0===t?void 0:t.orderStateCount)&&void 0!==s?s:0},[a]);(0,o.useEffect)(()=>{p.dashboard({}).then(e=>{v(e.totalPrice),t(e.monthlyData),m(e.orderStateData)}).catch(console.error)},[]);let g=(0,o.useMemo)(()=>{let t=e.map(e=>e.sumPrice),a=Math.max(...t,0);return[Math.floor(.9*Math.min(...t,0)),Math.ceil(1.1*a)]},[e]);return(0,s.jsxs)("div",{id:"main",children:[(0,s.jsx)("ul",{className:"orderState",children:[{code:"예약중",className:"reserving"},{code:"예약취소",className:"canceled"},{code:"결제취소",className:"paymentCanceled"},{code:"결제완료",className:"paymentCompleted"}].map(e=>{let{code:t,className:a}=e;return(0,s.jsxs)("li",{className:a,children:[(0,s.jsx)("p",{className:"codeName",children:t}),(0,s.jsx)("p",{className:"count",children:f(t)})]},t)})}),(0,s.jsx)("div",{style:{width:"100%",padding:"10px 0 20px 0",overflow:"auto"},children:(0,s.jsx)(r.u,{width:1670,height:300,children:(0,s.jsxs)(n.b,{data:e,margin:{top:10,right:0,left:0,bottom:0},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"grad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#be90ff",stopOpacity:1}),(0,s.jsx)("stop",{offset:"100%",stopColor:"white",stopOpacity:.4})]})}),(0,s.jsx)(i.d,{strokeDasharray:"2 2"}),(0,s.jsx)(d.W,{dataKey:"reserveMonth"}),(0,s.jsx)(u.h,{domain:g}),(0,s.jsx)(c.m,{}),(0,s.jsx)(l.N,{type:"monotone",dataKey:"sumPrice",stroke:"#9f7aea",strokeWidth:2,dot:!1})]})})}),(0,s.jsxs)("div",{className:"totalPrice",children:["총 매출: ",h.toLocaleString()]})]})}},4859:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5453),o=a(6786),r=a(7383);let n={id:"",menu:{active:!1},hash:"",tab:{idx:0},favList:[]},i=(0,s.v)()((0,o.Zr)((e,t)=>({...n,setHash:t=>{e({hash:t})},setStateToCookie:()=>{r.A.set("settings",JSON.stringify(t()))},reset:()=>{e(n),r.A.remove("settings")}}),{name:"settings-storage",partialize:e=>({id:e.id,menu:e.menu,hash:e.hash,tab:e.tab,favList:e.favList})}))},8255:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5453),o=a(6786),r=a(4859);let n=(0,s.v)()((0,o.Zr)((e,t)=>({active:!1,userInfo:{},menuList:[],codeList:{},token:"",loginSuccess:async(a,s)=>{a&&a.token&&a.userInfo&&(e({userInfo:a.userInfo,codeList:a.codeList,token:a.token}),t().setMenus(a.menuList)),r.A.getState().setHash("/"),s("/")},loginFail:()=>{t().removeSession()},removeSession:()=>{e({userInfo:{},menuList:[],codeList:{},token:""})},logout:e=>{t().removeSession(),e("/login")},setMenus:t=>{let a=r.A.getState(),s=[{menuGroupCode:"od",active:!0,pathName:"주문관리",menu:[]},{menuGroupCode:"cr",active:!0,pathName:"기초관리",menu:[]},{menuGroupCode:"cs",active:!0,pathName:"고객관리",menu:[]},{menuGroupCode:"pd",active:!0,pathName:"상품관리",menu:[]},{menuGroupCode:"at",active:!0,pathName:"회원관리",menu:[]}];s.forEach(e=>{e.menu=t.filter(t=>t.menuGroupCode===e.menuGroupCode).map(e=>({...e,fav:a.favList.some(t=>t.menuId===e.menuId)}))}),e({menuList:s})}}),{name:"auth-storage",partialize:e=>({userInfo:e.userInfo,codeList:e.codeList,menuList:e.menuList,token:e.token})}))},9335:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5453).v)(e=>({loading:!1,target:"",startLoading:t=>{e(()=>({loading:!0,target:t&&t.target?t.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[185,729,441,684,358],()=>t(1419)),_N_E=e.O()}]);