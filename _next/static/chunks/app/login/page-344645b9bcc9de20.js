(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{9335:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(65453).v)(e=>({loading:!1,target:"",startLoading:t=>{e(()=>({loading:!0,target:t&&t.target?t.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))},9690:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(95155),a=s(12115),n=s(35695),i=s(15725),o=s(84859),l=s(18255),u=s(49925);let c=()=>{let e=(0,n.useRouter)(),t=(0,a.useRef)(null);(0,o.A)();let s=(0,l.A)(),{showAlert:c}=(0,u.A)(),[d,h]=(0,a.useState)({userId:"",pwd:"",remember:!1});(0,a.useEffect)(()=>{},[]);let m=e=>{let{name:t,value:s,type:r,checked:a}=e.target;h(e=>({...e,[t]:"checkbox"===r?a:s}))},g=async t=>{t.preventDefault(),d.remember;try{let t=await i.A.login(d);t.success?s.loginSuccess(t.data,e.push):(s.loginFail(),c({message:"회원정보와 일치하지 않습니다."}))}catch(e){c({message:"회원정보가 일치하지 않습니다."}),console.error(e)}};return(0,r.jsx)("div",{id:"login",children:(0,r.jsx)("form",{onSubmit:g,method:"POST",ref:t,children:(0,r.jsxs)("fieldset",{children:[(0,r.jsx)("legend",{children:"로그인"}),(0,r.jsx)("h1",{children:"관리자 로그인"}),(0,r.jsxs)("label",{className:"label",children:[(0,r.jsx)("span",{className:"icon",children:""}),(0,r.jsx)("input",{type:"text",name:"userId",value:d.userId,onChange:m,placeholder:"아이디를 입력해주세요",required:!0})]}),(0,r.jsxs)("label",{className:"label",children:[(0,r.jsx)("span",{className:"icon",children:""}),(0,r.jsx)("input",{type:"password",name:"pwd",value:d.pwd,onChange:m,placeholder:"비밀번호를 입력해주세요",required:!0})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",name:"remember",checked:d.remember,onChange:m})," ",(0,r.jsx)("span",{className:"remember",children:"아이디 저장"})]}),(0,r.jsx)("button",{type:"submit",children:"로그인"})]})})})}},15725:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(32825);class a{async login(e){return(await (0,r.D)("/auth/login",e)).data}async changePassword(e){return(await (0,r.D)("/auth/change-password",e)).data}}let n=new a},18255:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(65453),a=s(46786),n=s(84859);let i=(0,r.v)()((0,a.Zr)((e,t)=>({userInfo:{},token:"",loginSuccess:async(t,s)=>{let r=n.A.getState();t&&t.token&&t.userInfo&&(e({userInfo:t.userInfo,token:t.token}),r.setCodeList(t.codeList),r.setMenuList(t.menuList),r.setHash("/"),s("/"))},loginFail:()=>{t().removeSession()},removeSession:()=>{e({userInfo:{},token:""})},logout:e=>{t().removeSession(),e("/login")}}),{name:"auth-storage",partialize:e=>({userInfo:e.userInfo,token:e.token})}))},32825:(e,t,s)=>{"use strict";s.d(t,{D:()=>d});var r=s(23464),a=s(9335),n=s(49925);let{startLoading:i,stopLoading:o}=a.A.getState(),{showAlert:l}=n.A.getState(),u=r.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});u.interceptors.request.use(e=>(i(),e),e=>(o(),console.log(e),Promise.reject())),u.interceptors.response.use(e=>{if(o(),200===e.status)return e;Promise.reject()},e=>{var t,s,r;o();let a=null==(t=e.response)?void 0:t.data;return((null==(s=e.response)?void 0:s.status)===401||(null==(r=e.response)?void 0:r.status)===403)&&(window.location.href="/login"),a&&a.message&&l({message:a.message}),Promise.reject()});var c=s(18255);let d=(e,t)=>{let{token:s}=c.A.getState();return u({url:e,data:JSON.stringify(t),method:"post",headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{}},withCredentials:!1})}},35695:(e,t,s)=>{"use strict";var r=s(18999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},49925:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(65453).v)(e=>({alert:null,error:!1,showAlert:t=>{e(()=>({alert:t}))},hideAlert:()=>{e(()=>({alert:null}))},showError:()=>{e(()=>({error:!0}))},hideError:()=>{e(()=>({error:!1}))}}))},52019:(e,t,s)=>{Promise.resolve().then(s.bind(s,9690))},84859:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(65453),a=s(46786),n=s(57383);let i={id:"",menuActive:!1,hash:"",tab:{idx:0},favList:[],menuList:[],codeList:{}},o=(0,r.v)()((0,a.Zr)((e,t)=>({...i,setHash:t=>{e({hash:t})},setStateToCookie:()=>{n.A.set("settings",JSON.stringify(t()))},reset:()=>{e(i),n.A.remove("settings")},setFavList:t=>{e({favList:t})},setMenuList:t=>{e({menuList:t})},setCodeList:t=>{e({codeList:t})},setMenuActive:t=>{e({menuActive:t})}}),{name:"settings-storage",partialize:e=>({id:e.id,menuActive:e.menuActive,hash:e.hash,tab:e.tab,favList:e.favList,menuList:e.menuList,codeList:e.codeList})}))}},e=>{e.O(0,[185,8441,5964,7358],()=>e(e.s=52019)),_N_E=e.O()}]);