(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2019:(e,t,s)=>{Promise.resolve().then(s.bind(s,4645))},2825:(e,t,s)=>{"use strict";s.d(t,{D:()=>u});var r=s(3464);let{startLoading:a,stopLoading:n}=s(9335).A.getState(),o=r.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});o.interceptors.request.use(e=>(a(),e),e=>(n(),console.log(e),Promise.reject())),o.interceptors.response.use(e=>{if(n(),200===e.status)return e;Promise.reject()},e=>{var t,s,r;n();let a=null===(t=e.response)||void 0===t?void 0:t.data;return(null===(s=e.response)||void 0===s?void 0:s.status)===401||(null===(r=e.response)||void 0===r?void 0:r.status)===403||a&&a.message,Promise.reject()});var i=s(8255);let u=(e,t)=>{let{token:s}=i.A.getState();return o({url:e,data:JSON.stringify(t),method:"post",headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{}},withCredentials:!1})}},4645:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(2115),n=s(5695),o=s(2825);class i{async login(e){return(await (0,o.D)("/login",e)).data}}let u=new i;var l=s(4859),c=s(8255),d=s(9925);let m=()=>{let e=(0,n.useRouter)(),t=(0,a.useRef)(null);(0,l.A)();let s=(0,c.A)(),{showAlert:o}=(0,d.A)(),[i,m]=(0,a.useState)({userId:"",pwd:"",remember:!1});(0,a.useEffect)(()=>{},[]);let h=e=>{let{name:t,value:s,type:r,checked:a}=e.target;m(e=>({...e,[t]:"checkbox"===r?a:s}))},p=async t=>{t.preventDefault(),i.remember;try{let t=await u.login(i);t?s.loginSuccess(t.data,e.push):(s.loginFail(),o({message:"회원정보와 일치하지 않습니다."}))}catch(e){console.error(e)}};return(0,r.jsx)("div",{id:"login",children:(0,r.jsx)("form",{onSubmit:p,method:"POST",ref:t,children:(0,r.jsxs)("fieldset",{children:[(0,r.jsx)("legend",{children:"로그인"}),(0,r.jsx)("h1",{children:"관리자 로그인"}),(0,r.jsxs)("label",{className:"label",children:[(0,r.jsx)("span",{className:"icon",children:""}),(0,r.jsx)("input",{type:"text",name:"userId",value:i.userId,onChange:h,placeholder:"아이디를 입력해주세요",required:!0})]}),(0,r.jsxs)("label",{className:"label",children:[(0,r.jsx)("span",{className:"icon",children:""}),(0,r.jsx)("input",{type:"password",name:"pwd",value:i.pwd,onChange:h,placeholder:"비밀번호를 입력해주세요",required:!0})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",name:"remember",checked:i.remember,onChange:h})," ",(0,r.jsx)("span",{className:"remember",children:"아이디 저장"})]}),(0,r.jsx)("button",{type:"submit",children:"로그인"})]})})})}},4859:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(5453),a=s(6786),n=s(7383);let o={id:"",menu:{active:!1},hash:"",tab:{idx:0},favList:[]},i=(0,r.v)()((0,a.Zr)((e,t)=>({...o,setHash:t=>{e({hash:t})},setStateToCookie:()=>{n.A.set("settings",JSON.stringify(t()))},reset:()=>{e(o),n.A.remove("settings")}}),{name:"settings-storage",partialize:e=>({id:e.id,menu:e.menu,hash:e.hash,tab:e.tab,favList:e.favList})}))},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},8255:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(5453),a=s(6786),n=s(4859);let o=(0,r.v)()((0,a.Zr)((e,t)=>({active:!1,userInfo:{},menuList:[],codeList:{},token:"",loginSuccess:async(s,r)=>{s&&s.token&&s.userInfo&&(e({userInfo:s.userInfo,codeList:s.codeList,token:s.token}),t().setMenus(s.menuList)),n.A.getState().setHash("/"),r("/")},loginFail:()=>{t().removeSession()},removeSession:()=>{e({userInfo:{},menuList:[],codeList:{},token:""})},logout:e=>{t().removeSession(),e("/login")},setMenus:t=>{let s=n.A.getState(),r=[{menuGroupCode:"od",active:!0,pathName:"주문관리",menu:[]},{menuGroupCode:"cr",active:!0,pathName:"기초관리",menu:[]},{menuGroupCode:"cs",active:!0,pathName:"고객관리",menu:[]},{menuGroupCode:"pd",active:!0,pathName:"상품관리",menu:[]},{menuGroupCode:"at",active:!0,pathName:"회원관리",menu:[]}];r.forEach(e=>{e.menu=t.filter(t=>t.menuGroupCode===e.menuGroupCode).map(e=>({...e,fav:s.favList.some(t=>t.menuId===e.menuId)}))}),e({menuList:r})}}),{name:"auth-storage",partialize:e=>({userInfo:e.userInfo,codeList:e.codeList,menuList:e.menuList,token:e.token})}))},9335:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(5453).v)(e=>({loading:!1,target:"",startLoading:t=>{e(()=>({loading:!0,target:t&&t.target?t.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))},9925:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(5453).v)(e=>({alert:null,error:!1,showAlert:t=>{e(()=>({alert:t}))},hideAlert:()=>{e(()=>({alert:null}))},showError:()=>{e(()=>({error:!0}))},hideError:()=>{e(()=>({error:!1}))}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[185,441,684,358],()=>t(2019)),_N_E=e.O()}]);