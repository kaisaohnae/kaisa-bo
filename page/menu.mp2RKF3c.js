import{d as U,c as k,r as D,x as q,o as V,e as G,f as e,w as i,v as c,K as P,l as y,h as m,J as w,G as I,L as E,F as O}from"../index.C3ATbS2G.js";import{H as $,g as d,P as h,e as A}from"./pagination.CnYDhcfL.js";import{a as g}from"./api-config.DUn_w41-.js";import{S as B,a as H}from"./select-group-date.D9Vwvs3L.js";import"./date-util.CFdrHXFE.js";class K{async getMenu(r){return(await g("/at/get-menu",r||{})).data}async getMenuList(r){return(await g("/at/get-menu-list",r||{})).data}async setMenu(r){return(await g("/at/set-menu",r||{})).data}async setMenuList(r){return(await g("/at/set-menu-list",r||{})).data}}const v=new K,F={colspan:"3"},R={class:"audit"},T={colspan:"3"},J={colspan:"3"},W={class:"btnWrap"},j={class:"crud"},z={class:"totalCount"},Q={class:"no-list"},et=U({__name:"menu",setup(x){const r=k(),o=D({menuName:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),s=D({required:["menuId","menuName","menuGroupCode","path","isDisplay","isLast","depth","sortOrder"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),C={unique:["menuId"],required:["menuId","menuName","menuGroupCode","path","isDisplay","isLast","depth","sortOrder"]};let f=null;const b=a=>{a==null||a.preventDefault(),p()},p=()=>{v.getMenuList({...o,page:s.currentPage,totalPage:s.totalPage}).then(a=>{var t,n,l,u;s.list=(t=a.data)==null?void 0:t.list,s.totalCount=(n=a.data)==null?void 0:n.totalCount,s.currentPage=(l=a.data)==null?void 0:l.currentPage,s.lastPage=(u=a.data)==null?void 0:u.lastPage,s.grid&&s.grid.updateSettings({data:s.list})},a=>{console.log(a)})},S=a=>{s.currentPage=a,p()},L=()=>{const a={...d.commonAddColumns,menuId:"",menuName:"",menuGroupCode:"",path:"",icon:"",isDisplay:"",isLast:"",depth:"",sortOrder:"",...d.auditAddColumns};s.list=d.add({newRow:a,list:s.list,grid:s.grid})},M=()=>{d.del({selectedRow:f,grid:s.grid})},N=()=>{const a=d.valid({list:s.list,required:C.required});a&&v.setMenuList(a).then(()=>{p()})};return q(()=>{const a=document.querySelector("#grid");s.grid=new $(a,{data:s.list,colHeaders:[...d.commonColumnNames,"메뉴아이디","메뉴명","메뉴그룹코드","경로","아이콘","전시여부","마지막여부","깊이","정렬순서",...d.auditColumnNames],hiddenColumns:d.hiddenColumns([]),columns:[...d.commonColumns,{data:"menuId",type:"text",width:150,readOnly:!0},{data:"menuName",type:"text",width:150},{data:"menuGroupCode",type:"dropdown",width:150,source:function(t,n){var l;n((l=r.codeList.menuGroupCode)==null?void 0:l.map(u=>u.codeValue))}},{data:"path",type:"text",width:150},{data:"icon",type:"text",width:150},{data:"isDisplay",type:"dropdown",width:150,source:function(t,n){var l;n((l=r.codeList.isDisplay)==null?void 0:l.map(u=>u.codeValue))}},{data:"isLast",type:"dropdown",width:150,source:function(t,n){var l;n((l=r.codeList.isLast)==null?void 0:l.map(u=>u.codeValue))}},{data:"depth",type:"numeric",width:150},{data:"sortOrder",type:"numeric",width:150},...d.auditColumns],cells:function(t,n){return d.cellsEvent({row:t,col:n,grid:s.grid,self:this,pk:[]})},afterChange(t,n){d.afterChangeEvent({changes:t,source:n,gridProps:C,grid:s.grid,self:this})},afterSelectionEnd:function(t,n,l,u){f=t},...d.defaultProps}),p()}),(a,t)=>(V(),G(O,null,[e("form",{class:"search",onSubmit:b,onKeyup:E(b,["enter"])},[e("fieldset",null,[t[16]||(t[16]=e("legend",null,"검색",-1)),e("table",null,[t[15]||(t[15]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[e("tr",null,[t[10]||(t[10]=e("th",{scope:"row"},"메뉴명",-1)),e("td",F,[i(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>o.menuName=n)},null,512),[[c,o.menuName]])])])]),i(e("tbody",R,[e("tr",null,[t[11]||(t[11]=e("th",{scope:"row"},"수정기간",-1)),e("td",T,[y(B,{format:"yyyy-MM-dd",date:[o.startUpdateDt,o.endUpdateDt],onSetStartDate:t[1]||(t[1]=n=>{o.startUpdateDt=n.date}),onSetEndDate:t[2]||(t[2]=n=>{o.endUpdateDt=n.date})},null,8,["date"])])]),e("tr",null,[t[12]||(t[12]=e("th",{scope:"row"},"등록일",-1)),e("td",J,[y(H,{format:"yyyy-MM-dd",date:[o.createDt],onSetStartDate:t[3]||(t[3]=n=>{o.createDt=n.date})},null,8,["date"])])]),e("tr",null,[t[13]||(t[13]=e("th",{scope:"row"},"수정ID",-1)),e("td",null,[i(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=n=>o.updater=n)},null,512),[[c,o.updater]])]),t[14]||(t[14]=e("th",{scope:"row"},"등록ID",-1)),e("td",null,[i(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>o.creator=n)},null,512),[[c,o.creator]])])])],512),[[P,s.audit]])])]),e("div",W,[e("span",j,[e("button",{type:"button",class:"button add",onClick:L},t[17]||(t[17]=[e("span",{class:"icon"},"",-1),m("추가")])),e("button",{type:"button",class:"button del",onClick:M},t[18]||(t[18]=[e("span",{class:"icon"},"",-1),m("삭제")])),e("button",{type:"button",class:"button save",onClick:N},t[19]||(t[19]=[e("span",{class:"icon"},"",-1),m("저장")])),e("button",{type:"button",class:"button reset",onClick:t[6]||(t[6]=n=>w(d).reload())},t[20]||(t[20]=[e("span",{class:"icon"},'"',-1),m("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[7]||(t[7]=n=>s.audit=!s.audit)},"상세조회"),t[23]||(t[23]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[8]||(t[8]=n=>w(d).reload())},t[21]||(t[21]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[9]||(t[9]=n=>w(A).excelExport(s.grid,"메뉴"))},t[22]||(t[22]=[e("span",{class:"icon"},"",-1)])),e("div",z,"총 "+I(s.totalCount)+"건",1)])],32),t[24]||(t[24]=e("div",{id:"grid",class:"grid-container"},null,-1)),i(e("div",Q,"조회 내역이 없습니다.",512),[[P,s.list.length===0]]),y(h,{currentPage:s.currentPage,lastPage:s.lastPage,"onUpdate:page":S},null,8,["currentPage","lastPage"])],64))}});export{et as default};
