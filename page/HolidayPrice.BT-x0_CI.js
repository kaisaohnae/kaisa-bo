import{d as H,c as I,r as w,x as L,o as M,e as N,f as o,l as y,J as u,w as s,K as c,v as g,h as C,G as h,L as q,F as E}from"../index.Cmy3sguR.js";import{H as $,g as d,P as Y,e as A}from"./Pagination.BciRQOOL.js";import{a as D}from"./apiConfig.0ZG0sWLr.js";import{d as B}from"./dateUtil.DyiMf4By.js";import{S as K,a as R,V as F}from"./SelectGroupDate.Coh5Kjcx.js";import{C as G}from"./CommonCodeRadio.DFGgMA6a.js";class O{async getHolidayPriceList(i){return(await D("/od/getHolidayPriceList",i||{})).data}async setHolidayPriceList(i){return(await D("/od/setHolidayPriceList",i||{})).data}}const v=new O,T={colspan:"3"},J={colspan:"3"},W={colspan:"3"},j={colspan:"3"},z={class:"audit"},Q={colspan:"3"},X={colspan:"3"},Z={class:"btnWrap"},_={class:"crud"},tt={class:"totalCount"},ot={class:"no-list"},it=H({__name:"HolidayPrice",setup(x){const i=I(),a=w({holiday:"",companyId:"",holidayName:"",holidayCode:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),l=w({required:["holiday","companyId","price","holidayCode"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),f={unique:["holiday"],required:["holiday","companyId","price","holidayCode"]};let P=null;const b=n=>{n==null||n.preventDefault(),m()},m=()=>{v.getHolidayPriceList({...a,page:l.currentPage,totalPage:l.totalPage}).then(n=>{var t,e,r,p;l.list=(t=n.data)==null?void 0:t.list,l.totalCount=(e=n.data)==null?void 0:e.totalCount,l.currentPage=(r=n.data)==null?void 0:r.currentPage,l.lastPage=(p=n.data)==null?void 0:p.lastPage,l.grid&&l.grid.updateSettings({data:l.list})},n=>{console.log(n)})},S=n=>{l.currentPage=n,m()},U=()=>{const n={...d.commonAddColumns,holiday:"",companyId:"",holidayName:"",price:"",holidayCode:"",...d.auditAddColumns};l.list=d.add({newRow:n,list:l.list,grid:l.grid})},k=()=>{d.del({selectedRow:P,grid:l.grid})},V=()=>{const n=d.valid({list:l.list,required:f.required});n&&v.setHolidayPriceList(n).then(()=>{m()})};return L(()=>{const n=document.querySelector("#grid");l.grid=new $(n,{data:l.list,colHeaders:[...d.commonColumnNames,"휴일","업체아이디","휴일명","가격","휴일코드",...d.auditColumnNames],hiddenColumns:d.hiddenColumns([]),columns:[...d.commonColumns,{data:"holiday",type:"date",width:170,readOnly:!0,...d.datePickerConfig},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"holidayName",type:"text",width:150},{data:"price",type:"numeric",width:150},{data:"holidayCode",type:"dropdown",width:150,source:function(t,e){var r;e((r=i.codeList.holidayCode)==null?void 0:r.map(p=>p.codeValue))}},...d.auditColumns],cells:function(t,e){return d.cellsEvent({row:t,col:e,grid:l.grid,self:this,pk:[]})},afterChange(t,e){d.afterChangeEvent({changes:t,source:e,gridProps:f,grid:l.grid,self:this})},afterSelectionEnd:function(t,e,r,p){P=t},...d.defaultProps}),m()}),(n,t)=>(M(),N(E,null,[o("form",{class:"search",onSubmit:b,onKeyup:q(b,["enter"])},[o("fieldset",null,[t[23]||(t[23]=o("legend",null,"검색",-1)),o("table",null,[t[22]||(t[22]=o("colgroup",null,[o("col",{style:{width:"80px"}}),o("col",{style:{width:"30%"}}),o("col",{style:{width:"80px"}}),o("col")],-1)),o("tbody",null,[o("tr",null,[t[14]||(t[14]=o("th",null,"휴일",-1)),o("td",T,[y(u(F),{modelValue:a.holiday,"onUpdate:modelValue":[t[0]||(t[0]=e=>a.holiday=e),t[1]||(t[1]=e=>{a.holiday=u(B).format(e,"YYYY-MM-DD")})],locale:"ko",format:"yyyy-MM-dd",style:{width:"160px"},class:"input"},null,8,["modelValue"])])]),s(o("tr",null,[t[15]||(t[15]=o("th",null,"업체아이디",-1)),o("td",J,[s(o("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>a.companyId=e)},null,512),[[g,a.companyId]])])],512),[[c,u(i).userInfo.companyId==="kaisa"]]),o("tr",null,[t[16]||(t[16]=o("th",null,"휴일명",-1)),o("td",W,[s(o("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>a.holidayName=e)},null,512),[[g,a.holidayName]])])]),o("tr",null,[t[17]||(t[17]=o("th",null,"휴일코드",-1)),o("td",j,[y(G,{cd:"holidayCode",model:a.holidayCode,onSetData:t[4]||(t[4]=e=>{a.holidayCode=e})},null,8,["model"])])])]),s(o("tbody",z,[o("tr",null,[t[18]||(t[18]=o("th",null,"수정기간",-1)),o("td",Q,[y(K,{format:"yyyy-MM-dd",date:[a.startUpdateDt,a.endUpdateDt],onSetStartDate:t[5]||(t[5]=e=>{a.startUpdateDt=e.date}),onSetEndDate:t[6]||(t[6]=e=>{a.endUpdateDt=e.date})},null,8,["date"])])]),o("tr",null,[t[19]||(t[19]=o("th",null,"등록일",-1)),o("td",X,[y(R,{format:"yyyy-MM-dd",date:[a.createDt],onSetStartDate:t[7]||(t[7]=e=>{a.createDt=e.date})},null,8,["date"])])]),o("tr",null,[t[20]||(t[20]=o("th",null,"수정ID",-1)),o("td",null,[s(o("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>a.updater=e)},null,512),[[g,a.updater]])]),t[21]||(t[21]=o("th",null,"등록ID",-1)),o("td",null,[s(o("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>a.creator=e)},null,512),[[g,a.creator]])])])],512),[[c,l.audit]])])]),o("div",Z,[o("span",_,[o("button",{type:"button",class:"button add",onClick:U},t[24]||(t[24]=[o("span",{class:"icon"},"",-1),C("추가")])),o("button",{type:"button",class:"button del",onClick:k},t[25]||(t[25]=[o("span",{class:"icon"},"",-1),C("삭제")])),o("button",{type:"button",class:"button save",onClick:V},t[26]||(t[26]=[o("span",{class:"icon"},"",-1),C("저장")])),o("button",{type:"button",class:"button reset",onClick:t[10]||(t[10]=e=>u(d).reload())},t[27]||(t[27]=[o("span",{class:"icon"},'"',-1),C("초기화")]))]),o("button",{type:"button",class:"audit",onClick:t[11]||(t[11]=e=>l.audit=!l.audit)},"상세조회"),t[30]||(t[30]=o("button",{type:"submit",class:"button3"},[o("span",{class:"icon"},"")],-1)),o("button",{type:"reset",onClick:t[12]||(t[12]=e=>u(d).reload())},t[28]||(t[28]=[o("span",{class:"icon"},'"',-1)])),o("button",{type:"button",class:"button excel",onClick:t[13]||(t[13]=e=>u(A).excelExport(l.grid,"휴일가격"))},t[29]||(t[29]=[o("span",{class:"icon"},"",-1)])),o("div",tt,"총 "+h(l.totalCount)+"건",1)])],32),t[31]||(t[31]=o("div",{id:"grid",class:"grid-container"},null,-1)),s(o("div",ot,"조회 내역이 없습니다.",512),[[c,l.list.length===0]]),y(Y,{currentPage:l.currentPage,lastPage:l.lastPage,"onUpdate:page":S},null,8,["currentPage","lastPage"])],64))}});export{it as default};
