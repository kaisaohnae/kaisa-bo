import{d as Q,c as k,r as C,x as L,o as V,e as q,f as e,w as d,v as r,K as x,l as y,h as u,J as w,G as E,L as M,F as $}from"../index.CD5dv6li.js";import{H as A,g as l,P as B,e as H}from"./Pagination.DK3zvXrH.js";import{a as p}from"./apiConfig.BBkX-QE5.js";import{S as K,a as F}from"./SelectGroupDate.BJZoF4YC.js";import"./dateUtil.NOuC8K0u.js";class G{async getQna(s){return(await p("/cs/getQna",s||{})).data}async getQnaList(s){return(await p("/cs/getQnaList",s||{})).data}async setQna(s){return(await p("/cs/setQna",s||{})).data}async setQnaList(s){return(await p("/cs/setQnaList",s||{})).data}}const N=new G,I={colspan:"3"},R={colspan:"3"},T={colspan:"3"},J={colspan:"3"},O={colspan:"3"},W={class:"audit"},j={colspan:"3"},z={colspan:"3"},X={class:"btnWrap"},Y={class:"crud"},Z={class:"totalCount"},h={class:"no-list"},st=Q({__name:"Qna",setup(P){k();const s=C({memberName:"",phoneNo:"",email:"",title:"",content:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),n=C({required:["memberName","phoneNo","pwd","title","content"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),b={unique:["qnaNo"],required:["memberName","phoneNo","pwd","title","content"]};let c=null;const f=a=>{a==null||a.preventDefault(),i()},i=()=>{N.getQnaList({...s,page:n.currentPage,totalPage:n.totalPage}).then(a=>{var t,o,m,g;n.list=(t=a.data)==null?void 0:t.list,n.totalCount=(o=a.data)==null?void 0:o.totalCount,n.currentPage=(m=a.data)==null?void 0:m.currentPage,n.lastPage=(g=a.data)==null?void 0:g.lastPage,n.grid&&n.grid.updateSettings({data:n.list})},a=>{console.log(a)})},D=a=>{n.currentPage=a,i()},v=()=>{const a={...l.commonAddColumns,qnaNo:"",memberName:"",phoneNo:"",email:"",pwd:"",title:"",content:"",...l.auditAddColumns};n.list=l.add({newRow:a,list:n.list,grid:n.grid})},S=()=>{l.del({selectedRow:c,grid:n.grid})},U=()=>{const a=l.valid({list:n.list,required:b.required});a&&N.setQnaList(a).then(()=>{i()})};return L(()=>{const a=document.querySelector("#grid");n.grid=new A(a,{data:n.list,colHeaders:[...l.commonColumnNames,"질문번호","회원명","전화번호","이메일","비밀번호","제목","내용",...l.auditColumnNames],hiddenColumns:l.hiddenColumns([]),columns:[...l.commonColumns,{data:"qnaNo",type:"numeric",width:150,readOnly:!0},{data:"memberName",type:"text",width:150},{data:"phoneNo",type:"text",width:150},{data:"email",type:"text",width:150},{data:"pwd",type:"text",width:150},{data:"title",type:"text",width:150},{data:"content",type:"text",width:150},...l.auditColumns],cells:function(t,o){return l.cellsEvent({row:t,col:o,grid:n.grid,self:this,pk:[]})},afterChange(t,o){l.afterChangeEvent({changes:t,source:o,gridProps:b,grid:n.grid,self:this})},afterSelectionEnd:function(t,o,m,g){c=t},...l.defaultProps}),i()}),(a,t)=>(V(),q($,null,[e("form",{class:"search",onSubmit:f,onKeyup:M(f,["enter"])},[e("fieldset",null,[t[24]||(t[24]=e("legend",null,"검색",-1)),e("table",null,[t[23]||(t[23]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[e("tr",null,[t[14]||(t[14]=e("th",{scope:"row"},"회원명",-1)),e("td",I,[d(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.memberName=o)},null,512),[[r,s.memberName]])])]),e("tr",null,[t[15]||(t[15]=e("th",{scope:"row"},"전화번호",-1)),e("td",R,[d(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>s.phoneNo=o)},null,512),[[r,s.phoneNo]])])]),e("tr",null,[t[16]||(t[16]=e("th",{scope:"row"},"이메일",-1)),e("td",T,[d(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>s.email=o)},null,512),[[r,s.email]])])]),e("tr",null,[t[17]||(t[17]=e("th",{scope:"row"},"제목",-1)),e("td",J,[d(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.title=o)},null,512),[[r,s.title]])])]),e("tr",null,[t[18]||(t[18]=e("th",{scope:"row"},"내용",-1)),e("td",O,[d(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>s.content=o)},null,512),[[r,s.content]])])])]),d(e("tbody",W,[e("tr",null,[t[19]||(t[19]=e("th",{scope:"row"},"수정기간",-1)),e("td",j,[y(K,{format:"yyyy-MM-dd",date:[s.startUpdateDt,s.endUpdateDt],onSetStartDate:t[5]||(t[5]=o=>{s.startUpdateDt=o.date}),onSetEndDate:t[6]||(t[6]=o=>{s.endUpdateDt=o.date})},null,8,["date"])])]),e("tr",null,[t[20]||(t[20]=e("th",{scope:"row"},"등록일",-1)),e("td",z,[y(F,{format:"yyyy-MM-dd",date:[s.createDt],onSetStartDate:t[7]||(t[7]=o=>{s.createDt=o.date})},null,8,["date"])])]),e("tr",null,[t[21]||(t[21]=e("th",{scope:"row"},"수정ID",-1)),e("td",null,[d(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=o=>s.updater=o)},null,512),[[r,s.updater]])]),t[22]||(t[22]=e("th",{scope:"row"},"등록ID",-1)),e("td",null,[d(e("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=o=>s.creator=o)},null,512),[[r,s.creator]])])])],512),[[x,n.audit]])])]),e("div",X,[e("span",Y,[e("button",{type:"button",class:"button add",onClick:v},t[25]||(t[25]=[e("span",{class:"icon"},"",-1),u("추가")])),e("button",{type:"button",class:"button del",onClick:S},t[26]||(t[26]=[e("span",{class:"icon"},"",-1),u("삭제")])),e("button",{type:"button",class:"button save",onClick:U},t[27]||(t[27]=[e("span",{class:"icon"},"",-1),u("저장")])),e("button",{type:"button",class:"button reset",onClick:t[10]||(t[10]=o=>w(l).reload())},t[28]||(t[28]=[e("span",{class:"icon"},'"',-1),u("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[11]||(t[11]=o=>n.audit=!n.audit)},"상세조회"),t[31]||(t[31]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[12]||(t[12]=o=>w(l).reload())},t[29]||(t[29]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[13]||(t[13]=o=>w(H).excelExport(n.grid,"문의"))},t[30]||(t[30]=[e("span",{class:"icon"},"",-1)])),e("div",Z,"총 "+E(n.totalCount)+"건",1)])],32),t[32]||(t[32]=e("div",{id:"grid",class:"grid-container"},null,-1)),d(e("div",h,"조회 내역이 없습니다.",512),[[x,n.list.length===0]]),y(B,{currentPage:n.currentPage,lastPage:n.lastPage,"onUpdate:page":D},null,8,["currentPage","lastPage"])],64))}});export{st as default};
