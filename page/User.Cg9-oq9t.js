import{d as c,r as v,x as L,o as N,e as $,f as t,G as D,w as i,v as p,l as w,p as k,c as B,K as S,J as U,h as f,L as H,A as O,B as R,F as T}from"../index.C-nXzXzh.js";import{H as K,g as u,P as F,e as G}from"./Pagination.Dv7wRgvR.js";import{a as b}from"./apiConfig.Dn3pyRtA.js";import{S as j,a as J}from"./SelectGroupDate.CxGgGt6L.js";import{C as W}from"./CommonCodeRadio.BRetiKil.js";import{D as z}from"./Detail.CX0PklKl.js";import{_ as Q}from"./CommonCode.vue_vue_type_script_setup_true_lang.GLTqk_w3.js";import"./dateUtil.DX7rpUD5.js";class X{async getUser(d){return(await b("/at/getUser",d||{})).data}async getUserList(d){return(await b("/at/getUserList",d||{})).data}async setUser(d){return(await b("/at/setUser",d||{})).data}async setUserList(d){return(await b("/at/setUserList",d||{})).data}}const I=new X,Y={class:"detail-content"},Z={class:"detail-scroll"},h={class:"detail-table"},_=c({__name:"UserDetail",props:{data:{type:Object,required:!0}},setup(l){const d=l;v({editor:{},editorOption:{}});const m=()=>{d.data.companyId&&I.getUser({companyId:d.data.companyId}).then(r=>{d.data.userId=r.data.userId,d.data.companyId=r.data.companyId,d.data.userName=r.data.userName,d.data.phoneNo=r.data.phoneNo,d.data.passwordUpdateDt=r.data.passwordUpdateDt,d.data.memo=r.data.memo,d.data.loginDt=r.data.loginDt,d.data.userStateCode=r.data.userStateCode,d.data.creator=r.data.creator,d.data.createDt=r.data.createDt,d.data.updater=r.data.updater,d.data.updateDt=r.data.updateDt},r=>{console.log(r)})};return L(()=>{m()}),(r,a)=>(N(),$("div",Y,[a[19]||(a[19]=t("h2",null,"사용자 상세",-1)),t("div",Z,[t("table",h,[a[18]||(a[18]=t("caption",null,"사용자 상세",-1)),t("tbody",null,[t("tr",null,[a[6]||(a[6]=t("th",{scope:"col"},"사용자아이디",-1)),t("td",null,D(l.data.userId),1)]),t("tr",null,[a[7]||(a[7]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,D(l.data.companyId),1)]),t("tr",null,[a[8]||(a[8]=t("th",{scope:"col"},"사용자이름",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>l.data.userName=o)},null,512),[[p,l.data.userName]])])]),t("tr",null,[a[9]||(a[9]=t("th",{scope:"col"},"전화번호",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=o=>l.data.phoneNo=o)},null,512),[[p,l.data.phoneNo]])])]),t("tr",null,[a[10]||(a[10]=t("th",{scope:"col"},"비밀번호수정일시",-1)),t("td",null,[i(t("input",{type:"datetime","onUpdate:modelValue":a[2]||(a[2]=o=>l.data.passwordUpdateDt=o)},null,512),[[p,l.data.passwordUpdateDt]])])]),t("tr",null,[a[11]||(a[11]=t("th",{scope:"col"},"메모",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=o=>l.data.memo=o),required:""},null,512),[[p,l.data.memo]])])]),t("tr",null,[a[12]||(a[12]=t("th",{scope:"col"},"로그인일시",-1)),t("td",null,[i(t("input",{type:"datetime","onUpdate:modelValue":a[4]||(a[4]=o=>l.data.loginDt=o)},null,512),[[p,l.data.loginDt]])])]),t("tr",null,[a[13]||(a[13]=t("th",{scope:"col"},"사용자상태코드",-1)),t("td",null,[w(Q,{cd:"userStateCode",model:l.data.userStateCode,onSetData:a[5]||(a[5]=o=>{l.data.userStateCode=o})},null,8,["model"])])]),t("tr",null,[a[14]||(a[14]=t("th",{scope:"col"},"등록자",-1)),t("td",null,D(l.data.creator),1)]),t("tr",null,[a[15]||(a[15]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,D(l.data.createDt),1)]),t("tr",null,[a[16]||(a[16]=t("th",{scope:"col"},"수정자",-1)),t("td",null,D(l.data.updater),1)]),t("tr",null,[a[17]||(a[17]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,D(l.data.updateDt),1)])])])]),a[20]||(a[20]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),tt={colspan:"3"},et={colspan:"3"},at={colspan:"3"},ot={colspan:"3"},nt={colspan:"3"},dt={class:"audit"},lt={colspan:"3"},st={colspan:"3"},rt={class:"btnWrap"},ut={class:"crud"},it={class:"totalCount"},pt={class:"no-list"},bt=c({__name:"User",setup(l){const d=k(null),m=k(!1),r=B(),a=v({userId:"",companyId:"",userName:"",phoneNo:"",userStateCode:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),o=v({required:["userId","companyId","userName","phoneNo","passwordUpdateDt","loginDt","userStateCode"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),x={unique:["companyId"],required:["userId","companyId","userName","phoneNo","passwordUpdateDt","loginDt","userStateCode"]};let P=null;const V=s=>{s==null||s.preventDefault(),C()},C=()=>{I.getUserList({...a,page:o.currentPage,totalPage:o.totalPage}).then(s=>{var e,n,g,y;o.list=(e=s.data)==null?void 0:e.list,o.totalCount=(n=s.data)==null?void 0:n.totalCount,o.currentPage=(g=s.data)==null?void 0:g.currentPage,o.lastPage=(y=s.data)==null?void 0:y.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},s=>{console.log(s)})},q=s=>{o.currentPage=s,C()},M=()=>{const s={...u.commonAddColumns,userId:"",companyId:"",userName:"",phoneNo:"",passwordUpdateDt:"",memo:"",loginDt:"",userStateCode:"",...u.auditAddColumns};o.list=u.add({newRow:s,list:o.list,grid:o.grid})},E=()=>{u.del({selectedRow:P,grid:o.grid})},A=()=>{const s=u.valid({list:o.list,required:x.required});s&&I.setUserList(s).then(()=>{C()})};return L(()=>{const s=document.querySelector("#grid");o.grid=new K(s,{data:o.list,colHeaders:[...u.commonColumnNames,"사용자아이디","업체아이디","사용자이름","전화번호","비밀번호수정일시","메모","로그인일시","사용자상태코드",...u.auditColumnNames],hiddenColumns:u.hiddenColumns([]),columns:[...u.commonColumns,{data:"userId",type:"text",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"userName",type:"text",width:150,className:"underline"},{data:"phoneNo",type:"text",width:150},{data:"passwordUpdateDt",type:"date",width:170,...u.dateTimePickerConfig},{data:"memo",type:"text",width:150},{data:"loginDt",type:"date",width:170,...u.dateTimePickerConfig},{data:"userStateCode",type:"dropdown",width:150,source:function(e,n){var g;n((g=r.codeList.userStateCode)==null?void 0:g.map(y=>y.codeValue))}},...u.auditColumns],cells:function(e,n){return u.cellsEvent({row:e,col:n,grid:o.grid,self:this,pk:[]})},afterChange(e,n){u.afterChangeEvent({changes:e,source:n,gridProps:x,grid:o.grid,self:this})},afterSelectionEnd:function(e,n,g,y){P=e},afterOnCellMouseDown:(e,n)=>{const g=o.grid.getColHeader(n.col),y=o.grid.getSourceDataAtRow(n.row);g==="사용자이름"&&y&&(d.value=y,m.value=!0)},...u.defaultProps}),C()}),(s,e)=>(N(),$(T,null,[t("form",{class:"search",onSubmit:V,onKeyup:H(V,["enter"])},[t("fieldset",null,[e[25]||(e[25]=t("legend",null,"검색",-1)),t("table",null,[e[24]||(e[24]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[e[15]||(e[15]=t("th",{scope:"row"},"사용자아이디",-1)),t("td",tt,[i(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>a.userId=n)},null,512),[[p,a.userId]])])]),i(t("tr",null,[e[16]||(e[16]=t("th",{scope:"row"},"업체아이디",-1)),t("td",et,[i(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>a.companyId=n)},null,512),[[p,a.companyId]])])],512),[[S,U(r).userInfo.companyId==="kaisa"]]),t("tr",null,[e[17]||(e[17]=t("th",{scope:"row"},"사용자이름",-1)),t("td",at,[i(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>a.userName=n)},null,512),[[p,a.userName]])])]),t("tr",null,[e[18]||(e[18]=t("th",{scope:"row"},"전화번호",-1)),t("td",ot,[i(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=n=>a.phoneNo=n)},null,512),[[p,a.phoneNo]])])]),t("tr",null,[e[19]||(e[19]=t("th",{scope:"row"},"사용자상태코드",-1)),t("td",nt,[w(W,{cd:"userStateCode",model:a.userStateCode,onSetData:e[4]||(e[4]=n=>{a.userStateCode=n})},null,8,["model"])])])]),i(t("tbody",dt,[t("tr",null,[e[20]||(e[20]=t("th",{scope:"row"},"수정기간",-1)),t("td",lt,[w(j,{format:"yyyy-MM-dd",date:[a.startUpdateDt,a.endUpdateDt],onSetStartDate:e[5]||(e[5]=n=>{a.startUpdateDt=n.date}),onSetEndDate:e[6]||(e[6]=n=>{a.endUpdateDt=n.date})},null,8,["date"])])]),t("tr",null,[e[21]||(e[21]=t("th",{scope:"row"},"등록일",-1)),t("td",st,[w(J,{format:"yyyy-MM-dd",date:[a.createDt],onSetStartDate:e[7]||(e[7]=n=>{a.createDt=n.date})},null,8,["date"])])]),t("tr",null,[e[22]||(e[22]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=n=>a.updater=n)},null,512),[[p,a.updater]])]),e[23]||(e[23]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=n=>a.creator=n)},null,512),[[p,a.creator]])])])],512),[[S,o.audit]])])]),t("div",rt,[t("span",ut,[t("button",{type:"button",class:"button add",onClick:M},e[26]||(e[26]=[t("span",{class:"icon"},"",-1),f("추가")])),t("button",{type:"button",class:"button del",onClick:E},e[27]||(e[27]=[t("span",{class:"icon"},"",-1),f("삭제")])),t("button",{type:"button",class:"button save",onClick:A},e[28]||(e[28]=[t("span",{class:"icon"},"",-1),f("저장")])),t("button",{type:"button",class:"button reset",onClick:e[10]||(e[10]=n=>U(u).reload())},e[29]||(e[29]=[t("span",{class:"icon"},'"',-1),f("초기화")]))]),t("button",{type:"button",class:"audit",onClick:e[11]||(e[11]=n=>o.audit=!o.audit)},"상세조회"),e[32]||(e[32]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:e[12]||(e[12]=n=>U(u).reload())},e[30]||(e[30]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:e[13]||(e[13]=n=>U(G).excelExport(o.grid,"사용자"))},e[31]||(e[31]=[t("span",{class:"icon"},"",-1)])),t("div",it,"총 "+D(o.totalCount)+"건",1)])],32),e[33]||(e[33]=t("div",{id:"grid",class:"grid-container"},null,-1)),i(t("div",pt,"조회 내역이 없습니다.",512),[[S,o.list.length===0]]),w(F,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":q},null,8,["currentPage","lastPage"]),m.value?(N(),O(z,{key:0,component:_,data:d.value,show:m.value,onClose:e[14]||(e[14]=n=>m.value=!1)},null,8,["data","show"])):R("",!0)],64))}});export{bt as default};
