import{d as U,r as x,x as k,o as g,e as v,f as t,A as E,N as K,t as N,_ as R,c as M,w as m,O as F,G as S,F as O,D as G,J as D,v as b,l as I,p as L,K as V,h as P,L as j,B as z}from"../index.8mXqKDFy.js";import{g as r,H as J,P as W,e as Q}from"./Pagination.HFP-leG0.js";import{a as B}from"./apiConfig.Cb5X9RbM.js";import{S as X,a as Y}from"./SelectGroupDate.DlEKbCFO.js";import"./dateUtil.CtZ7_Ahw.js";class Z{async getBoard(d){return(await B("/pd/getBoard",d||{})).data}async getBoardList(d){return(await B("/pd/getBoardList",d||{})).data}async setBoard(d){return(await B("/pd/setBoard",d||{})).data}async setBoardList(d){return(await B("/pd/setBoardList",d||{})).data}}const q=new Z,h=U({__name:"Detail",props:{component:{},data:{},show:{type:Boolean}},emits:["close"],setup(u,{emit:d}){const i=u,p=x({show:i.show,open:!1}),a=d,o=()=>{p.open=!1,setTimeout(()=>{a("close")},200)};return k(()=>{setTimeout(()=>{p.open=!0},100)}),(s,y)=>(g(),v("div",{class:N(["detail-container",{on:p.show}])},[t("div",{class:N(["detail-wrapper",{on:p.open}])},[t("div",{class:"detail-close icon",onClick:o},""),(g(),E(K(s.component),{data:i.data},null,8,["data"]))],2),t("div",{class:N(["detail-dimmed",{on:p.open}]),onClick:o},null,2)],2))}}),_=R(h,[["__scopeId","data-v-f153259d"]]),tt={disabled:"",value:""},et=["value"],ot=U({__name:"CommonCode",props:{cd:{type:String,required:!0},model:{type:String,required:!0},default:{type:String,default:"선택하세요."}},emits:["set-data"],setup(u,{emit:d}){const i=M(),p=d,a=u,o=x({value:a.model}),s=()=>{p("set-data",o.value)};return k(()=>{}),(y,C)=>m((g(),v("select",{"onUpdate:modelValue":C[0]||(C[0]=c=>o.value=c),onChange:s},[t("option",tt,S(a.default),1),(g(!0),v(O,null,G(D(i).codeList[a.cd],(c,$)=>(g(),v("option",{key:$,value:c.codeValue},S(c.codeName),9,et))),128))],544)),[[F,o.value]])}}),nt={class:"detail-content"},at={class:"detail-scroll"},st={class:"detail-table"},lt=U({__name:"BoardDetail",props:{data:{type:Object,required:!0}},setup(u){const d=u,i=x({editor:{},editorOption:{}}),p=()=>{i.editor=r.createEditor({name:"#boardEditor",cnts:d.data})},a=()=>{p()};return k(()=>{a()}),(o,s)=>(g(),v("div",nt,[s[8]||(s[8]=t("h2",null,"게시판 상세",-1)),t("div",at,[t("table",st,[s[7]||(s[7]=t("caption",null,"게시판 상세",-1)),t("tbody",null,[t("tr",null,[s[2]||(s[2]=t("th",{scope:"col"},"게시판 번호",-1)),t("td",null,S(u.data.boardNo),1)]),t("tr",null,[s[3]||(s[3]=t("th",{scope:"col"},"카테고리",-1)),t("td",null,S(u.data.boardCategoryId),1)]),t("tr",null,[s[4]||(s[4]=t("th",{scope:"col"},"제목",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=y=>u.data.title=y),required:""},null,512),[[b,u.data.title]])])]),t("tr",null,[s[5]||(s[5]=t("th",{scope:"col"},"전시여부",-1)),t("td",null,[I(ot,{cd:"isDisplay",model:u.data.isDisplay,onSetData:s[1]||(s[1]=y=>{u.data.isDisplay=y})},null,8,["model"])])]),s[6]||(s[6]=t("tr",null,[t("td",{colspan:"2"},[t("div",{id:"boardEditor"})])],-1))])])]),s[9]||(s[9]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),dt={colspan:"3"},rt={colspan:"3"},it={colspan:"3"},ut={colspan:"3"},pt={class:"audit"},mt={colspan:"3"},ct={colspan:"3"},yt={class:"btnWrap"},gt={class:"crud"},bt={class:"totalCount"},wt={class:"no-list"},St=U({__name:"Board",setup(u){const d=L(null),i=L(!1),p=M(),a=x({boardCategoryId:"",companyId:"",title:"",contents:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),o=x({required:["boardCategoryId","companyId","title","contents","isDisplay"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),s={unique:["boardNo"],required:["boardCategoryId","companyId","title","contents","isDisplay"]};let y=null;const C=l=>{l==null||l.preventDefault(),c()},c=()=>{q.getBoardList({...a,page:o.currentPage,totalPage:o.totalPage}).then(l=>{var e,n,f,w;o.list=(e=l.data)==null?void 0:e.list,o.totalCount=(n=l.data)==null?void 0:n.totalCount,o.currentPage=(f=l.data)==null?void 0:f.currentPage,o.lastPage=(w=l.data)==null?void 0:w.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},l=>{console.log(l)})},$=l=>{o.currentPage=l,c()},A=()=>{const l={...r.commonAddColumns,boardNo:"",boardCategoryId:"",companyId:"",title:"",contents:"",isDisplay:"",tag:"",...r.auditAddColumns};o.list=r.add({newRow:l,list:o.list,grid:o.grid})},H=()=>{r.del({selectedRow:y,grid:o.grid})},T=()=>{const l=r.valid({list:o.list,required:s.required});l&&q.setBoardList(l).then(()=>{c()})};return k(()=>{const l=document.querySelector("#grid");o.grid=new J(l,{data:o.list,colHeaders:[...r.commonColumnNames,"게시판번호","게시판카테고리아이디","업체아이디","제목","내용","전시여부","태그",...r.auditColumnNames],hiddenColumns:r.hiddenColumns([]),columns:[...r.commonColumns,{data:"boardNo",type:"numeric",width:150,readOnly:!0},{data:"boardCategoryId",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"title",type:"text",width:150,className:"underline"},{data:"contents",type:"text",width:150},{data:"isDisplay",type:"numeric",width:150},{data:"tag",type:"text",width:150},...r.auditColumns],cells:function(e,n){return r.cellsEvent({row:e,col:n,grid:o.grid,self:this,pk:[]})},afterChange(e,n){r.afterChangeEvent({changes:e,source:n,gridProps:s,grid:o.grid,self:this})},afterSelectionEnd:function(e,n,f,w){y=e},afterOnCellMouseDown:(e,n)=>{const f=o.grid.getColHeader(n.col),w=o.grid.getSourceDataAtRow(n.row);f==="제목"&&w&&(d.value=w,i.value=!0)},...r.defaultProps}),c()}),(l,e)=>(g(),v(O,null,[t("form",{class:"search",onSubmit:C,onKeyup:j(C,["enter"])},[t("fieldset",null,[e[23]||(e[23]=t("legend",null,"검색",-1)),t("table",null,[e[22]||(e[22]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[e[14]||(e[14]=t("th",{scope:"row"},"게시판카테고리아이디",-1)),t("td",dt,[m(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>a.boardCategoryId=n)},null,512),[[b,a.boardCategoryId]])])]),m(t("tr",null,[e[15]||(e[15]=t("th",{scope:"row"},"업체아이디",-1)),t("td",rt,[m(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>a.companyId=n)},null,512),[[b,a.companyId]])])],512),[[V,D(p).userInfo.companyId==="kaisa"]]),t("tr",null,[e[16]||(e[16]=t("th",{scope:"row"},"제목",-1)),t("td",it,[m(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>a.title=n)},null,512),[[b,a.title]])])]),t("tr",null,[e[17]||(e[17]=t("th",{scope:"row"},"내용",-1)),t("td",ut,[m(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=n=>a.contents=n)},null,512),[[b,a.contents]])])])]),m(t("tbody",pt,[t("tr",null,[e[18]||(e[18]=t("th",{scope:"row"},"수정기간",-1)),t("td",mt,[I(X,{format:"yyyy-MM-dd",date:[a.startUpdateDt,a.endUpdateDt],onSetStartDate:e[4]||(e[4]=n=>{a.startUpdateDt=n.date}),onSetEndDate:e[5]||(e[5]=n=>{a.endUpdateDt=n.date})},null,8,["date"])])]),t("tr",null,[e[19]||(e[19]=t("th",{scope:"row"},"등록일",-1)),t("td",ct,[I(Y,{format:"yyyy-MM-dd",date:[a.createDt],onSetStartDate:e[6]||(e[6]=n=>{a.createDt=n.date})},null,8,["date"])])]),t("tr",null,[e[20]||(e[20]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=n=>a.updater=n)},null,512),[[b,a.updater]])]),e[21]||(e[21]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=n=>a.creator=n)},null,512),[[b,a.creator]])])])],512),[[V,o.audit]])])]),t("div",yt,[t("span",gt,[t("button",{type:"button",class:"button add",onClick:A},e[24]||(e[24]=[t("span",{class:"icon"},"",-1),P("추가")])),t("button",{type:"button",class:"button del",onClick:H},e[25]||(e[25]=[t("span",{class:"icon"},"",-1),P("삭제")])),t("button",{type:"button",class:"button save",onClick:T},e[26]||(e[26]=[t("span",{class:"icon"},"",-1),P("저장")])),t("button",{type:"button",class:"button reset",onClick:e[9]||(e[9]=n=>D(r).reload())},e[27]||(e[27]=[t("span",{class:"icon"},'"',-1),P("초기화")]))]),t("button",{type:"button",class:"audit",onClick:e[10]||(e[10]=n=>o.audit=!o.audit)},"상세조회"),e[30]||(e[30]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:e[11]||(e[11]=n=>D(r).reload())},e[28]||(e[28]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:e[12]||(e[12]=n=>D(Q).excelExport(o.grid,"게시판"))},e[29]||(e[29]=[t("span",{class:"icon"},"",-1)])),t("div",bt,"총 "+S(o.totalCount)+"건",1)])],32),e[31]||(e[31]=t("div",{id:"grid",class:"grid-container"},null,-1)),m(t("div",wt,"조회 내역이 없습니다.",512),[[V,o.list.length===0]]),I(W,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":$},null,8,["currentPage","lastPage"]),i.value?(g(),E(_,{key:0,component:lt,data:d.value,show:i.value,onClose:e[13]||(e[13]=n=>i.value=!1)},null,8,["data","show"])):z("",!0)],64))}});export{St as default};
