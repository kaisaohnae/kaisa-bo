import{d as V,r as P,x as k,o as S,e as $,f as t,G as D,w as p,v as g,l as I,p as N,c as A,K as x,J as f,h as v,L as H,A as O,B as K,F as R}from"../index.qpL_22Hi.js";import{g as i,H as F,P as G,e as T}from"./pagination.CLsXx-Sl.js";import{a as c}from"./api-config.DDt0lwuS.js";import{S as j,a as J}from"./select-group-date.oRe8eu4O.js";import{D as W}from"./detail.B9sbWCla.js";import{_ as z}from"./common-code.vue_vue_type_script_setup_true_lang.DqUFMfvb.js";import"./date-util.BcAk1-Us.js";class Q{async getBoard(d){return(await c("/pd/get-board",d||{})).data}async getBoardList(d){return(await c("/pd/get-board-list",d||{})).data}async setBoard(d){return(await c("/pd/set-board",d||{})).data}async setBoardList(d){return(await c("/pd/set-board-list",d||{})).data}}const U=new Q,X={class:"detail-content"},Y={class:"detail-scroll"},Z={class:"detail-table"},h=V({__name:"board-detail",props:{data:{type:Object,required:!0}},setup(r){const d=r,y=P({editor:{},editorOption:{}}),w=()=>{y.editor=i.createEditor({name:"#BoardEditor",cnts:d.data})},s=()=>{d.data.boardNo?U.getBoard({boardNo:d.data.boardNo}).then(o=>{d.data.boardNo=o.data.boardNo,d.data.boardCategoryId=o.data.boardCategoryId,d.data.companyId=o.data.companyId,d.data.title=o.data.title,d.data.content=o.data.content,d.data.isDisplay=o.data.isDisplay,d.data.tag=o.data.tag,d.data.creator=o.data.creator,d.data.createDt=o.data.createDt,d.data.updater=o.data.updater,d.data.updateDt=o.data.updateDt,w()},o=>{console.log(o)}):w()};return k(()=>{s()}),(o,e)=>(S(),$("div",X,[e[18]||(e[18]=t("h2",null,"게시판 상세",-1)),t("div",Y,[t("table",Z,[e[17]||(e[17]=t("caption",null,"게시판 상세",-1)),t("tbody",null,[t("tr",null,[e[5]||(e[5]=t("th",{scope:"col"},"게시판번호",-1)),t("td",null,D(r.data.boardNo),1)]),t("tr",null,[e[6]||(e[6]=t("th",{scope:"col"},"게시판카테고리아이디",-1)),t("td",null,[p(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=u=>r.data.boardCategoryId=u)},null,512),[[g,r.data.boardCategoryId]])])]),t("tr",null,[e[7]||(e[7]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=u=>r.data.companyId=u)},null,512),[[g,r.data.companyId]])])]),t("tr",null,[e[8]||(e[8]=t("th",{scope:"col"},"제목",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>r.data.title=u)},null,512),[[g,r.data.title]])])]),e[15]||(e[15]=t("tr",null,[t("th",{scope:"col",colspan:"2"},"내용")],-1)),e[16]||(e[16]=t("tr",null,[t("td",{colspan:"2"},[t("div",{id:"BoardEditor"})])],-1)),t("tr",null,[e[9]||(e[9]=t("th",{scope:"col"},"전시여부",-1)),t("td",null,[I(z,{cd:"isDisplay",model:r.data.isDisplay,onSetData:e[3]||(e[3]=u=>{r.data.isDisplay=u})},null,8,["model"])])]),t("tr",null,[e[10]||(e[10]=t("th",{scope:"col"},"태그",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=u=>r.data.tag=u),required:""},null,512),[[g,r.data.tag]])])]),t("tr",null,[e[11]||(e[11]=t("th",{scope:"col"},"등록자",-1)),t("td",null,D(r.data.creator),1)]),t("tr",null,[e[12]||(e[12]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,D(r.data.createDt),1)]),t("tr",null,[e[13]||(e[13]=t("th",{scope:"col"},"수정자",-1)),t("td",null,D(r.data.updater),1)]),t("tr",null,[e[14]||(e[14]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,D(r.data.updateDt),1)])])])]),e[19]||(e[19]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),_={colspan:"3"},tt={colspan:"3"},at={colspan:"3"},ot={class:"audit"},et={colspan:"3"},lt={colspan:"3"},dt={class:"btnWrap"},nt={class:"crud"},st={class:"totalCount"},rt={class:"no-list"},Dt=V({__name:"board",setup(r){const d=N(null),y=N(!1),w=A(),s=P({boardCategoryId:"",companyId:"",title:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),o=P({required:["boardCategoryId","companyId","title","isDisplay"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),e={unique:["boardNo"],required:["boardCategoryId","companyId","title","isDisplay"]};let u=null;const B=n=>{n==null||n.preventDefault(),C()},C=()=>{U.getBoardList({...s,page:o.currentPage,totalPage:o.totalPage}).then(n=>{var a,l,m,b;o.list=(a=n.data)==null?void 0:a.list,o.totalCount=(l=n.data)==null?void 0:l.totalCount,o.currentPage=(m=n.data)==null?void 0:m.currentPage,o.lastPage=(b=n.data)==null?void 0:b.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},n=>{console.log(n)})},q=n=>{o.currentPage=n,C()},E=()=>{const n={...i.commonAddColumns,boardNo:"",boardCategoryId:"",companyId:"",title:"",isDisplay:"",tag:"",...i.auditAddColumns};o.list=i.add({newRow:n,list:o.list,grid:o.grid})},L=()=>{i.del({selectedRow:u,grid:o.grid})},M=()=>{const n=i.valid({list:o.list,required:e.required});n&&U.setBoardList(n).then(()=>{C()})};return k(()=>{const n=document.querySelector("#grid");o.grid=new F(n,{data:o.list,colHeaders:[...i.commonColumnNames,"게시판번호","게시판카테고리아이디","업체아이디","제목","전시여부","태그",...i.auditColumnNames],hiddenColumns:i.hiddenColumns([]),columns:[...i.commonColumns,{data:"boardNo",type:"numeric",width:150,readOnly:!0},{data:"boardCategoryId",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"title",type:"text",width:150,className:"underline"},{data:"isDisplay",type:"dropdown",width:150,source:function(a,l){var m;l((m=w.codeList.isDisplay)==null?void 0:m.map(b=>b.codeValue))}},{data:"tag",type:"text",width:150},...i.auditColumns],cells:function(a,l){return i.cellsEvent({row:a,col:l,grid:o.grid,self:this,pk:[]})},afterChange(a,l){i.afterChangeEvent({changes:a,source:l,gridProps:e,grid:o.grid,self:this})},afterSelectionEnd:function(a,l,m,b){u=a},afterOnCellMouseDown:(a,l)=>{const m=o.grid.getColHeader(l.col),b=o.grid.getSourceDataAtRow(l.row);m==="제목"&&b&&(d.value=b,y.value=!0)},...i.defaultProps}),C()}),(n,a)=>(S(),$(R,null,[t("form",{class:"search",onSubmit:B,onKeyup:H(B,["enter"])},[t("fieldset",null,[a[21]||(a[21]=t("legend",null,"검색",-1)),t("table",null,[a[20]||(a[20]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[a[13]||(a[13]=t("th",{scope:"row"},"게시판카테고리아이디",-1)),t("td",_,[p(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=l=>s.boardCategoryId=l)},null,512),[[g,s.boardCategoryId]])])]),p(t("tr",null,[a[14]||(a[14]=t("th",{scope:"row"},"업체아이디",-1)),t("td",tt,[p(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=l=>s.companyId=l)},null,512),[[g,s.companyId]])])],512),[[x,f(w).userInfo.companyId==="kaisa"]]),t("tr",null,[a[15]||(a[15]=t("th",{scope:"row"},"제목",-1)),t("td",at,[p(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=l=>s.title=l)},null,512),[[g,s.title]])])])]),p(t("tbody",ot,[t("tr",null,[a[16]||(a[16]=t("th",{scope:"row"},"수정기간",-1)),t("td",et,[I(j,{format:"yyyy-MM-dd",date:[s.startUpdateDt,s.endUpdateDt],onSetStartDate:a[3]||(a[3]=l=>{s.startUpdateDt=l.date}),onSetEndDate:a[4]||(a[4]=l=>{s.endUpdateDt=l.date})},null,8,["date"])])]),t("tr",null,[a[17]||(a[17]=t("th",{scope:"row"},"등록일",-1)),t("td",lt,[I(J,{format:"yyyy-MM-dd",date:[s.createDt],onSetStartDate:a[5]||(a[5]=l=>{s.createDt=l.date})},null,8,["date"])])]),t("tr",null,[a[18]||(a[18]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=l=>s.updater=l)},null,512),[[g,s.updater]])]),a[19]||(a[19]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=l=>s.creator=l)},null,512),[[g,s.creator]])])])],512),[[x,o.audit]])])]),t("div",dt,[t("span",nt,[t("button",{type:"button",class:"button add",onClick:E},a[22]||(a[22]=[t("span",{class:"icon"},"",-1),v("추가")])),t("button",{type:"button",class:"button del",onClick:L},a[23]||(a[23]=[t("span",{class:"icon"},"",-1),v("삭제")])),t("button",{type:"button",class:"button save",onClick:M},a[24]||(a[24]=[t("span",{class:"icon"},"",-1),v("저장")])),t("button",{type:"button",class:"button reset",onClick:a[8]||(a[8]=l=>f(i).reload())},a[25]||(a[25]=[t("span",{class:"icon"},'"',-1),v("초기화")]))]),t("button",{type:"button",class:"audit",onClick:a[9]||(a[9]=l=>o.audit=!o.audit)},"상세조회"),a[28]||(a[28]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:a[10]||(a[10]=l=>f(i).reload())},a[26]||(a[26]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:a[11]||(a[11]=l=>f(T).excelExport(o.grid,"게시판"))},a[27]||(a[27]=[t("span",{class:"icon"},"",-1)])),t("div",st,"총 "+D(o.totalCount)+"건",1)])],32),a[29]||(a[29]=t("div",{id:"grid",class:"grid-container"},null,-1)),p(t("div",rt,"조회 내역이 없습니다.",512),[[x,o.list.length===0]]),I(G,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":q},null,8,["currentPage","lastPage"]),y.value?(S(),O(W,{key:0,component:h,data:d.value,show:y.value,onClose:a[12]||(a[12]=l=>y.value=!1)},null,8,["data","show"])):K("",!0)],64))}});export{Dt as default};
