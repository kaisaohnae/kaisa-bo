import{d as k,r as f,x as L,o as N,e as q,f as e,w as d,v as g,K as v,l as m,h as i,J as c,G as E,L as M,F as $}from"../index.CzUxyGvb.js";import{H as O,g as a,P as B,e as H}from"./Pagination.Dpy469UB.js";import{a as D}from"./apiConfig.bTbae8LA.js";import{S as K,a as A}from"./SelectGroupDate.jAfVqy5q.js";import"./dateUtil.BFlyYs-n.js";class F{async getCodeList(l){return(await D("/cr/getCodeList",l||{})).data}async setCodeList(l){return(await D("/cr/setCodeList",l||{})).data}}const x=new F,G={colspan:"3"},I={class:"audit"},R={colspan:"3"},T={colspan:"3"},J={class:"btnWrap"},W={class:"crud"},j={class:"totalCount"},z={class:"no-list"},_=k({__name:"Code",setup(P){const l=f({code:"",updater:"",creator:"",startUpdateDt:null,endUpdateDt:null,createDt:null}),o=f({required:["code","codeValue"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,lastPage:1}),y={unique:["code","codeValue"],required:["code","codeValue"]};let C=null;const b=s=>{s==null||s.preventDefault(),r()},r=()=>{event==null||event.preventDefault(),o.totalCount=0,x.getCodeList({...l,page:o.currentPage}).then(s=>{var t,n,u,p;o.list=(t=s.data)==null?void 0:t.list,o.totalCount=(n=s.data)==null?void 0:n.totalCount,o.currentPage=(u=s.data)==null?void 0:u.currentPage,o.lastPage=(p=s.data)==null?void 0:p.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},s=>{console.log(s)})},w=s=>{o.currentPage=s,r()},S=()=>{const s={...a.commonAddColumns,code:"",codeValue:"",codeName:"",memo:"",sortOrder:0,...a.auditAddColumns};o.list=a.add({newRow:s,list:o.list,grid:o.grid})},U=()=>{a.del({selectedRow:C,grid:o.grid})},V=()=>{const s=a.valid({list:o.list,required:y.required});s&&x.setCodeList(s).then(()=>{r()})};return L(()=>{const s=document.querySelector("#code");o.grid=new O(s,{data:o.list,colHeaders:[...a.commonColumnNames,"코드","코드값","코드명","설명","정렬순서",...a.auditColumnNames],hiddenColumns:a.hiddenColumns([]),columns:[...a.commonColumns,{data:"code",type:"text",readOnly:!0},{data:"codeValue",type:"text",readOnly:!0},{data:"codeName",type:"text"},{data:"memo",type:"text",width:200},{data:"sortOrder",type:"text",width:150},...a.auditColumns],cells:function(t,n){return a.cellsEvent({row:t,col:n,grid:o.grid,self:this,pk:[1,2]})},afterChange(t,n){a.afterChangeEvent({changes:t,source:n,gridProps:y,grid:o.grid,self:this})},afterSelectionEnd:function(t,n,u,p){C=t},...a.defaultProps}),r()}),(s,t)=>(N(),q($,null,[e("form",{class:"search",onSubmit:b,onKeyup:M(b,["enter"])},[e("fieldset",null,[t[16]||(t[16]=e("legend",null,"검색",-1)),e("table",null,[t[15]||(t[15]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[e("tr",null,[t[10]||(t[10]=e("th",null,"코드",-1)),e("td",G,[d(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>l.code=n)},null,512),[[g,l.code]])])])]),d(e("tbody",I,[e("tr",null,[t[11]||(t[11]=e("th",null,"수정기간",-1)),e("td",R,[m(K,{format:"yyyy-MM-dd",date:[l.startUpdateDt,l.endUpdateDt],onSetStartDate:t[1]||(t[1]=n=>{l.startUpdateDt=n.date}),onSetEndDate:t[2]||(t[2]=n=>{l.endUpdateDt=n.date})},null,8,["date"])])]),e("tr",null,[t[12]||(t[12]=e("th",null,"등록일",-1)),e("td",T,[m(A,{format:"yyyy-MM-dd",date:[l.createDt],onSetStartDate:t[3]||(t[3]=n=>{l.createDt=n.date})},null,8,["date"])])]),e("tr",null,[t[13]||(t[13]=e("th",null,"수정ID",-1)),e("td",null,[d(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=n=>l.updater=n)},null,512),[[g,l.updater]])]),t[14]||(t[14]=e("th",null,"등록ID",-1)),e("td",null,[d(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>l.creator=n)},null,512),[[g,l.creator]])])])],512),[[v,o.audit]])])]),e("div",J,[e("span",W,[e("button",{type:"button",class:"button add",onClick:S},t[17]||(t[17]=[e("span",{class:"icon"},"",-1),i("추가")])),e("button",{type:"button",class:"button del",onClick:U},t[18]||(t[18]=[e("span",{class:"icon"},"",-1),i("삭제")])),e("button",{type:"button",class:"button save",onClick:V},t[19]||(t[19]=[e("span",{class:"icon"},"",-1),i("저장")])),e("button",{type:"button",class:"button reset",onClick:t[6]||(t[6]=n=>c(a).reload())},t[20]||(t[20]=[e("span",{class:"icon"},'"',-1),i("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[7]||(t[7]=n=>o.audit=!o.audit)},"상세조회"),t[23]||(t[23]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[8]||(t[8]=n=>c(a).reload())},t[21]||(t[21]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[9]||(t[9]=n=>c(H).excelExport(o.grid,"사전"))},t[22]||(t[22]=[e("span",{class:"icon"},"",-1)])),e("div",j,"총 "+E(o.totalCount)+"건",1)])],32),t[24]||(t[24]=e("div",{id:"code",class:"grid-container"},null,-1)),d(e("div",z,"조회 내역이 없습니다.",512),[[v,!o.list||o.list.length===0]]),m(B,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":w},null,8,["currentPage","lastPage"])],64))}});export{_ as default};
