import{d as B,c as I,r as x,x as L,o as H,e as V,f as e,w as r,K as P,J as u,v as p,l as w,h as c,G as q,L as E,F as M}from"../index.CoZ4l3zG.js";import{H as $,g as d,P as Q,e as h}from"./Pagination.CXaUJzND.js";import{a as m}from"./apiConfig.-DPTjU66.js";import{S as A,a as K}from"./SelectGroupDate.BOqEm1rv.js";import"./dateUtil.BrcqyQTP.js";class F{async getProduct(i){return(await m("/pd/getProduct",i||{})).data}async getProductList(i){return(await m("/pd/getProductList",i||{})).data}async setProduct(i){return(await m("/pd/setProduct",i||{})).data}async setProductList(i){return(await m("/pd/setProductList",i||{})).data}}const D=new F,G={colspan:"3"},O={colspan:"3"},R={class:"audit"},T={colspan:"3"},J={colspan:"3"},W={class:"btnWrap"},j={class:"crud"},z={class:"totalCount"},X={class:"no-list"},ot=B({__name:"Product",setup(N){const i=I(),a=x({companyId:"",productName:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),o=x({required:["companyId","seasonPriceNo","productName","headCount","maxHeadCount","m2","isDisplay","isPet","isBBQ","isPickup","isStone","fileNo"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),C={unique:["productNo"],required:["companyId","seasonPriceNo","productName","headCount","maxHeadCount","m2","isDisplay","isPet","isBBQ","isPickup","isStone","fileNo"]};let f=null;const b=n=>{n==null||n.preventDefault(),l()},l=()=>{D.getProductList({...a,page:o.currentPage,totalPage:o.totalPage}).then(n=>{var t,s,y,g;o.list=(t=n.data)==null?void 0:t.list,o.totalCount=(s=n.data)==null?void 0:s.totalCount,o.currentPage=(y=n.data)==null?void 0:y.currentPage,o.lastPage=(g=n.data)==null?void 0:g.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},n=>{console.log(n)})},S=n=>{o.currentPage=n,l()},v=()=>{const n={...d.commonAddColumns,productNo:"",companyId:"",seasonPriceNo:"",productName:"",headCount:"",maxHeadCount:"",m2:"",isDisplay:"",isPet:"",isBBQ:"",isPickup:"",isStone:"",memo:"",content:"",fileNo:"",...d.auditAddColumns};o.list=d.add({newRow:n,list:o.list,grid:o.grid})},k=()=>{d.del({selectedRow:f,grid:o.grid})},U=()=>{const n=d.valid({list:o.list,required:C.required});n&&D.setProductList(n).then(()=>{l()})};return L(()=>{const n=document.querySelector("#grid");o.grid=new $(n,{data:o.list,colHeaders:[...d.commonColumnNames,"상품번호","업체아이디","시즌가격번호","상품명","인원수","최대인원수","평형","전시여부","애완동물여부","바베큐여부","픽업여부","온돌여부","메모","내용","파일번호",...d.auditColumnNames],hiddenColumns:d.hiddenColumns([]),columns:[...d.commonColumns,{data:"productNo",type:"numeric",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"seasonPriceNo",type:"numeric",width:150},{data:"productName",type:"text",width:150},{data:"headCount",type:"numeric",width:150},{data:"maxHeadCount",type:"numeric",width:150},{data:"m2",type:"numeric",width:150},{data:"isDisplay",type:"numeric",width:150},{data:"isPet",type:"numeric",width:150},{data:"isBBQ",type:"numeric",width:150},{data:"isPickup",type:"numeric",width:150},{data:"isStone",type:"numeric",width:150},{data:"memo",type:"text",width:150},{data:"content",type:"text",width:150},{data:"fileNo",type:"numeric",width:150},...d.auditColumns],cells:function(t,s){return d.cellsEvent({row:t,col:s,grid:o.grid,self:this,pk:[]})},afterChange(t,s){d.afterChangeEvent({changes:t,source:s,gridProps:C,grid:o.grid,self:this})},afterSelectionEnd:function(t,s,y,g){f=t},...d.defaultProps}),l()}),(n,t)=>(H(),V(M,null,[e("form",{class:"search",onSubmit:b,onKeyup:E(b,["enter"])},[e("fieldset",null,[t[18]||(t[18]=e("legend",null,"검색",-1)),e("table",null,[t[17]||(t[17]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[r(e("tr",null,[t[11]||(t[11]=e("th",{scope:"row"},"업체아이디",-1)),e("td",G,[r(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>a.companyId=s)},null,512),[[p,a.companyId]])])],512),[[P,u(i).userInfo.companyId==="kaisa"]]),e("tr",null,[t[12]||(t[12]=e("th",{scope:"row"},"상품명",-1)),e("td",O,[r(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>a.productName=s)},null,512),[[p,a.productName]])])])]),r(e("tbody",R,[e("tr",null,[t[13]||(t[13]=e("th",{scope:"row"},"수정기간",-1)),e("td",T,[w(A,{format:"yyyy-MM-dd",date:[a.startUpdateDt,a.endUpdateDt],onSetStartDate:t[2]||(t[2]=s=>{a.startUpdateDt=s.date}),onSetEndDate:t[3]||(t[3]=s=>{a.endUpdateDt=s.date})},null,8,["date"])])]),e("tr",null,[t[14]||(t[14]=e("th",{scope:"row"},"등록일",-1)),e("td",J,[w(K,{format:"yyyy-MM-dd",date:[a.createDt],onSetStartDate:t[4]||(t[4]=s=>{a.createDt=s.date})},null,8,["date"])])]),e("tr",null,[t[15]||(t[15]=e("th",{scope:"row"},"수정ID",-1)),e("td",null,[r(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>a.updater=s)},null,512),[[p,a.updater]])]),t[16]||(t[16]=e("th",{scope:"row"},"등록ID",-1)),e("td",null,[r(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>a.creator=s)},null,512),[[p,a.creator]])])])],512),[[P,o.audit]])])]),e("div",W,[e("span",j,[e("button",{type:"button",class:"button add",onClick:v},t[19]||(t[19]=[e("span",{class:"icon"},"",-1),c("추가")])),e("button",{type:"button",class:"button del",onClick:k},t[20]||(t[20]=[e("span",{class:"icon"},"",-1),c("삭제")])),e("button",{type:"button",class:"button save",onClick:U},t[21]||(t[21]=[e("span",{class:"icon"},"",-1),c("저장")])),e("button",{type:"button",class:"button reset",onClick:t[7]||(t[7]=s=>u(d).reload())},t[22]||(t[22]=[e("span",{class:"icon"},'"',-1),c("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[8]||(t[8]=s=>o.audit=!o.audit)},"상세조회"),t[25]||(t[25]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[9]||(t[9]=s=>u(d).reload())},t[23]||(t[23]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[10]||(t[10]=s=>u(h).excelExport(o.grid,"상품"))},t[24]||(t[24]=[e("span",{class:"icon"},"",-1)])),e("div",z,"총 "+q(o.totalCount)+"건",1)])],32),t[26]||(t[26]=e("div",{id:"grid",class:"grid-container"},null,-1)),r(e("div",X,"조회 내역이 없습니다.",512),[[P,o.list.length===0]]),w(Q,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":S},null,8,["currentPage","lastPage"])],64))}});export{ot as default};
