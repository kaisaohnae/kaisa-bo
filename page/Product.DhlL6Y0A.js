import{d as I,r as v,x as H,o as B,e as $,f as t,G as C,w as r,v as m,l as g,p as V,c as M,K as S,J as N,h as b,L as A,A as O,B as K,F as R}from"../index.sLHaa_0v.js";import{g as p,H as F,P as G,e as T}from"./Pagination.D7qwn8xd.js";import{a as x}from"./apiConfig.T8yPkaPh.js";import{S as j,a as J}from"./SelectGroupDate.BI-88_nn.js";import{_ as w,D as W}from"./CommonCode.vue_vue_type_script_setup_true_lang.Di45rzPq.js";import"./dateUtil.CLORM07S.js";class z{async getProduct(n){return(await x("/pd/getProduct",n||{})).data}async getProductList(n){return(await x("/pd/getProductList",n||{})).data}async setProduct(n){return(await x("/pd/setProduct",n||{})).data}async setProductList(n){return(await x("/pd/setProductList",n||{})).data}}const U=new z,X={class:"detail-content"},Y={class:"detail-scroll"},Z={class:"detail-table"},h=I({__name:"ProductDetail",props:{data:{type:Object,required:!0}},setup(d){const n=d,y=v({editor:{},editorOption:{}}),c=()=>{y.editor=p.createEditor({name:"#ProductEditor",cnts:n.data})},i=()=>{n.data.productNo?U.getProduct({productNo:n.data.productNo}).then(o=>{n.data.productNo=o.data.productNo,n.data.companyId=o.data.companyId,n.data.seasonPriceNo=o.data.seasonPriceNo,n.data.productName=o.data.productName,n.data.headCount=o.data.headCount,n.data.maxHeadCount=o.data.maxHeadCount,n.data.m2=o.data.m2,n.data.isDisplay=o.data.isDisplay,n.data.isPet=o.data.isPet,n.data.isBBQ=o.data.isBBQ,n.data.isPickup=o.data.isPickup,n.data.isStone=o.data.isStone,n.data.memo=o.data.memo,n.data.content=o.data.content,n.data.fileNo=o.data.fileNo,n.data.creator=o.data.creator,n.data.createDt=o.data.createDt,n.data.updater=o.data.updater,n.data.updateDt=o.data.updateDt,c()},o=>{console.log(o)}):c()};return H(()=>{i()}),(o,a)=>(B(),$("div",X,[a[35]||(a[35]=t("h2",null,"상품 상세",-1)),t("div",Y,[t("table",Z,[a[34]||(a[34]=t("caption",null,"상품 상세",-1)),t("tbody",null,[t("tr",null,[a[15]||(a[15]=t("th",{scope:"col"},"상품번호",-1)),t("td",null,C(d.data.productNo),1)]),t("tr",null,[a[16]||(a[16]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,[r(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=l=>d.data.companyId=l)},null,512),[[m,d.data.companyId]])])]),t("tr",null,[a[17]||(a[17]=t("th",{scope:"col"},"시즌가격번호",-1)),t("td",null,[r(t("input",{type:"number","onUpdate:modelValue":a[1]||(a[1]=l=>d.data.seasonPriceNo=l)},null,512),[[m,d.data.seasonPriceNo]])])]),t("tr",null,[a[18]||(a[18]=t("th",{scope:"col"},"상품명",-1)),t("td",null,[r(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=l=>d.data.productName=l)},null,512),[[m,d.data.productName]])])]),t("tr",null,[a[19]||(a[19]=t("th",{scope:"col"},"인원수",-1)),t("td",null,[r(t("input",{type:"number","onUpdate:modelValue":a[3]||(a[3]=l=>d.data.headCount=l)},null,512),[[m,d.data.headCount]])])]),t("tr",null,[a[20]||(a[20]=t("th",{scope:"col"},"최대인원수",-1)),t("td",null,[r(t("input",{type:"number","onUpdate:modelValue":a[4]||(a[4]=l=>d.data.maxHeadCount=l)},null,512),[[m,d.data.maxHeadCount]])])]),t("tr",null,[a[21]||(a[21]=t("th",{scope:"col"},"평형",-1)),t("td",null,[r(t("input",{type:"number","onUpdate:modelValue":a[5]||(a[5]=l=>d.data.m2=l)},null,512),[[m,d.data.m2]])])]),t("tr",null,[a[22]||(a[22]=t("th",{scope:"col"},"전시여부",-1)),t("td",null,[g(w,{cd:"isDisplay",model:d.data.isDisplay,onSetData:a[6]||(a[6]=l=>{d.data.isDisplay=l})},null,8,["model"])])]),t("tr",null,[a[23]||(a[23]=t("th",{scope:"col"},"애완동물여부",-1)),t("td",null,[g(w,{cd:"isPet",model:d.data.isPet,onSetData:a[7]||(a[7]=l=>{d.data.isPet=l})},null,8,["model"])])]),t("tr",null,[a[24]||(a[24]=t("th",{scope:"col"},"바베큐여부",-1)),t("td",null,[g(w,{cd:"isBBQ",model:d.data.isBBQ,onSetData:a[8]||(a[8]=l=>{d.data.isBBQ=l})},null,8,["model"])])]),t("tr",null,[a[25]||(a[25]=t("th",{scope:"col"},"픽업여부",-1)),t("td",null,[g(w,{cd:"isPickup",model:d.data.isPickup,onSetData:a[9]||(a[9]=l=>{d.data.isPickup=l})},null,8,["model"])])]),t("tr",null,[a[26]||(a[26]=t("th",{scope:"col"},"온돌여부",-1)),t("td",null,[g(w,{cd:"isStone",model:d.data.isStone,onSetData:a[10]||(a[10]=l=>{d.data.isStone=l})},null,8,["model"])])]),t("tr",null,[a[27]||(a[27]=t("th",{scope:"col"},"메모",-1)),t("td",null,[r(t("input",{type:"text","onUpdate:modelValue":a[11]||(a[11]=l=>d.data.memo=l),required:""},null,512),[[m,d.data.memo]])])]),t("tr",null,[a[28]||(a[28]=t("th",{scope:"col"},"내용",-1)),t("td",null,[r(t("input",{type:"text","onUpdate:modelValue":a[12]||(a[12]=l=>d.data.content=l),required:""},null,512),[[m,d.data.content]])])]),t("tr",null,[a[29]||(a[29]=t("th",{scope:"col"},"파일번호",-1)),t("td",null,[r(t("input",{type:"number","onUpdate:modelValue":a[13]||(a[13]=l=>d.data.fileNo=l)},null,512),[[m,d.data.fileNo]])])]),t("tr",null,[a[30]||(a[30]=t("th",{scope:"col"},"등록자",-1)),t("td",null,C(d.data.creator),1)]),t("tr",null,[a[31]||(a[31]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,C(d.data.createDt),1)]),t("tr",null,[a[32]||(a[32]=t("th",{scope:"col"},"수정자",-1)),t("td",null,C(d.data.updater),1)]),t("tr",null,[a[33]||(a[33]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,[r(t("input",{type:"datetime","onUpdate:modelValue":a[14]||(a[14]=l=>d.data.updateDt=l)},null,512),[[m,d.data.updateDt]])])])])])]),a[36]||(a[36]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),_={colspan:"3"},tt={colspan:"3"},at={class:"audit"},et={colspan:"3"},ot={colspan:"3"},dt={class:"btnWrap"},nt={class:"crud"},lt={class:"totalCount"},ut={class:"no-list"},gt=I({__name:"Product",setup(d){const n=V(null),y=V(!1),c=M(),i=v({companyId:"",productName:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),o=v({required:["companyId","seasonPriceNo","productName","headCount","maxHeadCount","m2","isDisplay","isPet","isBBQ","isPickup","isStone","fileNo"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),a={unique:["productNo"],required:["companyId","seasonPriceNo","productName","headCount","maxHeadCount","m2","isDisplay","isPet","isBBQ","isPickup","isStone","fileNo"]};let l=null;const k=s=>{s==null||s.preventDefault(),f()},f=()=>{U.getProductList({...i,page:o.currentPage,totalPage:o.totalPage}).then(s=>{var e,u,D,P;o.list=(e=s.data)==null?void 0:e.list,o.totalCount=(u=s.data)==null?void 0:u.totalCount,o.currentPage=(D=s.data)==null?void 0:D.currentPage,o.lastPage=(P=s.data)==null?void 0:P.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},s=>{console.log(s)})},L=s=>{o.currentPage=s,f()},q=()=>{const s={...p.commonAddColumns,productNo:"",companyId:"",seasonPriceNo:"",productName:"",headCount:"",maxHeadCount:"",m2:"",isDisplay:"",isPet:"",isBBQ:"",isPickup:"",isStone:"",memo:"",content:"",fileNo:"",...p.auditAddColumns};o.list=p.add({newRow:s,list:o.list,grid:o.grid})},Q=()=>{p.del({selectedRow:l,grid:o.grid})},E=()=>{const s=p.valid({list:o.list,required:a.required});s&&U.setProductList(s).then(()=>{f()})};return H(()=>{const s=document.querySelector("#grid");o.grid=new F(s,{data:o.list,colHeaders:[...p.commonColumnNames,"상품번호","업체아이디","시즌가격번호","상품명","인원수","최대인원수","평형","전시여부","애완동물여부","바베큐여부","픽업여부","온돌여부","메모","내용","파일번호",...p.auditColumnNames],hiddenColumns:p.hiddenColumns([]),columns:[...p.commonColumns,{data:"productNo",type:"numeric",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"seasonPriceNo",type:"numeric",width:150},{data:"productName",type:"text",width:150,className:"underline"},{data:"headCount",type:"numeric",width:150},{data:"maxHeadCount",type:"numeric",width:150},{data:"m2",type:"numeric",width:150},{data:"isDisplay",type:"numeric",width:150},{data:"isPet",type:"numeric",width:150},{data:"isBBQ",type:"numeric",width:150},{data:"isPickup",type:"numeric",width:150},{data:"isStone",type:"numeric",width:150},{data:"memo",type:"text",width:150},{data:"content",type:"text",width:150},{data:"fileNo",type:"numeric",width:150},...p.auditColumns],cells:function(e,u){return p.cellsEvent({row:e,col:u,grid:o.grid,self:this,pk:[]})},afterChange(e,u){p.afterChangeEvent({changes:e,source:u,gridProps:a,grid:o.grid,self:this})},afterSelectionEnd:function(e,u,D,P){l=e},afterOnCellMouseDown:(e,u)=>{const D=o.grid.getColHeader(u.col),P=o.grid.getSourceDataAtRow(u.row);D==="상품명"&&P&&(n.value=P,y.value=!0)},...p.defaultProps}),f()}),(s,e)=>(B(),$(R,null,[t("form",{class:"search",onSubmit:k,onKeyup:A(k,["enter"])},[t("fieldset",null,[e[19]||(e[19]=t("legend",null,"검색",-1)),t("table",null,[e[18]||(e[18]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[r(t("tr",null,[e[12]||(e[12]=t("th",{scope:"row"},"업체아이디",-1)),t("td",_,[r(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=u=>i.companyId=u)},null,512),[[m,i.companyId]])])],512),[[S,N(c).userInfo.companyId==="kaisa"]]),t("tr",null,[e[13]||(e[13]=t("th",{scope:"row"},"상품명",-1)),t("td",tt,[r(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=u=>i.productName=u)},null,512),[[m,i.productName]])])])]),r(t("tbody",at,[t("tr",null,[e[14]||(e[14]=t("th",{scope:"row"},"수정기간",-1)),t("td",et,[g(j,{format:"yyyy-MM-dd",date:[i.startUpdateDt,i.endUpdateDt],onSetStartDate:e[2]||(e[2]=u=>{i.startUpdateDt=u.date}),onSetEndDate:e[3]||(e[3]=u=>{i.endUpdateDt=u.date})},null,8,["date"])])]),t("tr",null,[e[15]||(e[15]=t("th",{scope:"row"},"등록일",-1)),t("td",ot,[g(J,{format:"yyyy-MM-dd",date:[i.createDt],onSetStartDate:e[4]||(e[4]=u=>{i.createDt=u.date})},null,8,["date"])])]),t("tr",null,[e[16]||(e[16]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[r(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=u=>i.updater=u)},null,512),[[m,i.updater]])]),e[17]||(e[17]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[r(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=u=>i.creator=u)},null,512),[[m,i.creator]])])])],512),[[S,o.audit]])])]),t("div",dt,[t("span",nt,[t("button",{type:"button",class:"button add",onClick:q},e[20]||(e[20]=[t("span",{class:"icon"},"",-1),b("추가")])),t("button",{type:"button",class:"button del",onClick:Q},e[21]||(e[21]=[t("span",{class:"icon"},"",-1),b("삭제")])),t("button",{type:"button",class:"button save",onClick:E},e[22]||(e[22]=[t("span",{class:"icon"},"",-1),b("저장")])),t("button",{type:"button",class:"button reset",onClick:e[7]||(e[7]=u=>N(p).reload())},e[23]||(e[23]=[t("span",{class:"icon"},'"',-1),b("초기화")]))]),t("button",{type:"button",class:"audit",onClick:e[8]||(e[8]=u=>o.audit=!o.audit)},"상세조회"),e[26]||(e[26]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:e[9]||(e[9]=u=>N(p).reload())},e[24]||(e[24]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:e[10]||(e[10]=u=>N(T).excelExport(o.grid,"상품"))},e[25]||(e[25]=[t("span",{class:"icon"},"",-1)])),t("div",lt,"총 "+C(o.totalCount)+"건",1)])],32),e[27]||(e[27]=t("div",{id:"grid",class:"grid-container"},null,-1)),r(t("div",ut,"조회 내역이 없습니다.",512),[[S,o.list.length===0]]),g(G,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":L},null,8,["currentPage","lastPage"]),y.value?(B(),O(W,{key:0,component:h,data:n.value,show:y.value,onClose:e[11]||(e[11]=u=>y.value=!1)},null,8,["data","show"])):K("",!0)],64))}});export{gt as default};
