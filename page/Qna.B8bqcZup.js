import{d as k,c as L,r as C,x as V,o as q,e as Q,f as e,w as d,v as i,K as x,l as g,h as u,J as y,G as E,L as M,F as $}from"../index.D1VbM3C_.js";import{H as A,g as a,P as B,e as H}from"./Pagination.CwC5FYHD.js";import{a as N}from"./apiConfig.BM_b3DjX.js";import{S as K,a as F}from"./SelectGroupDate.CRAe91qa.js";import"./dateUtil.-4ZUTLvU.js";class G{async getQnaList(o){return(await N("/cs/getQnaList",o||{})).data}async setQnaList(o){return(await N("/cs/setQnaList",o||{})).data}}const P=new G,I={colspan:"3"},R={colspan:"3"},T={colspan:"3"},J={colspan:"3"},O={colspan:"3"},W={class:"audit"},j={colspan:"3"},z={colspan:"3"},X={class:"btnWrap"},Y={class:"crud"},Z={class:"totalCount"},h={class:"no-list"},ot=k({__name:"Qna",setup(D){L();const o=C({memberName:"",phoneNo:"",email:"",title:"",content:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),l=C({required:["memberName","phoneNo","pwd","title","content"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),b={unique:["qnaNo"],required:["memberName","phoneNo","pwd","title","content"]};let f=null;const w=s=>{s==null||s.preventDefault(),r()},r=()=>{P.getQnaList({...o,page:l.currentPage,totalPage:l.totalPage}).then(s=>{var t,n,p,m;l.list=(t=s.data)==null?void 0:t.list,l.totalCount=(n=s.data)==null?void 0:n.totalCount,l.currentPage=(p=s.data)==null?void 0:p.currentPage,l.lastPage=(m=s.data)==null?void 0:m.lastPage,l.grid&&l.grid.updateSettings({data:l.list})},s=>{console.log(s)})},v=s=>{l.currentPage=s,r()},S=()=>{const s={...a.commonAddColumns,qnaNo:"",memberName:"",phoneNo:"",email:"",pwd:"",title:"",content:"",...a.auditAddColumns};l.list=a.add({newRow:s,list:l.list,grid:l.grid})},U=()=>{a.del({selectedRow:f,grid:l.grid})},c=()=>{const s=a.valid({list:l.list,required:b.required});s&&P.setQnaList(s).then(()=>{r()})};return V(()=>{const s=document.querySelector("#grid");l.grid=new A(s,{data:l.list,colHeaders:[...a.commonColumnNames,"질문번호","회원명","전화번호","이메일","비밀번호","제목","내용",...a.auditColumnNames],hiddenColumns:a.hiddenColumns([]),columns:[...a.commonColumns,{data:"qnaNo",type:"numeric",width:150,readOnly:!0},{data:"memberName",type:"text",width:150},{data:"phoneNo",type:"text",width:150},{data:"email",type:"text",width:150},{data:"pwd",type:"text",width:150},{data:"title",type:"text",width:150},{data:"content",type:"text",width:150},...a.auditColumns],cells:function(t,n){return a.cellsEvent({row:t,col:n,grid:l.grid,self:this,pk:[]})},afterChange(t,n){a.afterChangeEvent({changes:t,source:n,gridProps:b,grid:l.grid,self:this})},afterSelectionEnd:function(t,n,p,m){f=t},...a.defaultProps}),r()}),(s,t)=>(q(),Q($,null,[e("form",{class:"search",onSubmit:w,onKeyup:M(w,["enter"])},[e("fieldset",null,[t[24]||(t[24]=e("legend",null,"검색",-1)),e("table",null,[t[23]||(t[23]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[e("tr",null,[t[14]||(t[14]=e("th",null,"회원명",-1)),e("td",I,[d(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>o.memberName=n)},null,512),[[i,o.memberName]])])]),e("tr",null,[t[15]||(t[15]=e("th",null,"전화번호",-1)),e("td",R,[d(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=n=>o.phoneNo=n)},null,512),[[i,o.phoneNo]])])]),e("tr",null,[t[16]||(t[16]=e("th",null,"이메일",-1)),e("td",T,[d(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>o.email=n)},null,512),[[i,o.email]])])]),e("tr",null,[t[17]||(t[17]=e("th",null,"제목",-1)),e("td",J,[d(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=n=>o.title=n)},null,512),[[i,o.title]])])]),e("tr",null,[t[18]||(t[18]=e("th",null,"내용",-1)),e("td",O,[d(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=n=>o.content=n)},null,512),[[i,o.content]])])])]),d(e("tbody",W,[e("tr",null,[t[19]||(t[19]=e("th",null,"수정기간",-1)),e("td",j,[g(K,{format:"yyyy-MM-dd",date:[o.startUpdateDt,o.endUpdateDt],onSetStartDate:t[5]||(t[5]=n=>{o.startUpdateDt=n.date}),onSetEndDate:t[6]||(t[6]=n=>{o.endUpdateDt=n.date})},null,8,["date"])])]),e("tr",null,[t[20]||(t[20]=e("th",null,"등록일",-1)),e("td",z,[g(F,{format:"yyyy-MM-dd",date:[o.createDt],onSetStartDate:t[7]||(t[7]=n=>{o.createDt=n.date})},null,8,["date"])])]),e("tr",null,[t[21]||(t[21]=e("th",null,"수정ID",-1)),e("td",null,[d(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=n=>o.updater=n)},null,512),[[i,o.updater]])]),t[22]||(t[22]=e("th",null,"등록ID",-1)),e("td",null,[d(e("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=n=>o.creator=n)},null,512),[[i,o.creator]])])])],512),[[x,l.audit]])])]),e("div",X,[e("span",Y,[e("button",{type:"button",class:"button add",onClick:S},t[25]||(t[25]=[e("span",{class:"icon"},"",-1),u("추가")])),e("button",{type:"button",class:"button del",onClick:U},t[26]||(t[26]=[e("span",{class:"icon"},"",-1),u("삭제")])),e("button",{type:"button",class:"button save",onClick:c},t[27]||(t[27]=[e("span",{class:"icon"},"",-1),u("저장")])),e("button",{type:"button",class:"button reset",onClick:t[10]||(t[10]=n=>y(a).reload())},t[28]||(t[28]=[e("span",{class:"icon"},'"',-1),u("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[11]||(t[11]=n=>l.audit=!l.audit)},"상세조회"),t[31]||(t[31]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[12]||(t[12]=n=>y(a).reload())},t[29]||(t[29]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[13]||(t[13]=n=>y(H).excelExport(l.grid,"문의"))},t[30]||(t[30]=[e("span",{class:"icon"},"",-1)])),e("div",Z,"총 "+E(l.totalCount)+"건",1)])],32),t[32]||(t[32]=e("div",{id:"grid",class:"grid-container"},null,-1)),d(e("div",h,"조회 내역이 없습니다.",512),[[x,l.list.length===0]]),g(B,{currentPage:l.currentPage,lastPage:l.lastPage,"onUpdate:page":v},null,8,["currentPage","lastPage"])],64))}});export{ot as default};
