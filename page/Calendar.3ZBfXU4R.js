import{d as p}from"./dateUtil.BrcqyQTP.js";import{M}from"./MainService.CKKmw_3t.js";import{d as C,r as D,x as S,o as c,e as i,f as t,G as l,F as h,D as f,t as Y,B as N,_ as k}from"../index.CoZ4l3zG.js";import"./apiConfig.-DPTjU66.js";const w={id:"calendar"},F={class:"calendar-controls"},x={class:"calendar-nav"},$={class:"calendar-grid"},B={class:"day-number"},b={key:0},I={class:"productName"},L={class:"price"},O={class:"orderStateCode"},V=C({__name:"Calendar",setup(z){const e=D({date:new Date,year:p.format(new Date,"YYYY"),month:p.format(new Date,"MM"),days:[]}),v=o=>{switch(o){case"결제완료":return"paid";case"예약중":return"pending";case"예약가능":return"available";default:return"default"}},u=o=>{o==="prev"?e.date.setMonth(e.date.getMonth()-1):e.date.setMonth(e.date.getMonth()+1),e.year=p.format(e.date,"YYYY"),e.month=p.format(e.date,"MM"),y()},g=()=>new Date(e.date.getFullYear(),e.date.getMonth(),1).getDay(),y=()=>{M.calendar({year:e.year,month:e.month}).then(o=>{const r=o.data,a=[],m=g(),n=new Date(e.date.getFullYear(),e.date.getMonth()+1,0).getDate();for(let s=0;s<m;s++)a.push({day:0,reservations:[]});for(let s=1;s<=n;s++){const _=r.find(d=>d.day===`${e.year}-${e.month}-${s.toString().padStart(2,"0")}`);a.push({day:s,reservations:_?_.reservations.map(d=>({price:d.price,productNo:d.productNo,productName:d.productName,orderStateCode:d.orderStateCode})):[]})}e.days=a},o=>{console.error(o)})};return S(()=>{y()}),(o,r)=>(c(),i("div",w,[t("div",F,[t("h2",null,[t("span",{class:"icon",onClick:r[0]||(r[0]=a=>u("prev"))},""),t("span",x,l(e.year)+" 년 "+l(e.month)+" 월 ",1),t("span",{class:"icon",onClick:r[1]||(r[1]=a=>u("next"))},"")])]),t("div",$,[(c(!0),i(h,null,f(e.days,(a,m)=>(c(),i("div",{class:"calendar-day",key:m},[t("div",B,l(a.day>0?a.day:""),1),a.reservations.length>0?(c(),i("div",b,[(c(!0),i(h,null,f(a.reservations,(n,s)=>(c(),i("div",{key:s,class:"product"},[t("p",{class:Y(v(n.orderStateCode))},[t("span",I,l(n.productName),1),t("span",L,l(n.price),1),t("span",O,l(n.orderStateCode),1)],2)]))),128))])):N("",!0)]))),128))])]))}}),j=k(V,[["__scopeId","data-v-b5a798d3"]]);export{j as default};
