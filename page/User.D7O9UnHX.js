import{d as L,r as v,x as $,o as N,e as q,f as t,G as D,w as i,v as p,l as w,p as k,c as B,K as S,J as U,h as f,L as H,A as O,B as R,F as T}from"../index.IIUTfFbs.js";import{H as K,g as r,P as F,e as G}from"./Pagination.uzpl-crK.js";import{a as b}from"./apiConfig.CHmv9PIS.js";import{S as j,a as J}from"./SelectGroupDate.dcLV5mwa.js";import{C as W}from"./CommonCodeRadio.DmvME3TA.js";import{D as z}from"./Detail.0MQsPRrp.js";import{_ as Q}from"./CommonCode.vue_vue_type_script_setup_true_lang.DhXLziXr.js";import"./dateUtil.DtrefKPG.js";class X{async getUser(l){return(await b("/at/getUser",l||{})).data}async getUserList(l){return(await b("/at/getUserList",l||{})).data}async setUser(l){return(await b("/at/setUser",l||{})).data}async setUserList(l){return(await b("/at/setUserList",l||{})).data}}const I=new X,Y={class:"detail-content"},Z={class:"detail-scroll"},h={class:"detail-table"},_=L({__name:"UserDetail",props:{data:{type:Object,required:!0}},setup(d){const l=d;v({editor:{},editorOption:{}});const m=()=>{l.data.companyId&&I.getUser({companyId:l.data.companyId}).then(u=>{l.data.userId=u.data.userId,l.data.companyId=u.data.companyId,l.data.userName=u.data.userName,l.data.phoneNo=u.data.phoneNo,l.data.passwordUpdateDt=u.data.passwordUpdateDt,l.data.memo=u.data.memo,l.data.loginDt=u.data.loginDt,l.data.userStateCode=u.data.userStateCode,l.data.creator=u.data.creator,l.data.createDt=u.data.createDt,l.data.updater=u.data.updater,l.data.updateDt=u.data.updateDt},u=>{console.log(u)})};return $(()=>{m()}),(u,o)=>(N(),q("div",Y,[o[19]||(o[19]=t("h2",null,"사용자 상세",-1)),t("div",Z,[t("table",h,[o[18]||(o[18]=t("caption",null,"사용자 상세",-1)),t("tbody",null,[t("tr",null,[o[6]||(o[6]=t("th",{scope:"col"},"사용자아이디",-1)),t("td",null,D(d.data.userId),1)]),t("tr",null,[o[7]||(o[7]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,D(d.data.companyId),1)]),t("tr",null,[o[8]||(o[8]=t("th",{scope:"col"},"사용자이름",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>d.data.userName=a)},null,512),[[p,d.data.userName]])])]),t("tr",null,[o[9]||(o[9]=t("th",{scope:"col"},"전화번호",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=a=>d.data.phoneNo=a)},null,512),[[p,d.data.phoneNo]])])]),t("tr",null,[o[10]||(o[10]=t("th",{scope:"col"},"비밀번호수정일시",-1)),t("td",null,[i(t("input",{type:"datetime","onUpdate:modelValue":o[2]||(o[2]=a=>d.data.passwordUpdateDt=a)},null,512),[[p,d.data.passwordUpdateDt]])])]),t("tr",null,[o[11]||(o[11]=t("th",{scope:"col"},"메모",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=a=>d.data.memo=a),required:""},null,512),[[p,d.data.memo]])])]),t("tr",null,[o[12]||(o[12]=t("th",{scope:"col"},"로그인일시",-1)),t("td",null,[i(t("input",{type:"datetime","onUpdate:modelValue":o[4]||(o[4]=a=>d.data.loginDt=a)},null,512),[[p,d.data.loginDt]])])]),t("tr",null,[o[13]||(o[13]=t("th",{scope:"col"},"사용자상태코드",-1)),t("td",null,[w(Q,{cd:"userStateCode",model:d.data.userStateCode,onSetData:o[5]||(o[5]=a=>{d.data.userStateCode=a})},null,8,["model"])])]),t("tr",null,[o[14]||(o[14]=t("th",{scope:"col"},"등록자",-1)),t("td",null,D(d.data.creator),1)]),t("tr",null,[o[15]||(o[15]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,D(d.data.createDt),1)]),t("tr",null,[o[16]||(o[16]=t("th",{scope:"col"},"수정자",-1)),t("td",null,D(d.data.updater),1)]),t("tr",null,[o[17]||(o[17]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,D(d.data.updateDt),1)])])])]),o[20]||(o[20]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),tt={colspan:"3"},et={colspan:"3"},ot={colspan:"3"},at={colspan:"3"},nt={colspan:"3"},lt={colspan:"3"},dt={class:"audit"},st={colspan:"3"},ut={colspan:"3"},rt={class:"btnWrap"},it={class:"crud"},pt={class:"totalCount"},mt={class:"no-list"},St=L({__name:"User",setup(d){const l=k(null),m=k(!1),u=B(),o=v({userId:"",companyId:"",userName:"",phoneNo:"",memo:"",userStateCode:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),a=v({required:["userId","companyId","userName","phoneNo","passwordUpdateDt","loginDt","userStateCode"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),x={unique:["companyId"],required:["userId","companyId","userName","phoneNo","passwordUpdateDt","loginDt","userStateCode"]};let P=null;const V=s=>{s==null||s.preventDefault(),C()},C=()=>{I.getUserList({...o,page:a.currentPage,totalPage:a.totalPage}).then(s=>{var e,n,g,y;a.list=(e=s.data)==null?void 0:e.list,a.totalCount=(n=s.data)==null?void 0:n.totalCount,a.currentPage=(g=s.data)==null?void 0:g.currentPage,a.lastPage=(y=s.data)==null?void 0:y.lastPage,a.grid&&a.grid.updateSettings({data:a.list})},s=>{console.log(s)})},M=s=>{a.currentPage=s,C()},c=()=>{const s={...r.commonAddColumns,userId:"",companyId:"",userName:"",phoneNo:"",passwordUpdateDt:"",memo:"",loginDt:"",userStateCode:"",...r.auditAddColumns};a.list=r.add({newRow:s,list:a.list,grid:a.grid})},E=()=>{r.del({selectedRow:P,grid:a.grid})},A=()=>{const s=r.valid({list:a.list,required:x.required});s&&I.setUserList(s).then(()=>{C()})};return $(()=>{const s=document.querySelector("#grid");a.grid=new K(s,{data:a.list,colHeaders:[...r.commonColumnNames,"사용자아이디","업체아이디","사용자이름","전화번호","비밀번호수정일시","메모","로그인일시","사용자상태코드",...r.auditColumnNames],hiddenColumns:r.hiddenColumns([]),columns:[...r.commonColumns,{data:"userId",type:"text",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"userName",type:"text",width:150,className:"underline"},{data:"phoneNo",type:"text",width:150},{data:"passwordUpdateDt",type:"date",width:170,...r.dateTimePickerConfig},{data:"memo",type:"text",width:150},{data:"loginDt",type:"date",width:170,...r.dateTimePickerConfig},{data:"userStateCode",type:"dropdown",width:150,source:function(e,n){var g;n((g=u.codeList.userStateCode)==null?void 0:g.map(y=>y.codeValue))}},...r.auditColumns],cells:function(e,n){return r.cellsEvent({row:e,col:n,grid:a.grid,self:this,pk:[]})},afterChange(e,n){r.afterChangeEvent({changes:e,source:n,gridProps:x,grid:a.grid,self:this})},afterSelectionEnd:function(e,n,g,y){P=e},afterOnCellMouseDown:(e,n)=>{const g=a.grid.getColHeader(n.col),y=a.grid.getSourceDataAtRow(n.row);g==="사용자이름"&&y&&(l.value=y,m.value=!0)},...r.defaultProps}),C()}),(s,e)=>(N(),q(T,null,[t("form",{class:"search",onSubmit:V,onKeyup:H(V,["enter"])},[t("fieldset",null,[e[27]||(e[27]=t("legend",null,"검색",-1)),t("table",null,[e[26]||(e[26]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[e[16]||(e[16]=t("th",{scope:"row"},"사용자아이디",-1)),t("td",tt,[i(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>o.userId=n)},null,512),[[p,o.userId]])])]),i(t("tr",null,[e[17]||(e[17]=t("th",{scope:"row"},"업체아이디",-1)),t("td",et,[i(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>o.companyId=n)},null,512),[[p,o.companyId]])])],512),[[S,U(u).userInfo.companyId==="kaisa"]]),t("tr",null,[e[18]||(e[18]=t("th",{scope:"row"},"사용자이름",-1)),t("td",ot,[i(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>o.userName=n)},null,512),[[p,o.userName]])])]),t("tr",null,[e[19]||(e[19]=t("th",{scope:"row"},"전화번호",-1)),t("td",at,[i(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=n=>o.phoneNo=n)},null,512),[[p,o.phoneNo]])])]),t("tr",null,[e[20]||(e[20]=t("th",{scope:"row"},"메모",-1)),t("td",nt,[i(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=n=>o.memo=n)},null,512),[[p,o.memo]])])]),t("tr",null,[e[21]||(e[21]=t("th",{scope:"row"},"사용자상태코드",-1)),t("td",lt,[w(W,{cd:"userStateCode",model:o.userStateCode,onSetData:e[5]||(e[5]=n=>{o.userStateCode=n})},null,8,["model"])])])]),i(t("tbody",dt,[t("tr",null,[e[22]||(e[22]=t("th",{scope:"row"},"수정기간",-1)),t("td",st,[w(j,{format:"yyyy-MM-dd",date:[o.startUpdateDt,o.endUpdateDt],onSetStartDate:e[6]||(e[6]=n=>{o.startUpdateDt=n.date}),onSetEndDate:e[7]||(e[7]=n=>{o.endUpdateDt=n.date})},null,8,["date"])])]),t("tr",null,[e[23]||(e[23]=t("th",{scope:"row"},"등록일",-1)),t("td",ut,[w(J,{format:"yyyy-MM-dd",date:[o.createDt],onSetStartDate:e[8]||(e[8]=n=>{o.createDt=n.date})},null,8,["date"])])]),t("tr",null,[e[24]||(e[24]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=n=>o.updater=n)},null,512),[[p,o.updater]])]),e[25]||(e[25]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=n=>o.creator=n)},null,512),[[p,o.creator]])])])],512),[[S,a.audit]])])]),t("div",rt,[t("span",it,[t("button",{type:"button",class:"button add",onClick:c},e[28]||(e[28]=[t("span",{class:"icon"},"",-1),f("추가")])),t("button",{type:"button",class:"button del",onClick:E},e[29]||(e[29]=[t("span",{class:"icon"},"",-1),f("삭제")])),t("button",{type:"button",class:"button save",onClick:A},e[30]||(e[30]=[t("span",{class:"icon"},"",-1),f("저장")])),t("button",{type:"button",class:"button reset",onClick:e[11]||(e[11]=n=>U(r).reload())},e[31]||(e[31]=[t("span",{class:"icon"},'"',-1),f("초기화")]))]),t("button",{type:"button",class:"audit",onClick:e[12]||(e[12]=n=>a.audit=!a.audit)},"상세조회"),e[34]||(e[34]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:e[13]||(e[13]=n=>U(r).reload())},e[32]||(e[32]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:e[14]||(e[14]=n=>U(G).excelExport(a.grid,"사용자"))},e[33]||(e[33]=[t("span",{class:"icon"},"",-1)])),t("div",pt,"총 "+D(a.totalCount)+"건",1)])],32),e[35]||(e[35]=t("div",{id:"grid",class:"grid-container"},null,-1)),i(t("div",mt,"조회 내역이 없습니다.",512),[[S,a.list.length===0]]),w(F,{currentPage:a.currentPage,lastPage:a.lastPage,"onUpdate:page":M},null,8,["currentPage","lastPage"]),m.value?(N(),O(z,{key:0,component:_,data:l.value,show:m.value,onClose:e[15]||(e[15]=n=>m.value=!1)},null,8,["data","show"])):R("",!0)],64))}});export{St as default};
