import{d as k,r as x,x as V,o as P,e as $,f as t,G as m,w as u,v as y,l as v,p as N,c as A,K as I,J as C,h as w,L as H,A as O,B as K,F as R}from"../index.IIUTfFbs.js";import{H as F,g as i,P as G,e as T}from"./Pagination.uzpl-crK.js";import{a as f}from"./apiConfig.CHmv9PIS.js";import{S as j,a as J}from"./SelectGroupDate.dcLV5mwa.js";import{D as W}from"./Detail.0MQsPRrp.js";import{_ as z}from"./CommonCode.vue_vue_type_script_setup_true_lang.DhXLziXr.js";import"./dateUtil.DtrefKPG.js";class Q{async getBoard(d){return(await f("/pd/getBoard",d||{})).data}async getBoardList(d){return(await f("/pd/getBoardList",d||{})).data}async setBoard(d){return(await f("/pd/setBoard",d||{})).data}async setBoardList(d){return(await f("/pd/setBoardList",d||{})).data}}const B=new Q,X={class:"detail-content"},Y={class:"detail-scroll"},Z={class:"detail-table"},h=k({__name:"BoardDetail",props:{data:{type:Object,required:!0}},setup(s){const d=s;x({editor:{},editorOption:{}});const p=()=>{d.data.boardNo&&B.getBoard({boardNo:d.data.boardNo}).then(r=>{d.data.boardNo=r.data.boardNo,d.data.boardCategoryId=r.data.boardCategoryId,d.data.companyId=r.data.companyId,d.data.title=r.data.title,d.data.contents=r.data.contents,d.data.isDisplay=r.data.isDisplay,d.data.tag=r.data.tag,d.data.creator=r.data.creator,d.data.createDt=r.data.createDt,d.data.updater=r.data.updater,d.data.updateDt=r.data.updateDt},r=>{console.log(r)})};return V(()=>{p()}),(r,o)=>(P(),$("div",X,[o[18]||(o[18]=t("h2",null,"게시판 상세",-1)),t("div",Y,[t("table",Z,[o[17]||(o[17]=t("caption",null,"게시판 상세",-1)),t("tbody",null,[t("tr",null,[o[5]||(o[5]=t("th",{scope:"col"},"게시판번호",-1)),t("td",null,m(s.data.boardNo),1)]),t("tr",null,[o[6]||(o[6]=t("th",{scope:"col"},"게시판카테고리아이디",-1)),t("td",null,[u(t("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=l=>s.data.boardCategoryId=l)},null,512),[[y,s.data.boardCategoryId]])])]),t("tr",null,[o[7]||(o[7]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,[u(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=l=>s.data.companyId=l)},null,512),[[y,s.data.companyId]])])]),t("tr",null,[o[8]||(o[8]=t("th",{scope:"col"},"제목",-1)),t("td",null,[u(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=l=>s.data.title=l)},null,512),[[y,s.data.title]])])]),o[15]||(o[15]=t("tr",null,[t("th",{scope:"col",colspan:"2"},"내용")],-1)),o[16]||(o[16]=t("tr",null,[t("td",{colspan:"2"},[t("div",{id:"BoardEditor"})])],-1)),t("tr",null,[o[9]||(o[9]=t("th",{scope:"col"},"전시여부",-1)),t("td",null,[v(z,{cd:"isDisplay",model:s.data.isDisplay,onSetData:o[3]||(o[3]=l=>{s.data.isDisplay=l})},null,8,["model"])])]),t("tr",null,[o[10]||(o[10]=t("th",{scope:"col"},"태그",-1)),t("td",null,[u(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=l=>s.data.tag=l),required:""},null,512),[[y,s.data.tag]])])]),t("tr",null,[o[11]||(o[11]=t("th",{scope:"col"},"등록자",-1)),t("td",null,m(s.data.creator),1)]),t("tr",null,[o[12]||(o[12]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,m(s.data.createDt),1)]),t("tr",null,[o[13]||(o[13]=t("th",{scope:"col"},"수정자",-1)),t("td",null,m(s.data.updater),1)]),t("tr",null,[o[14]||(o[14]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,m(s.data.updateDt),1)])])])]),o[19]||(o[19]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),_={colspan:"3"},tt={colspan:"3"},at={colspan:"3"},ot={class:"audit"},lt={colspan:"3"},et={colspan:"3"},dt={class:"btnWrap"},nt={class:"crud"},st={class:"totalCount"},rt={class:"no-list"},Dt=k({__name:"Board",setup(s){const d=N(null),p=N(!1),r=A(),o=x({boardCategoryId:"",companyId:"",title:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),l=x({required:["boardCategoryId","companyId","title","isDisplay"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),c={unique:["boardNo"],required:["boardCategoryId","companyId","title","isDisplay"]};let S=null;const U=n=>{n==null||n.preventDefault(),D()},D=()=>{B.getBoardList({...o,page:l.currentPage,totalPage:l.totalPage}).then(n=>{var a,e,b,g;l.list=(a=n.data)==null?void 0:a.list,l.totalCount=(e=n.data)==null?void 0:e.totalCount,l.currentPage=(b=n.data)==null?void 0:b.currentPage,l.lastPage=(g=n.data)==null?void 0:g.lastPage,l.grid&&l.grid.updateSettings({data:l.list})},n=>{console.log(n)})},L=n=>{l.currentPage=n,D()},q=()=>{const n={...i.commonAddColumns,boardNo:"",boardCategoryId:"",companyId:"",title:"",isDisplay:"",tag:"",...i.auditAddColumns};l.list=i.add({newRow:n,list:l.list,grid:l.grid})},E=()=>{i.del({selectedRow:S,grid:l.grid})},M=()=>{const n=i.valid({list:l.list,required:c.required});n&&B.setBoardList(n).then(()=>{D()})};return V(()=>{const n=document.querySelector("#grid");l.grid=new F(n,{data:l.list,colHeaders:[...i.commonColumnNames,"게시판번호","게시판카테고리아이디","업체아이디","제목","전시여부","태그",...i.auditColumnNames],hiddenColumns:i.hiddenColumns([]),columns:[...i.commonColumns,{data:"boardNo",type:"numeric",width:150,readOnly:!0},{data:"boardCategoryId",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"title",type:"text",width:150,className:"underline"},{data:"isDisplay",type:"numeric",width:150},{data:"tag",type:"text",width:150},...i.auditColumns],cells:function(a,e){return i.cellsEvent({row:a,col:e,grid:l.grid,self:this,pk:[]})},afterChange(a,e){i.afterChangeEvent({changes:a,source:e,gridProps:c,grid:l.grid,self:this})},afterSelectionEnd:function(a,e,b,g){S=a},afterOnCellMouseDown:(a,e)=>{const b=l.grid.getColHeader(e.col),g=l.grid.getSourceDataAtRow(e.row);b==="제목"&&g&&(d.value=g,p.value=!0)},...i.defaultProps}),D()}),(n,a)=>(P(),$(R,null,[t("form",{class:"search",onSubmit:U,onKeyup:H(U,["enter"])},[t("fieldset",null,[a[21]||(a[21]=t("legend",null,"검색",-1)),t("table",null,[a[20]||(a[20]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[a[13]||(a[13]=t("th",{scope:"row"},"게시판카테고리아이디",-1)),t("td",_,[u(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>o.boardCategoryId=e)},null,512),[[y,o.boardCategoryId]])])]),u(t("tr",null,[a[14]||(a[14]=t("th",{scope:"row"},"업체아이디",-1)),t("td",tt,[u(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>o.companyId=e)},null,512),[[y,o.companyId]])])],512),[[I,C(r).userInfo.companyId==="kaisa"]]),t("tr",null,[a[15]||(a[15]=t("th",{scope:"row"},"제목",-1)),t("td",at,[u(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>o.title=e)},null,512),[[y,o.title]])])])]),u(t("tbody",ot,[t("tr",null,[a[16]||(a[16]=t("th",{scope:"row"},"수정기간",-1)),t("td",lt,[v(j,{format:"yyyy-MM-dd",date:[o.startUpdateDt,o.endUpdateDt],onSetStartDate:a[3]||(a[3]=e=>{o.startUpdateDt=e.date}),onSetEndDate:a[4]||(a[4]=e=>{o.endUpdateDt=e.date})},null,8,["date"])])]),t("tr",null,[a[17]||(a[17]=t("th",{scope:"row"},"등록일",-1)),t("td",et,[v(J,{format:"yyyy-MM-dd",date:[o.createDt],onSetStartDate:a[5]||(a[5]=e=>{o.createDt=e.date})},null,8,["date"])])]),t("tr",null,[a[18]||(a[18]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[u(t("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>o.updater=e)},null,512),[[y,o.updater]])]),a[19]||(a[19]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[u(t("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>o.creator=e)},null,512),[[y,o.creator]])])])],512),[[I,l.audit]])])]),t("div",dt,[t("span",nt,[t("button",{type:"button",class:"button add",onClick:q},a[22]||(a[22]=[t("span",{class:"icon"},"",-1),w("추가")])),t("button",{type:"button",class:"button del",onClick:E},a[23]||(a[23]=[t("span",{class:"icon"},"",-1),w("삭제")])),t("button",{type:"button",class:"button save",onClick:M},a[24]||(a[24]=[t("span",{class:"icon"},"",-1),w("저장")])),t("button",{type:"button",class:"button reset",onClick:a[8]||(a[8]=e=>C(i).reload())},a[25]||(a[25]=[t("span",{class:"icon"},'"',-1),w("초기화")]))]),t("button",{type:"button",class:"audit",onClick:a[9]||(a[9]=e=>l.audit=!l.audit)},"상세조회"),a[28]||(a[28]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:a[10]||(a[10]=e=>C(i).reload())},a[26]||(a[26]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:a[11]||(a[11]=e=>C(T).excelExport(l.grid,"게시판"))},a[27]||(a[27]=[t("span",{class:"icon"},"",-1)])),t("div",st,"총 "+m(l.totalCount)+"건",1)])],32),a[29]||(a[29]=t("div",{id:"grid",class:"grid-container"},null,-1)),u(t("div",rt,"조회 내역이 없습니다.",512),[[I,l.list.length===0]]),v(G,{currentPage:l.currentPage,lastPage:l.lastPage,"onUpdate:page":L},null,8,["currentPage","lastPage"]),p.value?(P(),O(W,{key:0,component:h,data:d.value,show:p.value,onClose:a[12]||(a[12]=e=>p.value=!1)},null,8,["data","show"])):K("",!0)],64))}});export{Dt as default};
