import{d as U,r as I,x as N,o as b,e as w,f as t,A as E,N as K,t as k,_ as R,c as M,w as m,O as F,G as D,F as O,D as G,J as x,v as g,l as P,p as q,K as $,h as B,L as j,B as z}from"../index.BiHN_QT9.js";import{g as u,H as J,P as W,e as Q}from"./Pagination.D04KymE1.js";import{a as S}from"./apiConfig.Xhj7Bla-.js";import{S as X,a as Y}from"./SelectGroupDate.DcEFRv-R.js";import"./dateUtil.CCuh71ce.js";class Z{async getBoard(l){return(await S("/pd/getBoard",l||{})).data}async getBoardList(l){return(await S("/pd/getBoardList",l||{})).data}async setBoard(l){return(await S("/pd/setBoard",l||{})).data}async setBoardList(l){return(await S("/pd/setBoardList",l||{})).data}}const L=new Z,h=U({__name:"Detail",props:{component:{},data:{},show:{type:Boolean}},emits:["close"],setup(s,{emit:l}){const p=s,y=I({show:p.show,open:!1}),d=l,e=()=>{y.open=!1,setTimeout(()=>{d("close")},200)};return N(()=>{setTimeout(()=>{y.open=!0},100)}),(o,i)=>(b(),w("div",{class:k(["detail-container",{on:y.show}])},[t("div",{class:k(["detail-wrapper",{on:y.open}])},[t("div",{class:"detail-close icon",onClick:e},""),(b(),E(K(o.component),{data:p.data},null,8,["data"]))],2),t("div",{class:k(["detail-dimmed",{on:y.open}]),onClick:e},null,2)],2))}}),_=R(h,[["__scopeId","data-v-da9264e6"]]),tt={disabled:"",value:""},at=["value"],et=U({__name:"CommonCode",props:{cd:{type:String,required:!0},model:{type:String,required:!0},default:{type:String,default:"선택하세요."}},emits:["set-data"],setup(s,{emit:l}){const p=M(),y=l,d=s,e=I({value:d.model}),o=()=>{y("set-data",e.value)};return N(()=>{}),(i,v)=>m((b(),w("select",{"onUpdate:modelValue":v[0]||(v[0]=c=>e.value=c),onChange:o},[t("option",tt,D(d.default),1),(b(!0),w(O,null,G(x(p).codeList[d.cd],(c,V)=>(b(),w("option",{key:V,value:c.codeValue},D(c.codeName),9,at))),128))],544)),[[F,e.value]])}}),ot={class:"detail-content"},nt={class:"detail-scroll"},lt={class:"detail-table"},dt=U({__name:"BoardDetail",props:{data:{type:Object,required:!0}},setup(s){const l=s,p=I({editor:{},editorOption:{}}),y=()=>{p.editor=u.createEditor({name:"#BoardEditor",cnts:l.data})},d=()=>{l.data.boardNo?L.getBoard({boardNo:l.data.boardNo}).then(e=>{l.data.boardNo=e.data.boardNo,l.data.boardCategoryId=e.data.boardCategoryId,l.data.companyId=e.data.companyId,l.data.title=e.data.title,l.data.contents=e.data.contents,l.data.isDisplay=e.data.isDisplay,l.data.tag=e.data.tag,l.data.creator=e.data.creator,l.data.createDt=e.data.createDt,l.data.updater=e.data.updater,l.data.updateDt=e.data.updateDt,y()},e=>{console.log(e)}):y()};return N(()=>{d()}),(e,o)=>(b(),w("div",ot,[o[19]||(o[19]=t("h2",null,"게시판 상세",-1)),t("div",nt,[t("table",lt,[o[18]||(o[18]=t("caption",null,"게시판 상세",-1)),t("tbody",null,[t("tr",null,[o[6]||(o[6]=t("th",{scope:"col"},"게시판번호",-1)),t("td",null,D(s.data.boardNo),1)]),t("tr",null,[o[7]||(o[7]=t("th",{scope:"col"},"게시판카테고리아이디",-1)),t("td",null,[m(t("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=i=>s.data.boardCategoryId=i)},null,512),[[g,s.data.boardCategoryId]])])]),t("tr",null,[o[8]||(o[8]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=i=>s.data.companyId=i)},null,512),[[g,s.data.companyId]])])]),t("tr",null,[o[9]||(o[9]=t("th",{scope:"col"},"제목",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=i=>s.data.title=i)},null,512),[[g,s.data.title]])])]),o[16]||(o[16]=t("tr",null,[t("th",{scope:"col",colspan:"2"},"내용")],-1)),o[17]||(o[17]=t("tr",null,[t("td",{colspan:"2"},[t("div",{id:"BoardEditor"})])],-1)),t("tr",null,[o[10]||(o[10]=t("th",{scope:"col"},"전시여부",-1)),t("td",null,[P(et,{cd:"isDisplay",model:s.data.isDisplay,onSetData:o[3]||(o[3]=i=>{s.data.isDisplay=i})},null,8,["model"])])]),t("tr",null,[o[11]||(o[11]=t("th",{scope:"col"},"태그",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=i=>s.data.tag=i),required:""},null,512),[[g,s.data.tag]])])]),t("tr",null,[o[12]||(o[12]=t("th",{scope:"col"},"등록자",-1)),t("td",null,D(s.data.creator),1)]),t("tr",null,[o[13]||(o[13]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,D(s.data.createDt),1)]),t("tr",null,[o[14]||(o[14]=t("th",{scope:"col"},"수정자",-1)),t("td",null,D(s.data.updater),1)]),t("tr",null,[o[15]||(o[15]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,[m(t("input",{type:"datetime","onUpdate:modelValue":o[5]||(o[5]=i=>s.data.updateDt=i)},null,512),[[g,s.data.updateDt]])])])])])]),o[20]||(o[20]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),st={colspan:"3"},rt={colspan:"3"},it={colspan:"3"},ut={colspan:"3"},pt={class:"audit"},mt={colspan:"3"},yt={colspan:"3"},gt={class:"btnWrap"},ct={class:"crud"},bt={class:"totalCount"},Dt={class:"no-list"},It=U({__name:"Board",setup(s){const l=q(null),p=q(!1),y=M(),d=I({boardCategoryId:"",companyId:"",title:"",contents:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),e=I({required:["boardCategoryId","companyId","title","contents","isDisplay"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),o={unique:["boardNo"],required:["boardCategoryId","companyId","title","contents","isDisplay"]};let i=null;const v=r=>{r==null||r.preventDefault(),c()},c=()=>{L.getBoardList({...d,page:e.currentPage,totalPage:e.totalPage}).then(r=>{var a,n,f,C;e.list=(a=r.data)==null?void 0:a.list,e.totalCount=(n=r.data)==null?void 0:n.totalCount,e.currentPage=(f=r.data)==null?void 0:f.currentPage,e.lastPage=(C=r.data)==null?void 0:C.lastPage,e.grid&&e.grid.updateSettings({data:e.list})},r=>{console.log(r)})},V=r=>{e.currentPage=r,c()},A=()=>{const r={...u.commonAddColumns,boardNo:"",boardCategoryId:"",companyId:"",title:"",contents:"",isDisplay:"",tag:"",...u.auditAddColumns};e.list=u.add({newRow:r,list:e.list,grid:e.grid})},H=()=>{u.del({selectedRow:i,grid:e.grid})},T=()=>{const r=u.valid({list:e.list,required:o.required});r&&L.setBoardList(r).then(()=>{c()})};return N(()=>{const r=document.querySelector("#grid");e.grid=new J(r,{data:e.list,colHeaders:[...u.commonColumnNames,"게시판번호","게시판카테고리아이디","업체아이디","제목","내용","전시여부","태그",...u.auditColumnNames],hiddenColumns:u.hiddenColumns([]),columns:[...u.commonColumns,{data:"boardNo",type:"numeric",width:150,readOnly:!0},{data:"boardCategoryId",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"title",type:"text",width:150,className:"underline"},{data:"contents",type:"text",width:150},{data:"isDisplay",type:"numeric",width:150},{data:"tag",type:"text",width:150},...u.auditColumns],cells:function(a,n){return u.cellsEvent({row:a,col:n,grid:e.grid,self:this,pk:[]})},afterChange(a,n){u.afterChangeEvent({changes:a,source:n,gridProps:o,grid:e.grid,self:this})},afterSelectionEnd:function(a,n,f,C){i=a},afterOnCellMouseDown:(a,n)=>{const f=e.grid.getColHeader(n.col),C=e.grid.getSourceDataAtRow(n.row);f==="제목"&&C&&(l.value=C,p.value=!0)},...u.defaultProps}),c()}),(r,a)=>(b(),w(O,null,[t("form",{class:"search",onSubmit:v,onKeyup:j(v,["enter"])},[t("fieldset",null,[a[23]||(a[23]=t("legend",null,"검색",-1)),t("table",null,[a[22]||(a[22]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[a[14]||(a[14]=t("th",{scope:"row"},"게시판카테고리아이디",-1)),t("td",st,[m(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=n=>d.boardCategoryId=n)},null,512),[[g,d.boardCategoryId]])])]),m(t("tr",null,[a[15]||(a[15]=t("th",{scope:"row"},"업체아이디",-1)),t("td",rt,[m(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=n=>d.companyId=n)},null,512),[[g,d.companyId]])])],512),[[$,x(y).userInfo.companyId==="kaisa"]]),t("tr",null,[a[16]||(a[16]=t("th",{scope:"row"},"제목",-1)),t("td",it,[m(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=n=>d.title=n)},null,512),[[g,d.title]])])]),t("tr",null,[a[17]||(a[17]=t("th",{scope:"row"},"내용",-1)),t("td",ut,[m(t("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=n=>d.contents=n)},null,512),[[g,d.contents]])])])]),m(t("tbody",pt,[t("tr",null,[a[18]||(a[18]=t("th",{scope:"row"},"수정기간",-1)),t("td",mt,[P(X,{format:"yyyy-MM-dd",date:[d.startUpdateDt,d.endUpdateDt],onSetStartDate:a[4]||(a[4]=n=>{d.startUpdateDt=n.date}),onSetEndDate:a[5]||(a[5]=n=>{d.endUpdateDt=n.date})},null,8,["date"])])]),t("tr",null,[a[19]||(a[19]=t("th",{scope:"row"},"등록일",-1)),t("td",yt,[P(Y,{format:"yyyy-MM-dd",date:[d.createDt],onSetStartDate:a[6]||(a[6]=n=>{d.createDt=n.date})},null,8,["date"])])]),t("tr",null,[a[20]||(a[20]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=n=>d.updater=n)},null,512),[[g,d.updater]])]),a[21]||(a[21]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=n=>d.creator=n)},null,512),[[g,d.creator]])])])],512),[[$,e.audit]])])]),t("div",gt,[t("span",ct,[t("button",{type:"button",class:"button add",onClick:A},a[24]||(a[24]=[t("span",{class:"icon"},"",-1),B("추가")])),t("button",{type:"button",class:"button del",onClick:H},a[25]||(a[25]=[t("span",{class:"icon"},"",-1),B("삭제")])),t("button",{type:"button",class:"button save",onClick:T},a[26]||(a[26]=[t("span",{class:"icon"},"",-1),B("저장")])),t("button",{type:"button",class:"button reset",onClick:a[9]||(a[9]=n=>x(u).reload())},a[27]||(a[27]=[t("span",{class:"icon"},'"',-1),B("초기화")]))]),t("button",{type:"button",class:"audit",onClick:a[10]||(a[10]=n=>e.audit=!e.audit)},"상세조회"),a[30]||(a[30]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:a[11]||(a[11]=n=>x(u).reload())},a[28]||(a[28]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:a[12]||(a[12]=n=>x(Q).excelExport(e.grid,"게시판"))},a[29]||(a[29]=[t("span",{class:"icon"},"",-1)])),t("div",bt,"총 "+D(e.totalCount)+"건",1)])],32),a[31]||(a[31]=t("div",{id:"grid",class:"grid-container"},null,-1)),m(t("div",Dt,"조회 내역이 없습니다.",512),[[$,e.list.length===0]]),P(W,{currentPage:e.currentPage,lastPage:e.lastPage,"onUpdate:page":V},null,8,["currentPage","lastPage"]),p.value?(b(),E(_,{key:0,component:dt,data:l.value,show:p.value,onClose:a[13]||(a[13]=n=>p.value=!1)},null,8,["data","show"])):z("",!0)],64))}});export{It as default};
