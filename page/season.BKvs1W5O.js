import{d as I,c as E,r as C,x as L,o as V,e as q,f as e,w as i,K as P,J as u,v as p,l as w,h as c,G as M,L as O,F as $}from"../index.DzhUbM-V.js";import{H as A,g as r,P as B,e as H}from"./pagination.DbRpXoxE.js";import{a as m}from"./api-config.DfYrplQl.js";import{S as K,a as F}from"./select-group-date.D58cQOj7.js";import"./date-util.mBWluKXB.js";class G{async getSeason(d){return(await m("/od/get-season",d||{})).data}async getSeasonList(d){return(await m("/od/get-season-list",d||{})).data}async setSeason(d){return(await m("/od/set-season",d||{})).data}async setSeasonList(d){return(await m("/od/set-season-list",d||{})).data}}const D=new G,R={colspan:"3"},T={colspan:"3"},J={class:"audit"},W={colspan:"3"},j={colspan:"3"},z={class:"btnWrap"},Q={class:"crud"},X={class:"totalCount"},Y={class:"no-list"},st=I({__name:"season",setup(x){const d=E(),o=C({companyId:"",seasonName:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),s=C({required:["seasonPriceNo","companyId","sortOrder","seasonName","seasonStartDay","seasonEndDay","price","friPrice","satPrice","sunPrice"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),f={unique:["seasonNo"],required:["seasonPriceNo","companyId","sortOrder","seasonName","seasonStartDay","seasonEndDay","price","friPrice","satPrice","sunPrice"]};let S=null;const b=n=>{n==null||n.preventDefault(),l()},l=()=>{D.getSeasonList({...o,page:s.currentPage,totalPage:s.totalPage}).then(n=>{var t,a,y,g;s.list=(t=n.data)==null?void 0:t.list,s.totalCount=(a=n.data)==null?void 0:a.totalCount,s.currentPage=(y=n.data)==null?void 0:y.currentPage,s.lastPage=(g=n.data)==null?void 0:g.lastPage,s.grid&&s.grid.updateSettings({data:s.list})},n=>{console.log(n)})},N=n=>{s.currentPage=n,l()},v=()=>{const n={...r.commonAddColumns,seasonNo:"",seasonPriceNo:"",companyId:"",sortOrder:"",seasonName:"",seasonStartDay:"",seasonEndDay:"",price:"",friPrice:"",satPrice:"",sunPrice:"",...r.auditAddColumns};s.list=r.add({newRow:n,list:s.list,grid:s.grid})},k=()=>{r.del({selectedRow:S,grid:s.grid})},U=()=>{const n=r.valid({list:s.list,required:f.required});n&&D.setSeasonList(n).then(()=>{l()})};return L(()=>{const n=document.querySelector("#grid");s.grid=new A(n,{data:s.list,colHeaders:[...r.commonColumnNames,"시즌번호","시즌가격번호","업체아이디","정렬순서","시즌명","시즌시작일시","시즌종료일시","가격","금요일가격","토요일가격","일요일가격",...r.auditColumnNames],hiddenColumns:r.hiddenColumns([]),columns:[...r.commonColumns,{data:"seasonNo",type:"numeric",width:150,readOnly:!0},{data:"seasonPriceNo",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"sortOrder",type:"numeric",width:150},{data:"seasonName",type:"text",width:150},{data:"seasonStartDay",type:"text",width:170,...r.datePickerConfig},{data:"seasonEndDay",type:"text",width:170,...r.datePickerConfig},{data:"price",type:"numeric",width:150},{data:"friPrice",type:"numeric",width:150},{data:"satPrice",type:"numeric",width:150},{data:"sunPrice",type:"numeric",width:150},...r.auditColumns],cells:function(t,a){return r.cellsEvent({row:t,col:a,grid:s.grid,self:this,pk:[]})},afterChange(t,a){r.afterChangeEvent({changes:t,source:a,gridProps:f,grid:s.grid,self:this})},afterSelectionEnd:function(t,a,y,g){S=t},...r.defaultProps}),l()}),(n,t)=>(V(),q($,null,[e("form",{class:"search",onSubmit:b,onKeyup:O(b,["enter"])},[e("fieldset",null,[t[18]||(t[18]=e("legend",null,"검색",-1)),e("table",null,[t[17]||(t[17]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[i(e("tr",null,[t[11]||(t[11]=e("th",{scope:"row"},"업체아이디",-1)),e("td",R,[i(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>o.companyId=a)},null,512),[[p,o.companyId]])])],512),[[P,u(d).userInfo.companyId==="kaisa"]]),e("tr",null,[t[12]||(t[12]=e("th",{scope:"row"},"시즌명",-1)),e("td",T,[i(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>o.seasonName=a)},null,512),[[p,o.seasonName]])])])]),i(e("tbody",J,[e("tr",null,[t[13]||(t[13]=e("th",{scope:"row"},"수정기간",-1)),e("td",W,[w(K,{format:"yyyy-MM-dd",date:[o.startUpdateDt,o.endUpdateDt],onSetStartDate:t[2]||(t[2]=a=>{o.startUpdateDt=a.date}),onSetEndDate:t[3]||(t[3]=a=>{o.endUpdateDt=a.date})},null,8,["date"])])]),e("tr",null,[t[14]||(t[14]=e("th",{scope:"row"},"등록일",-1)),e("td",j,[w(F,{format:"yyyy-MM-dd",date:[o.createDt],onSetStartDate:t[4]||(t[4]=a=>{o.createDt=a.date})},null,8,["date"])])]),e("tr",null,[t[15]||(t[15]=e("th",{scope:"row"},"수정ID",-1)),e("td",null,[i(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=a=>o.updater=a)},null,512),[[p,o.updater]])]),t[16]||(t[16]=e("th",{scope:"row"},"등록ID",-1)),e("td",null,[i(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=a=>o.creator=a)},null,512),[[p,o.creator]])])])],512),[[P,s.audit]])])]),e("div",z,[e("span",Q,[e("button",{type:"button",class:"button add",onClick:v},t[19]||(t[19]=[e("span",{class:"icon"},"",-1),c("추가")])),e("button",{type:"button",class:"button del",onClick:k},t[20]||(t[20]=[e("span",{class:"icon"},"",-1),c("삭제")])),e("button",{type:"button",class:"button save",onClick:U},t[21]||(t[21]=[e("span",{class:"icon"},"",-1),c("저장")])),e("button",{type:"button",class:"button reset",onClick:t[7]||(t[7]=a=>u(r).reload())},t[22]||(t[22]=[e("span",{class:"icon"},'"',-1),c("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[8]||(t[8]=a=>s.audit=!s.audit)},"상세조회"),t[25]||(t[25]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[9]||(t[9]=a=>u(r).reload())},t[23]||(t[23]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[10]||(t[10]=a=>u(H).excelExport(s.grid,"시즌"))},t[24]||(t[24]=[e("span",{class:"icon"},"",-1)])),e("div",X,"총 "+M(s.totalCount)+"건",1)])],32),t[26]||(t[26]=e("div",{id:"grid",class:"grid-container"},null,-1)),i(e("div",Y,"조회 내역이 없습니다.",512),[[P,s.list.length===0]]),w(B,{currentPage:s.currentPage,lastPage:s.lastPage,"onUpdate:page":N},null,8,["currentPage","lastPage"])],64))}});export{st as default};
