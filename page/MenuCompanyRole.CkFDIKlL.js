import{d as U,c as k,r as w,x as L,o as N,e as V,f as n,w as d,v as r,K as C,J as p,l as b,h as m,G as q,L as E,F as $}from"../index.Cmy3sguR.js";import{H as A,g as s,P as B,e as H}from"./Pagination.BciRQOOL.js";import{a as x}from"./apiConfig.0ZG0sWLr.js";import{S as K,a as F}from"./SelectGroupDate.Coh5Kjcx.js";import"./dateUtil.DyiMf4By.js";class G{async getMenuCompanyRoleList(u){return(await x("/at/getMenuCompanyRoleList",u||{})).data}async setMenuCompanyRoleList(u){return(await x("/at/setMenuCompanyRoleList",u||{})).data}}const D=new G,O={colspan:"3"},T={colspan:"3"},J={class:"audit"},W={colspan:"3"},j={colspan:"3"},z={class:"btnWrap"},Q={class:"crud"},X={class:"totalCount"},Y={class:"no-list"},et=U({__name:"MenuCompanyRole",setup(I){const u=k(),l=w({menuId:"",companyId:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),e=w({required:["menuId","companyId","menuName","buttonRole"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),c={unique:["companyId"],required:["menuId","companyId","menuName","buttonRole"]};let f=null;const P=a=>{a==null||a.preventDefault(),i()},i=()=>{D.getMenuCompanyRoleList({...l,page:e.currentPage,totalPage:e.totalPage}).then(a=>{var t,o,g,y;e.list=(t=a.data)==null?void 0:t.list,e.totalCount=(o=a.data)==null?void 0:o.totalCount,e.currentPage=(g=a.data)==null?void 0:g.currentPage,e.lastPage=(y=a.data)==null?void 0:y.lastPage,e.grid&&e.grid.updateSettings({data:e.list})},a=>{console.log(a)})},v=a=>{e.currentPage=a,i()},S=()=>{const a={...s.commonAddColumns,menuId:"",companyId:"",menuName:"",buttonRole:"",...s.auditAddColumns};e.list=s.add({newRow:a,list:e.list,grid:e.grid})},M=()=>{s.del({selectedRow:f,grid:e.grid})},R=()=>{const a=s.valid({list:e.list,required:c.required});a&&D.setMenuCompanyRoleList(a).then(()=>{i()})};return L(()=>{const a=document.querySelector("#grid");e.grid=new A(a,{data:e.list,colHeaders:[...s.commonColumnNames,"메뉴아이디","업체아이디","메뉴명","버튼권한",...s.auditColumnNames],hiddenColumns:s.hiddenColumns([]),columns:[...s.commonColumns,{data:"menuId",type:"text",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"menuName",type:"text",width:150},{data:"buttonRole",type:"text",width:150},...s.auditColumns],cells:function(t,o){return s.cellsEvent({row:t,col:o,grid:e.grid,self:this,pk:[]})},afterChange(t,o){s.afterChangeEvent({changes:t,source:o,gridProps:c,grid:e.grid,self:this})},afterSelectionEnd:function(t,o,g,y){f=t},...s.defaultProps}),i()}),(a,t)=>(N(),V($,null,[n("form",{class:"search",onSubmit:P,onKeyup:E(P,["enter"])},[n("fieldset",null,[t[18]||(t[18]=n("legend",null,"검색",-1)),n("table",null,[t[17]||(t[17]=n("colgroup",null,[n("col",{style:{width:"80px"}}),n("col",{style:{width:"30%"}}),n("col",{style:{width:"80px"}}),n("col")],-1)),n("tbody",null,[n("tr",null,[t[11]||(t[11]=n("th",null,"메뉴아이디",-1)),n("td",O,[d(n("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>l.menuId=o)},null,512),[[r,l.menuId]])])]),d(n("tr",null,[t[12]||(t[12]=n("th",null,"업체아이디",-1)),n("td",T,[d(n("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>l.companyId=o)},null,512),[[r,l.companyId]])])],512),[[C,p(u).userInfo.companyId==="kaisa"]])]),d(n("tbody",J,[n("tr",null,[t[13]||(t[13]=n("th",null,"수정기간",-1)),n("td",W,[b(K,{format:"yyyy-MM-dd",date:[l.startUpdateDt,l.endUpdateDt],onSetStartDate:t[2]||(t[2]=o=>{l.startUpdateDt=o.date}),onSetEndDate:t[3]||(t[3]=o=>{l.endUpdateDt=o.date})},null,8,["date"])])]),n("tr",null,[t[14]||(t[14]=n("th",null,"등록일",-1)),n("td",j,[b(F,{format:"yyyy-MM-dd",date:[l.createDt],onSetStartDate:t[4]||(t[4]=o=>{l.createDt=o.date})},null,8,["date"])])]),n("tr",null,[t[15]||(t[15]=n("th",null,"수정ID",-1)),n("td",null,[d(n("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>l.updater=o)},null,512),[[r,l.updater]])]),t[16]||(t[16]=n("th",null,"등록ID",-1)),n("td",null,[d(n("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>l.creator=o)},null,512),[[r,l.creator]])])])],512),[[C,e.audit]])])]),n("div",z,[n("span",Q,[n("button",{type:"button",class:"button add",onClick:S},t[19]||(t[19]=[n("span",{class:"icon"},"",-1),m("추가")])),n("button",{type:"button",class:"button del",onClick:M},t[20]||(t[20]=[n("span",{class:"icon"},"",-1),m("삭제")])),n("button",{type:"button",class:"button save",onClick:R},t[21]||(t[21]=[n("span",{class:"icon"},"",-1),m("저장")])),n("button",{type:"button",class:"button reset",onClick:t[7]||(t[7]=o=>p(s).reload())},t[22]||(t[22]=[n("span",{class:"icon"},'"',-1),m("초기화")]))]),n("button",{type:"button",class:"audit",onClick:t[8]||(t[8]=o=>e.audit=!e.audit)},"상세조회"),t[25]||(t[25]=n("button",{type:"submit",class:"button3"},[n("span",{class:"icon"},"")],-1)),n("button",{type:"reset",onClick:t[9]||(t[9]=o=>p(s).reload())},t[23]||(t[23]=[n("span",{class:"icon"},'"',-1)])),n("button",{type:"button",class:"button excel",onClick:t[10]||(t[10]=o=>p(H).excelExport(e.grid,"메뉴업체권한"))},t[24]||(t[24]=[n("span",{class:"icon"},"",-1)])),n("div",X,"총 "+q(e.totalCount)+"건",1)])],32),t[26]||(t[26]=n("div",{id:"grid",class:"grid-container"},null,-1)),d(n("div",Y,"조회 내역이 없습니다.",512),[[C,e.list.length===0]]),b(B,{currentPage:e.currentPage,lastPage:e.lastPage,"onUpdate:page":v},null,8,["currentPage","lastPage"])],64))}});export{et as default};
