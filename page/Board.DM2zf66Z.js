import{d as U,r as I,x as N,o as b,e as w,f as t,A as E,N as K,t as k,_ as R,c as M,w as p,O as F,G as D,F as O,D as G,J as x,v as y,l as P,p as q,K as $,h as S,L as j,B as z}from"../index.CoZ4l3zG.js";import{g as u,H as J,P as W,e as Q}from"./Pagination.CXaUJzND.js";import{a as B}from"./apiConfig.-DPTjU66.js";import{S as X,a as Y}from"./SelectGroupDate.BOqEm1rv.js";import"./dateUtil.BrcqyQTP.js";class Z{async getBoard(l){return(await B("/pd/getBoard",l||{})).data}async getBoardList(l){return(await B("/pd/getBoardList",l||{})).data}async setBoard(l){return(await B("/pd/setBoard",l||{})).data}async setBoardList(l){return(await B("/pd/setBoardList",l||{})).data}}const L=new Z,h=U({__name:"Detail",props:{component:{},data:{},show:{type:Boolean}},emits:["close"],setup(s,{emit:l}){const m=s,g=I({show:m.show,open:!1}),d=l,a=()=>{g.open=!1,setTimeout(()=>{d("close")},200)};return N(()=>{setTimeout(()=>{g.open=!0},100)}),(o,i)=>(b(),w("div",{class:k(["detail-container",{on:g.show}])},[t("div",{class:k(["detail-wrapper",{on:g.open}])},[t("div",{class:"detail-close icon",onClick:a},""),(b(),E(K(o.component),{data:m.data},null,8,["data"]))],2),t("div",{class:k(["detail-dimmed",{on:g.open}]),onClick:a},null,2)],2))}}),_=R(h,[["__scopeId","data-v-da9264e6"]]),tt={disabled:"",value:""},et=["value"],at=U({__name:"CommonCode",props:{cd:{type:String,required:!0},model:{type:String,required:!0},default:{type:String,default:"선택하세요."}},emits:["set-data"],setup(s,{emit:l}){const m=M(),g=l,d=s,a=I({value:d.model}),o=()=>{g("set-data",a.value)};return N(()=>{}),(i,v)=>p((b(),w("select",{"onUpdate:modelValue":v[0]||(v[0]=c=>a.value=c),onChange:o},[t("option",tt,D(d.default),1),(b(!0),w(O,null,G(x(m).codeList[d.cd],(c,V)=>(b(),w("option",{key:V,value:c.codeValue},D(c.codeName),9,et))),128))],544)),[[F,a.value]])}}),ot={class:"detail-content"},nt={class:"detail-scroll"},lt={class:"detail-table"},dt=U({__name:"BoardDetail",props:{data:{type:Object,required:!0}},setup(s){const l=s,m=I({editor:{},editorOption:{}}),g=()=>{m.editor=u.createEditor({name:"#BoardEditor",cnts:l.data})},d=()=>{l.data.boardNo?L.getBoard({boardNo:l.data.boardNo}).then(a=>{l.data.boardNo=a.data.boardNo,l.data.boardCategoryId=a.data.boardCategoryId,l.data.companyId=a.data.companyId,l.data.title=a.data.title,l.data.contents=a.data.contents,l.data.isDisplay=a.data.isDisplay,l.data.tag=a.data.tag,l.data.creator=a.data.creator,l.data.createDt=a.data.createDt,l.data.updater=a.data.updater,l.data.updateDt=a.data.updateDt},a=>{console.log(a)}):g()};return N(()=>{d()}),(a,o)=>(b(),w("div",ot,[o[19]||(o[19]=t("h2",null,"게시판 상세",-1)),t("div",nt,[t("table",lt,[o[18]||(o[18]=t("caption",null,"게시판 상세",-1)),t("tbody",null,[t("tr",null,[o[7]||(o[7]=t("th",{scope:"col"},"게시판번호",-1)),t("td",null,D(s.data.boardNo),1)]),t("tr",null,[o[8]||(o[8]=t("th",{scope:"col"},"게시판카테고리아이디",-1)),t("td",null,[p(t("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=i=>s.data.boardCategoryId=i)},null,512),[[y,s.data.boardCategoryId]])])]),t("tr",null,[o[9]||(o[9]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=i=>s.data.companyId=i)},null,512),[[y,s.data.companyId]])])]),t("tr",null,[o[10]||(o[10]=t("th",{scope:"col"},"제목",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=i=>s.data.title=i)},null,512),[[y,s.data.title]])])]),t("tr",null,[o[11]||(o[11]=t("th",{scope:"col"},"내용",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=i=>s.data.contents=i)},null,512),[[y,s.data.contents]])])]),t("tr",null,[o[12]||(o[12]=t("th",{scope:"col"},"전시여부",-1)),t("td",null,[P(at,{cd:"isDisplay",model:s.data.isDisplay,onSetData:o[4]||(o[4]=i=>{s.data.isDisplay=i})},null,8,["model"])])]),t("tr",null,[o[13]||(o[13]=t("th",{scope:"col"},"태그",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=i=>s.data.tag=i),required:""},null,512),[[y,s.data.tag]])])]),t("tr",null,[o[14]||(o[14]=t("th",{scope:"col"},"등록자",-1)),t("td",null,D(s.data.creator),1)]),t("tr",null,[o[15]||(o[15]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,D(s.data.createDt),1)]),t("tr",null,[o[16]||(o[16]=t("th",{scope:"col"},"수정자",-1)),t("td",null,D(s.data.updater),1)]),t("tr",null,[o[17]||(o[17]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,[p(t("input",{type:"datetime","onUpdate:modelValue":o[6]||(o[6]=i=>s.data.updateDt=i)},null,512),[[y,s.data.updateDt]])])])])])]),o[20]||(o[20]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),st={colspan:"3"},rt={colspan:"3"},it={colspan:"3"},ut={colspan:"3"},pt={class:"audit"},mt={colspan:"3"},yt={colspan:"3"},gt={class:"btnWrap"},ct={class:"crud"},bt={class:"totalCount"},Dt={class:"no-list"},It=U({__name:"Board",setup(s){const l=q(null),m=q(!1),g=M(),d=I({boardCategoryId:"",companyId:"",title:"",contents:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),a=I({required:["boardCategoryId","companyId","title","contents","isDisplay"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),o={unique:["boardNo"],required:["boardCategoryId","companyId","title","contents","isDisplay"]};let i=null;const v=r=>{r==null||r.preventDefault(),c()},c=()=>{L.getBoardList({...d,page:a.currentPage,totalPage:a.totalPage}).then(r=>{var e,n,f,C;a.list=(e=r.data)==null?void 0:e.list,a.totalCount=(n=r.data)==null?void 0:n.totalCount,a.currentPage=(f=r.data)==null?void 0:f.currentPage,a.lastPage=(C=r.data)==null?void 0:C.lastPage,a.grid&&a.grid.updateSettings({data:a.list})},r=>{console.log(r)})},V=r=>{a.currentPage=r,c()},A=()=>{const r={...u.commonAddColumns,boardNo:"",boardCategoryId:"",companyId:"",title:"",contents:"",isDisplay:"",tag:"",...u.auditAddColumns};a.list=u.add({newRow:r,list:a.list,grid:a.grid})},H=()=>{u.del({selectedRow:i,grid:a.grid})},T=()=>{const r=u.valid({list:a.list,required:o.required});r&&L.setBoardList(r).then(()=>{c()})};return N(()=>{const r=document.querySelector("#grid");a.grid=new J(r,{data:a.list,colHeaders:[...u.commonColumnNames,"게시판번호","게시판카테고리아이디","업체아이디","제목","내용","전시여부","태그",...u.auditColumnNames],hiddenColumns:u.hiddenColumns([]),columns:[...u.commonColumns,{data:"boardNo",type:"numeric",width:150,readOnly:!0},{data:"boardCategoryId",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"title",type:"text",width:150,className:"underline"},{data:"contents",type:"text",width:150},{data:"isDisplay",type:"numeric",width:150},{data:"tag",type:"text",width:150},...u.auditColumns],cells:function(e,n){return u.cellsEvent({row:e,col:n,grid:a.grid,self:this,pk:[]})},afterChange(e,n){u.afterChangeEvent({changes:e,source:n,gridProps:o,grid:a.grid,self:this})},afterSelectionEnd:function(e,n,f,C){i=e},afterOnCellMouseDown:(e,n)=>{const f=a.grid.getColHeader(n.col),C=a.grid.getSourceDataAtRow(n.row);f==="제목"&&C&&(l.value=C,m.value=!0)},...u.defaultProps}),c()}),(r,e)=>(b(),w(O,null,[t("form",{class:"search",onSubmit:v,onKeyup:j(v,["enter"])},[t("fieldset",null,[e[23]||(e[23]=t("legend",null,"검색",-1)),t("table",null,[e[22]||(e[22]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[e[14]||(e[14]=t("th",{scope:"row"},"게시판카테고리아이디",-1)),t("td",st,[p(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>d.boardCategoryId=n)},null,512),[[y,d.boardCategoryId]])])]),p(t("tr",null,[e[15]||(e[15]=t("th",{scope:"row"},"업체아이디",-1)),t("td",rt,[p(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>d.companyId=n)},null,512),[[y,d.companyId]])])],512),[[$,x(g).userInfo.companyId==="kaisa"]]),t("tr",null,[e[16]||(e[16]=t("th",{scope:"row"},"제목",-1)),t("td",it,[p(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>d.title=n)},null,512),[[y,d.title]])])]),t("tr",null,[e[17]||(e[17]=t("th",{scope:"row"},"내용",-1)),t("td",ut,[p(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=n=>d.contents=n)},null,512),[[y,d.contents]])])])]),p(t("tbody",pt,[t("tr",null,[e[18]||(e[18]=t("th",{scope:"row"},"수정기간",-1)),t("td",mt,[P(X,{format:"yyyy-MM-dd",date:[d.startUpdateDt,d.endUpdateDt],onSetStartDate:e[4]||(e[4]=n=>{d.startUpdateDt=n.date}),onSetEndDate:e[5]||(e[5]=n=>{d.endUpdateDt=n.date})},null,8,["date"])])]),t("tr",null,[e[19]||(e[19]=t("th",{scope:"row"},"등록일",-1)),t("td",yt,[P(Y,{format:"yyyy-MM-dd",date:[d.createDt],onSetStartDate:e[6]||(e[6]=n=>{d.createDt=n.date})},null,8,["date"])])]),t("tr",null,[e[20]||(e[20]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=n=>d.updater=n)},null,512),[[y,d.updater]])]),e[21]||(e[21]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=n=>d.creator=n)},null,512),[[y,d.creator]])])])],512),[[$,a.audit]])])]),t("div",gt,[t("span",ct,[t("button",{type:"button",class:"button add",onClick:A},e[24]||(e[24]=[t("span",{class:"icon"},"",-1),S("추가")])),t("button",{type:"button",class:"button del",onClick:H},e[25]||(e[25]=[t("span",{class:"icon"},"",-1),S("삭제")])),t("button",{type:"button",class:"button save",onClick:T},e[26]||(e[26]=[t("span",{class:"icon"},"",-1),S("저장")])),t("button",{type:"button",class:"button reset",onClick:e[9]||(e[9]=n=>x(u).reload())},e[27]||(e[27]=[t("span",{class:"icon"},'"',-1),S("초기화")]))]),t("button",{type:"button",class:"audit",onClick:e[10]||(e[10]=n=>a.audit=!a.audit)},"상세조회"),e[30]||(e[30]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:e[11]||(e[11]=n=>x(u).reload())},e[28]||(e[28]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:e[12]||(e[12]=n=>x(Q).excelExport(a.grid,"게시판"))},e[29]||(e[29]=[t("span",{class:"icon"},"",-1)])),t("div",bt,"총 "+D(a.totalCount)+"건",1)])],32),e[31]||(e[31]=t("div",{id:"grid",class:"grid-container"},null,-1)),p(t("div",Dt,"조회 내역이 없습니다.",512),[[$,a.list.length===0]]),P(W,{currentPage:a.currentPage,lastPage:a.lastPage,"onUpdate:page":V},null,8,["currentPage","lastPage"]),m.value?(b(),E(_,{key:0,component:dt,data:l.value,show:m.value,onClose:e[13]||(e[13]=n=>m.value=!1)},null,8,["data","show"])):z("",!0)],64))}});export{It as default};
