import{d as L,c as k,r as y,x as S,o as q,e as E,f as e,w as m,v as C,h as r,J as g,G as U,L as V,K as $,l as A,F as B}from"../index.DmO2ifJu.js";import{H as D,g as l,P as H,e as K}from"./Pagination.B6BDlxng.js";import{a as d}from"./apiConfig.BDIhlACd.js";import"./dateUtil.BLZ8m-3E.js";class M{async getFile(o){return(await d("/cr/getFile",o||{})).data}async getFileList(o){return(await d("/cr/getFileList",o||{})).data}async setFile(o){return(await d("/cr/setFile",o||{})).data}async setFileList(o){return(await d("/cr/setFileList",o||{})).data}}const w=new M,R={colspan:"3"},T={colspan:"3"},G={class:"btnWrap"},J={class:"crud"},O={class:"totalCount"},W={class:"no-list"},X=L({__name:"File",setup(N){k();const o=y({tableName:"",columnName:""}),s=y({required:["tableName","columnName"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),p={unique:["fileNo"],required:["tableName","columnName"]};let b=null;const f=n=>{n==null||n.preventDefault(),i()},i=()=>{w.getFileList({...o,page:s.currentPage,totalPage:s.totalPage}).then(n=>{var t,a,u,c;s.list=(t=n.data)==null?void 0:t.list,s.totalCount=(a=n.data)==null?void 0:a.totalCount,s.currentPage=(u=n.data)==null?void 0:u.currentPage,s.lastPage=(c=n.data)==null?void 0:c.lastPage,s.grid&&s.grid.updateSettings({data:s.list})},n=>{console.log(n)})},P=n=>{s.currentPage=n,i()},v=()=>{const n={...l.commonAddColumns,fileNo:"",tableName:"",columnName:"",...l.auditAddColumns};s.list=l.add({newRow:n,list:s.list,grid:s.grid})},x=()=>{l.del({selectedRow:b,grid:s.grid})},F=()=>{const n=l.valid({list:s.list,required:p.required});n&&w.setFileList(n).then(()=>{i()})};return S(()=>{const n=document.querySelector("#grid");s.grid=new D(n,{data:s.list,colHeaders:[...l.commonColumnNames,"파일번호","테이블명","컬럼명",...l.auditColumnNames],hiddenColumns:l.hiddenColumns([]),columns:[...l.commonColumns,{data:"fileNo",type:"numeric",width:150,readOnly:!0},{data:"tableName",type:"text",width:150},{data:"columnName",type:"text",width:150},...l.auditColumns],cells:function(t,a){return l.cellsEvent({row:t,col:a,grid:s.grid,self:this,pk:[]})},afterChange(t,a){l.afterChangeEvent({changes:t,source:a,gridProps:p,grid:s.grid,self:this})},afterSelectionEnd:function(t,a,u,c){b=t},...l.defaultProps}),i()}),(n,t)=>(q(),E(B,null,[e("form",{class:"search",onSubmit:f,onKeyup:V(f,["enter"])},[e("fieldset",null,[t[8]||(t[8]=e("legend",null,"검색",-1)),e("table",null,[t[7]||(t[7]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[e("tr",null,[t[5]||(t[5]=e("th",{scope:"row"},"테이블명",-1)),e("td",R,[m(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>o.tableName=a)},null,512),[[C,o.tableName]])])]),e("tr",null,[t[6]||(t[6]=e("th",{scope:"row"},"컬럼명",-1)),e("td",T,[m(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>o.columnName=a)},null,512),[[C,o.columnName]])])])])])]),e("div",G,[e("span",J,[e("button",{type:"button",class:"button add",onClick:v},t[9]||(t[9]=[e("span",{class:"icon"},"",-1),r("추가")])),e("button",{type:"button",class:"button del",onClick:x},t[10]||(t[10]=[e("span",{class:"icon"},"",-1),r("삭제")])),e("button",{type:"button",class:"button save",onClick:F},t[11]||(t[11]=[e("span",{class:"icon"},"",-1),r("저장")])),e("button",{type:"button",class:"button reset",onClick:t[2]||(t[2]=a=>g(l).reload())},t[12]||(t[12]=[e("span",{class:"icon"},'"',-1),r("초기화")]))]),t[15]||(t[15]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[3]||(t[3]=a=>g(l).reload())},t[13]||(t[13]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[4]||(t[4]=a=>g(K).excelExport(s.grid,"파일"))},t[14]||(t[14]=[e("span",{class:"icon"},"",-1)])),e("div",O,"총 "+U(s.totalCount)+"건",1)])],32),t[16]||(t[16]=e("div",{id:"grid",class:"grid-container"},null,-1)),m(e("div",W,"조회 내역이 없습니다.",512),[[$,s.list.length===0]]),A(H,{currentPage:s.currentPage,lastPage:s.lastPage,"onUpdate:page":P},null,8,["currentPage","lastPage"])],64))}});export{X as default};
