import{d as k,c as L,r as w,x as V,o as N,e as q,f as n,w as d,v as r,K as b,J as p,l as C,h as g,G as E,L as M,F as $}from"../index.D1VbM3C_.js";import{H as A,g as l,P as H,e as K}from"./Pagination.CwC5FYHD.js";import{a as P}from"./apiConfig.BM_b3DjX.js";import{S as F,a as G}from"./SelectGroupDate.CRAe91qa.js";import"./dateUtil.-4ZUTLvU.js";class O{async getBoardList(i){return(await P("/pd/getBoardList",i||{})).data}async setBoardList(i){return(await P("/pd/setBoardList",i||{})).data}}const x=new O,R={colspan:"3"},T={colspan:"3"},J={colspan:"3"},W={colspan:"3"},j={class:"audit"},z={colspan:"3"},Q={colspan:"3"},X={class:"btnWrap"},Y={class:"crud"},Z={class:"totalCount"},h={class:"no-list"},at=k({__name:"Board",setup(v){const i=L(),a=w({boardCategoryId:"",companyId:"",title:"",contents:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),o=w({required:["boardCategoryId","companyId","title","contents","isDisplay"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),f={unique:["boardNo"],required:["boardCategoryId","companyId","title","contents","isDisplay"]};let c=null;const D=s=>{s==null||s.preventDefault(),u()},u=()=>{x.getBoardList({...a,page:o.currentPage,totalPage:o.totalPage}).then(s=>{var t,e,y,m;o.list=(t=s.data)==null?void 0:t.list,o.totalCount=(e=s.data)==null?void 0:e.totalCount,o.currentPage=(y=s.data)==null?void 0:y.currentPage,o.lastPage=(m=s.data)==null?void 0:m.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},s=>{console.log(s)})},I=s=>{o.currentPage=s,u()},S=()=>{const s={...l.commonAddColumns,boardNo:"",boardCategoryId:"",companyId:"",title:"",contents:"",isDisplay:"",tag:"",...l.auditAddColumns};o.list=l.add({newRow:s,list:o.list,grid:o.grid})},U=()=>{l.del({selectedRow:c,grid:o.grid})},B=()=>{const s=l.valid({list:o.list,required:f.required});s&&x.setBoardList(s).then(()=>{u()})};return V(()=>{const s=document.querySelector("#grid");o.grid=new A(s,{data:o.list,colHeaders:[...l.commonColumnNames,"게시판번호","게시판카테고리아이디","업체아이디","제목","내용","전시여부","태그",...l.auditColumnNames],hiddenColumns:l.hiddenColumns([]),columns:[...l.commonColumns,{data:"boardNo",type:"numeric",width:150,readOnly:!0},{data:"boardCategoryId",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"title",type:"text",width:150},{data:"contents",type:"text",width:150},{data:"isDisplay",type:"numeric",width:150},{data:"tag",type:"text",width:150},...l.auditColumns],cells:function(t,e){return l.cellsEvent({row:t,col:e,grid:o.grid,self:this,pk:[]})},afterChange(t,e){l.afterChangeEvent({changes:t,source:e,gridProps:f,grid:o.grid,self:this})},afterSelectionEnd:function(t,e,y,m){c=t},...l.defaultProps}),u()}),(s,t)=>(N(),q($,null,[n("form",{class:"search",onSubmit:D,onKeyup:M(D,["enter"])},[n("fieldset",null,[t[22]||(t[22]=n("legend",null,"검색",-1)),n("table",null,[t[21]||(t[21]=n("colgroup",null,[n("col",{style:{width:"80px"}}),n("col",{style:{width:"30%"}}),n("col",{style:{width:"80px"}}),n("col")],-1)),n("tbody",null,[n("tr",null,[t[13]||(t[13]=n("th",null,"게시판카테고리아이디",-1)),n("td",R,[d(n("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.boardCategoryId=e)},null,512),[[r,a.boardCategoryId]])])]),d(n("tr",null,[t[14]||(t[14]=n("th",null,"업체아이디",-1)),n("td",T,[d(n("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>a.companyId=e)},null,512),[[r,a.companyId]])])],512),[[b,p(i).userInfo.companyId==="kaisa"]]),n("tr",null,[t[15]||(t[15]=n("th",null,"제목",-1)),n("td",J,[d(n("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>a.title=e)},null,512),[[r,a.title]])])]),n("tr",null,[t[16]||(t[16]=n("th",null,"내용",-1)),n("td",W,[d(n("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>a.contents=e)},null,512),[[r,a.contents]])])])]),d(n("tbody",j,[n("tr",null,[t[17]||(t[17]=n("th",null,"수정기간",-1)),n("td",z,[C(F,{format:"yyyy-MM-dd",date:[a.startUpdateDt,a.endUpdateDt],onSetStartDate:t[4]||(t[4]=e=>{a.startUpdateDt=e.date}),onSetEndDate:t[5]||(t[5]=e=>{a.endUpdateDt=e.date})},null,8,["date"])])]),n("tr",null,[t[18]||(t[18]=n("th",null,"등록일",-1)),n("td",Q,[C(G,{format:"yyyy-MM-dd",date:[a.createDt],onSetStartDate:t[6]||(t[6]=e=>{a.createDt=e.date})},null,8,["date"])])]),n("tr",null,[t[19]||(t[19]=n("th",null,"수정ID",-1)),n("td",null,[d(n("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>a.updater=e)},null,512),[[r,a.updater]])]),t[20]||(t[20]=n("th",null,"등록ID",-1)),n("td",null,[d(n("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>a.creator=e)},null,512),[[r,a.creator]])])])],512),[[b,o.audit]])])]),n("div",X,[n("span",Y,[n("button",{type:"button",class:"button add",onClick:S},t[23]||(t[23]=[n("span",{class:"icon"},"",-1),g("추가")])),n("button",{type:"button",class:"button del",onClick:U},t[24]||(t[24]=[n("span",{class:"icon"},"",-1),g("삭제")])),n("button",{type:"button",class:"button save",onClick:B},t[25]||(t[25]=[n("span",{class:"icon"},"",-1),g("저장")])),n("button",{type:"button",class:"button reset",onClick:t[9]||(t[9]=e=>p(l).reload())},t[26]||(t[26]=[n("span",{class:"icon"},'"',-1),g("초기화")]))]),n("button",{type:"button",class:"audit",onClick:t[10]||(t[10]=e=>o.audit=!o.audit)},"상세조회"),t[29]||(t[29]=n("button",{type:"submit",class:"button3"},[n("span",{class:"icon"},"")],-1)),n("button",{type:"reset",onClick:t[11]||(t[11]=e=>p(l).reload())},t[27]||(t[27]=[n("span",{class:"icon"},'"',-1)])),n("button",{type:"button",class:"button excel",onClick:t[12]||(t[12]=e=>p(K).excelExport(o.grid,"게시판"))},t[28]||(t[28]=[n("span",{class:"icon"},"",-1)])),n("div",Z,"총 "+E(o.totalCount)+"건",1)])],32),t[30]||(t[30]=n("div",{id:"grid",class:"grid-container"},null,-1)),d(n("div",h,"조회 내역이 없습니다.",512),[[b,o.list.length===0]]),C(H,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":I},null,8,["currentPage","lastPage"])],64))}});export{at as default};
