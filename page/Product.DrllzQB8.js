import{d as I,r as x,x as H,o as S,e as $,f as t,G as w,w as i,v as p,l as y,p as V,c as E,K as c,J as C,h as N,L as A,A as O,B as K,F as R}from"../index.cLMdUNLg.js";import{H as F,g as r,P as G,e as T}from"./Pagination.BzpTcSJB.js";import{a as b}from"./apiConfig.UvebuRH4.js";import{S as j,a as J}from"./SelectGroupDate.A_rLJbaI.js";import{D as W}from"./Detail.BRtk4mnF.js";import{_ as D}from"./CommonCode.vue_vue_type_script_setup_true_lang.s_JDsD-F.js";import"./dateUtil.DeFK22D6.js";class z{async getProduct(n){return(await b("/pd/getProduct",n||{})).data}async getProductList(n){return(await b("/pd/getProductList",n||{})).data}async setProduct(n){return(await b("/pd/setProduct",n||{})).data}async setProductList(n){return(await b("/pd/setProductList",n||{})).data}}const v=new z,X={class:"detail-content"},Y={class:"detail-scroll"},Z={class:"detail-table"},h=I({__name:"ProductDetail",props:{data:{type:Object,required:!0}},setup(d){const n=d;x({editor:{},editorOption:{}});const m=()=>{n.data.productNo&&v.getProduct({productNo:n.data.productNo}).then(u=>{n.data.productNo=u.data.productNo,n.data.companyId=u.data.companyId,n.data.seasonPriceNo=u.data.seasonPriceNo,n.data.productName=u.data.productName,n.data.headCount=u.data.headCount,n.data.maxHeadCount=u.data.maxHeadCount,n.data.m2=u.data.m2,n.data.isDisplay=u.data.isDisplay,n.data.isPet=u.data.isPet,n.data.isBBQ=u.data.isBBQ,n.data.isPickup=u.data.isPickup,n.data.isStone=u.data.isStone,n.data.memo=u.data.memo,n.data.content=u.data.content,n.data.fileNo=u.data.fileNo,n.data.creator=u.data.creator,n.data.createDt=u.data.createDt,n.data.updater=u.data.updater,n.data.updateDt=u.data.updateDt},u=>{console.log(u)})};return H(()=>{m()}),(u,a)=>(S(),$("div",X,[a[35]||(a[35]=t("h2",null,"상품 상세",-1)),t("div",Y,[t("table",Z,[a[34]||(a[34]=t("caption",null,"상품 상세",-1)),t("tbody",null,[t("tr",null,[a[15]||(a[15]=t("th",{scope:"col"},"상품번호",-1)),t("td",null,w(d.data.productNo),1)]),t("tr",null,[a[16]||(a[16]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>d.data.companyId=e)},null,512),[[p,d.data.companyId]])])]),t("tr",null,[a[17]||(a[17]=t("th",{scope:"col"},"시즌가격번호",-1)),t("td",null,[i(t("input",{type:"number","onUpdate:modelValue":a[1]||(a[1]=e=>d.data.seasonPriceNo=e)},null,512),[[p,d.data.seasonPriceNo]])])]),t("tr",null,[a[18]||(a[18]=t("th",{scope:"col"},"상품명",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>d.data.productName=e)},null,512),[[p,d.data.productName]])])]),t("tr",null,[a[19]||(a[19]=t("th",{scope:"col"},"인원수",-1)),t("td",null,[i(t("input",{type:"number","onUpdate:modelValue":a[3]||(a[3]=e=>d.data.headCount=e)},null,512),[[p,d.data.headCount]])])]),t("tr",null,[a[20]||(a[20]=t("th",{scope:"col"},"최대인원수",-1)),t("td",null,[i(t("input",{type:"number","onUpdate:modelValue":a[4]||(a[4]=e=>d.data.maxHeadCount=e)},null,512),[[p,d.data.maxHeadCount]])])]),t("tr",null,[a[21]||(a[21]=t("th",{scope:"col"},"평형",-1)),t("td",null,[i(t("input",{type:"number","onUpdate:modelValue":a[5]||(a[5]=e=>d.data.m2=e)},null,512),[[p,d.data.m2]])])]),t("tr",null,[a[22]||(a[22]=t("th",{scope:"col"},"전시여부",-1)),t("td",null,[y(D,{cd:"isDisplay",model:d.data.isDisplay,onSetData:a[6]||(a[6]=e=>{d.data.isDisplay=e})},null,8,["model"])])]),t("tr",null,[a[23]||(a[23]=t("th",{scope:"col"},"애완동물여부",-1)),t("td",null,[y(D,{cd:"isPet",model:d.data.isPet,onSetData:a[7]||(a[7]=e=>{d.data.isPet=e})},null,8,["model"])])]),t("tr",null,[a[24]||(a[24]=t("th",{scope:"col"},"바베큐여부",-1)),t("td",null,[y(D,{cd:"isBBQ",model:d.data.isBBQ,onSetData:a[8]||(a[8]=e=>{d.data.isBBQ=e})},null,8,["model"])])]),t("tr",null,[a[25]||(a[25]=t("th",{scope:"col"},"픽업여부",-1)),t("td",null,[y(D,{cd:"isPickup",model:d.data.isPickup,onSetData:a[9]||(a[9]=e=>{d.data.isPickup=e})},null,8,["model"])])]),t("tr",null,[a[26]||(a[26]=t("th",{scope:"col"},"온돌여부",-1)),t("td",null,[y(D,{cd:"isStone",model:d.data.isStone,onSetData:a[10]||(a[10]=e=>{d.data.isStone=e})},null,8,["model"])])]),t("tr",null,[a[27]||(a[27]=t("th",{scope:"col"},"메모",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[11]||(a[11]=e=>d.data.memo=e),required:""},null,512),[[p,d.data.memo]])])]),t("tr",null,[a[28]||(a[28]=t("th",{scope:"col"},"내용",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[12]||(a[12]=e=>d.data.content=e),required:""},null,512),[[p,d.data.content]])])]),t("tr",null,[a[29]||(a[29]=t("th",{scope:"col"},"파일번호",-1)),t("td",null,[i(t("input",{type:"number","onUpdate:modelValue":a[13]||(a[13]=e=>d.data.fileNo=e)},null,512),[[p,d.data.fileNo]])])]),t("tr",null,[a[30]||(a[30]=t("th",{scope:"col"},"등록자",-1)),t("td",null,w(d.data.creator),1)]),t("tr",null,[a[31]||(a[31]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,w(d.data.createDt),1)]),t("tr",null,[a[32]||(a[32]=t("th",{scope:"col"},"수정자",-1)),t("td",null,w(d.data.updater),1)]),t("tr",null,[a[33]||(a[33]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,[i(t("input",{type:"datetime","onUpdate:modelValue":a[14]||(a[14]=e=>d.data.updateDt=e)},null,512),[[p,d.data.updateDt]])])])])])]),a[36]||(a[36]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),_={colspan:"3"},tt={colspan:"3"},at={class:"audit"},ot={colspan:"3"},et={colspan:"3"},dt={class:"btnWrap"},nt={class:"crud"},lt={class:"totalCount"},ut={class:"no-list"},Pt=I({__name:"Product",setup(d){const n=V(null),m=V(!1),u=E(),a=x({companyId:"",productName:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),e=x({required:["companyId","seasonPriceNo","productName","headCount","maxHeadCount","m2","isDisplay","isPet","isBBQ","isPickup","isStone","fileNo"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),B={unique:["productNo"],required:["companyId","seasonPriceNo","productName","headCount","maxHeadCount","m2","isDisplay","isPet","isBBQ","isPickup","isStone","fileNo"]};let U=null;const k=s=>{s==null||s.preventDefault(),f()},f=()=>{v.getProductList({...a,page:e.currentPage,totalPage:e.totalPage}).then(s=>{var o,l,P,g;e.list=(o=s.data)==null?void 0:o.list,e.totalCount=(l=s.data)==null?void 0:l.totalCount,e.currentPage=(P=s.data)==null?void 0:P.currentPage,e.lastPage=(g=s.data)==null?void 0:g.lastPage,e.grid&&e.grid.updateSettings({data:e.list})},s=>{console.log(s)})},L=s=>{e.currentPage=s,f()},q=()=>{const s={...r.commonAddColumns,productNo:"",companyId:"",seasonPriceNo:"",productName:"",headCount:"",maxHeadCount:"",m2:"",isDisplay:"",isPet:"",isBBQ:"",isPickup:"",isStone:"",memo:"",content:"",fileNo:"",...r.auditAddColumns};e.list=r.add({newRow:s,list:e.list,grid:e.grid})},Q=()=>{r.del({selectedRow:U,grid:e.grid})},M=()=>{const s=r.valid({list:e.list,required:B.required});s&&v.setProductList(s).then(()=>{f()})};return H(()=>{const s=document.querySelector("#grid");e.grid=new F(s,{data:e.list,colHeaders:[...r.commonColumnNames,"상품번호","업체아이디","시즌가격번호","상품명","인원수","최대인원수","평형","전시여부","애완동물여부","바베큐여부","픽업여부","온돌여부","메모","내용","파일번호",...r.auditColumnNames],hiddenColumns:r.hiddenColumns([]),columns:[...r.commonColumns,{data:"productNo",type:"numeric",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"seasonPriceNo",type:"numeric",width:150},{data:"productName",type:"text",width:150,className:"underline"},{data:"headCount",type:"numeric",width:150},{data:"maxHeadCount",type:"numeric",width:150},{data:"m2",type:"numeric",width:150},{data:"isDisplay",type:"numeric",width:150},{data:"isPet",type:"numeric",width:150},{data:"isBBQ",type:"numeric",width:150},{data:"isPickup",type:"numeric",width:150},{data:"isStone",type:"numeric",width:150},{data:"memo",type:"text",width:150},{data:"content",type:"text",width:150},{data:"fileNo",type:"numeric",width:150},...r.auditColumns],cells:function(o,l){return r.cellsEvent({row:o,col:l,grid:e.grid,self:this,pk:[]})},afterChange(o,l){r.afterChangeEvent({changes:o,source:l,gridProps:B,grid:e.grid,self:this})},afterSelectionEnd:function(o,l,P,g){U=o},afterOnCellMouseDown:(o,l)=>{const P=e.grid.getColHeader(l.col),g=e.grid.getSourceDataAtRow(l.row);P==="상품명"&&g&&(n.value=g,m.value=!0)},...r.defaultProps}),f()}),(s,o)=>(S(),$(R,null,[t("form",{class:"search",onSubmit:k,onKeyup:A(k,["enter"])},[t("fieldset",null,[o[19]||(o[19]=t("legend",null,"검색",-1)),t("table",null,[o[18]||(o[18]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[i(t("tr",null,[o[12]||(o[12]=t("th",{scope:"row"},"업체아이디",-1)),t("td",_,[i(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>a.companyId=l)},null,512),[[p,a.companyId]])])],512),[[c,C(u).userInfo.companyId==="kaisa"]]),t("tr",null,[o[13]||(o[13]=t("th",{scope:"row"},"상품명",-1)),t("td",tt,[i(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=l=>a.productName=l)},null,512),[[p,a.productName]])])])]),i(t("tbody",at,[t("tr",null,[o[14]||(o[14]=t("th",{scope:"row"},"수정기간",-1)),t("td",ot,[y(j,{format:"yyyy-MM-dd",date:[a.startUpdateDt,a.endUpdateDt],onSetStartDate:o[2]||(o[2]=l=>{a.startUpdateDt=l.date}),onSetEndDate:o[3]||(o[3]=l=>{a.endUpdateDt=l.date})},null,8,["date"])])]),t("tr",null,[o[15]||(o[15]=t("th",{scope:"row"},"등록일",-1)),t("td",et,[y(J,{format:"yyyy-MM-dd",date:[a.createDt],onSetStartDate:o[4]||(o[4]=l=>{a.createDt=l.date})},null,8,["date"])])]),t("tr",null,[o[16]||(o[16]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=l=>a.updater=l)},null,512),[[p,a.updater]])]),o[17]||(o[17]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=l=>a.creator=l)},null,512),[[p,a.creator]])])])],512),[[c,e.audit]])])]),t("div",dt,[t("span",nt,[t("button",{type:"button",class:"button add",onClick:q},o[20]||(o[20]=[t("span",{class:"icon"},"",-1),N("추가")])),t("button",{type:"button",class:"button del",onClick:Q},o[21]||(o[21]=[t("span",{class:"icon"},"",-1),N("삭제")])),t("button",{type:"button",class:"button save",onClick:M},o[22]||(o[22]=[t("span",{class:"icon"},"",-1),N("저장")])),t("button",{type:"button",class:"button reset",onClick:o[7]||(o[7]=l=>C(r).reload())},o[23]||(o[23]=[t("span",{class:"icon"},'"',-1),N("초기화")]))]),t("button",{type:"button",class:"audit",onClick:o[8]||(o[8]=l=>e.audit=!e.audit)},"상세조회"),o[26]||(o[26]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:o[9]||(o[9]=l=>C(r).reload())},o[24]||(o[24]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:o[10]||(o[10]=l=>C(T).excelExport(e.grid,"상품"))},o[25]||(o[25]=[t("span",{class:"icon"},"",-1)])),t("div",lt,"총 "+w(e.totalCount)+"건",1)])],32),o[27]||(o[27]=t("div",{id:"grid",class:"grid-container"},null,-1)),i(t("div",ut,"조회 내역이 없습니다.",512),[[c,e.list.length===0]]),y(G,{currentPage:e.currentPage,lastPage:e.lastPage,"onUpdate:page":L},null,8,["currentPage","lastPage"]),m.value?(S(),O(W,{key:0,component:h,data:n.value,show:m.value,onClose:o[11]||(o[11]=l=>m.value=!1)},null,8,["data","show"])):K("",!0)],64))}});export{Pt as default};
