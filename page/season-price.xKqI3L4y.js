import{d as I,c as q,r as S,x as L,o as V,e as E,f as e,w as l,K as y,J as u,v as p,l as b,h as c,G as M,L as O,F as W}from"../index.qpL_22Hi.js";import{H as $,g as r,P as A,e as B}from"./pagination.CLsXx-Sl.js";import{a as m}from"./api-config.DDt0lwuS.js";import{S as H,a as K}from"./select-group-date.oRe8eu4O.js";import"./date-util.BcAk1-Us.js";class F{async getSeasonPrice(i){return(await m("/od/get-season-price",i||{})).data}async getSeasonPriceList(i){return(await m("/od/get-season-price-list",i||{})).data}async setSeasonPrice(i){return(await m("/od/set-season-price",i||{})).data}async setSeasonPriceList(i){return(await m("/od/set-season-price-list",i||{})).data}}const v=new F,G={colspan:"3"},R={colspan:"3"},T={class:"audit"},J={colspan:"3"},h={colspan:"3"},j={class:"btnWrap"},z={class:"crud"},Q={class:"totalCount"},X={class:"no-list"},st=I({__name:"season-price",setup(D){const i=q(),a=S({companyId:"",seasonPriceName:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),s=S({required:["companyId","seasonPriceName","hotWaterPrice","bbqPrice","headCountOverPrice","petPrice","pickupPrice"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),w={unique:["seasonPriceNo"],required:["companyId","seasonPriceName","hotWaterPrice","bbqPrice","headCountOverPrice","petPrice","pickupPrice"]};let C=null;const f=o=>{o==null||o.preventDefault(),d()},d=()=>{v.getSeasonPriceList({...a,page:s.currentPage,totalPage:s.totalPage}).then(o=>{var t,n,P,g;s.list=(t=o.data)==null?void 0:t.list,s.totalCount=(n=o.data)==null?void 0:n.totalCount,s.currentPage=(P=o.data)==null?void 0:P.currentPage,s.lastPage=(g=o.data)==null?void 0:g.lastPage,s.grid&&s.grid.updateSettings({data:s.list})},o=>{console.log(o)})},x=o=>{s.currentPage=o,d()},k=()=>{const o={...r.commonAddColumns,seasonPriceNo:"",companyId:"",seasonPriceName:"",hotWaterPrice:"",bbqPrice:"",headCountOverPrice:"",petPrice:"",pickupPrice:"",...r.auditAddColumns};s.list=r.add({newRow:o,list:s.list,grid:s.grid})},N=()=>{r.del({selectedRow:C,grid:s.grid})},U=()=>{const o=r.valid({list:s.list,required:w.required});o&&v.setSeasonPriceList(o).then(()=>{d()})};return L(()=>{const o=document.querySelector("#grid");s.grid=new $(o,{data:s.list,colHeaders:[...r.commonColumnNames,"시즌가격번호","업체아이디","시즌가격명","온수요금","바베큐요금","인원초과요금","애완동물요금","픽업요금",...r.auditColumnNames],hiddenColumns:r.hiddenColumns([]),columns:[...r.commonColumns,{data:"seasonPriceNo",type:"numeric",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"seasonPriceName",type:"text",width:150},{data:"hotWaterPrice",type:"numeric",width:150},{data:"bbqPrice",type:"numeric",width:150},{data:"headCountOverPrice",type:"numeric",width:150},{data:"petPrice",type:"numeric",width:150},{data:"pickupPrice",type:"numeric",width:150},...r.auditColumns],cells:function(t,n){return r.cellsEvent({row:t,col:n,grid:s.grid,self:this,pk:[]})},afterChange(t,n){r.afterChangeEvent({changes:t,source:n,gridProps:w,grid:s.grid,self:this})},afterSelectionEnd:function(t,n,P,g){C=t},...r.defaultProps}),d()}),(o,t)=>(V(),E(W,null,[e("form",{class:"search",onSubmit:f,onKeyup:O(f,["enter"])},[e("fieldset",null,[t[18]||(t[18]=e("legend",null,"검색",-1)),e("table",null,[t[17]||(t[17]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[l(e("tr",null,[t[11]||(t[11]=e("th",{scope:"row"},"업체아이디",-1)),e("td",G,[l(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>a.companyId=n)},null,512),[[p,a.companyId]])])],512),[[y,u(i).userInfo.companyId==="kaisa"]]),e("tr",null,[t[12]||(t[12]=e("th",{scope:"row"},"시즌가격명",-1)),e("td",R,[l(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=n=>a.seasonPriceName=n)},null,512),[[p,a.seasonPriceName]])])])]),l(e("tbody",T,[e("tr",null,[t[13]||(t[13]=e("th",{scope:"row"},"수정기간",-1)),e("td",J,[b(H,{format:"yyyy-MM-dd",date:[a.startUpdateDt,a.endUpdateDt],onSetStartDate:t[2]||(t[2]=n=>{a.startUpdateDt=n.date}),onSetEndDate:t[3]||(t[3]=n=>{a.endUpdateDt=n.date})},null,8,["date"])])]),e("tr",null,[t[14]||(t[14]=e("th",{scope:"row"},"등록일",-1)),e("td",h,[b(K,{format:"yyyy-MM-dd",date:[a.createDt],onSetStartDate:t[4]||(t[4]=n=>{a.createDt=n.date})},null,8,["date"])])]),e("tr",null,[t[15]||(t[15]=e("th",{scope:"row"},"수정ID",-1)),e("td",null,[l(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>a.updater=n)},null,512),[[p,a.updater]])]),t[16]||(t[16]=e("th",{scope:"row"},"등록ID",-1)),e("td",null,[l(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=n=>a.creator=n)},null,512),[[p,a.creator]])])])],512),[[y,s.audit]])])]),e("div",j,[e("span",z,[e("button",{type:"button",class:"button add",onClick:k},t[19]||(t[19]=[e("span",{class:"icon"},"",-1),c("추가")])),e("button",{type:"button",class:"button del",onClick:N},t[20]||(t[20]=[e("span",{class:"icon"},"",-1),c("삭제")])),e("button",{type:"button",class:"button save",onClick:U},t[21]||(t[21]=[e("span",{class:"icon"},"",-1),c("저장")])),e("button",{type:"button",class:"button reset",onClick:t[7]||(t[7]=n=>u(r).reload())},t[22]||(t[22]=[e("span",{class:"icon"},'"',-1),c("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[8]||(t[8]=n=>s.audit=!s.audit)},"상세조회"),t[25]||(t[25]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[9]||(t[9]=n=>u(r).reload())},t[23]||(t[23]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[10]||(t[10]=n=>u(B).excelExport(s.grid,"시즌가격"))},t[24]||(t[24]=[e("span",{class:"icon"},"",-1)])),e("div",Q,"총 "+M(s.totalCount)+"건",1)])],32),t[26]||(t[26]=e("div",{id:"grid",class:"grid-container"},null,-1)),l(e("div",X,"조회 내역이 없습니다.",512),[[y,s.list.length===0]]),b(A,{currentPage:s.currentPage,lastPage:s.lastPage,"onUpdate:page":x},null,8,["currentPage","lastPage"])],64))}});export{st as default};
