import{d as k,c as L,r as D,x as V,o as N,e as M,f as e,w as d,v as r,K as b,J as y,l as C,h as m,G as q,L as E,F as H}from"../index.CjFcdXSB.js";import{H as $,g as s,P as A,e as K}from"./Pagination.CWD3qazX.js";import{a as P}from"./apiConfig.APTs6M15.js";import{S as O,a as R}from"./SelectGroupDate.CJyb4tMd.js";import"./dateUtil.DjjUZQ_8.js";class F{async getBoardList(i){return(await P("/pd/getBoardList",i||{})).data}async setBoardList(i){return(await P("/pd/setBoardList",i||{})).data}}const x=new F,G={colspan:"3"},T={colspan:"3"},J={colspan:"3"},W={colspan:"3"},j={class:"audit"},z={colspan:"3"},Q={colspan:"3"},X={class:"btnWrap"},Y={class:"crud"},Z={class:"totalCount"},h={class:"no-list"},at=k({__name:"Board",setup(v){const i=L(),a=D({boardCategoryId:"",companyId:"",title:"",contents:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),o=D({required:["boardCategoryId","companyId","title","contents","isDisplay"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),c={unique:["boardNo"],required:["boardCategoryId","companyId","title","contents","isDisplay"]};let f=null;const w=l=>{l==null||l.preventDefault(),p()},p=()=>{x.getBoardList({...a,page:o.currentPage,totalPage:o.totalPage}).then(l=>{var t,n,g,u;o.list=(t=l.data)==null?void 0:t.list,o.totalCount=(n=l.data)==null?void 0:n.totalCount,o.currentPage=(g=l.data)==null?void 0:g.currentPage,o.lastPage=(u=l.data)==null?void 0:u.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},l=>{console.log(l)})},I=l=>{o.currentPage=l,p()},S=()=>{const l={...s.commonAddColumns,boardNo:"",boardCategoryId:"",companyId:"",title:"",contents:"",isDisplay:"",tag:"",...s.auditAddColumns};o.list=s.add({newRow:l,list:o.list,grid:o.grid})},U=()=>{s.del({selectedRow:f,grid:o.grid})},B=()=>{const l=s.valid({list:o.list,required:c.required});l&&x.setBoardList(l).then(()=>{p()})};return V(()=>{const l=document.querySelector("#grid");o.grid=new $(l,{data:o.list,colHeaders:[...s.commonColumnNames,"게시판번호","게시판카테고리아이디","업체아이디","제목","내용","전시여부","태그",...s.auditColumnNames],hiddenColumns:s.hiddenColumns([]),columns:[...s.commonColumns,{data:"boardNo",type:"numeric",width:150,readOnly:!0},{data:"boardCategoryId",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"title",type:"text",width:150},{data:"contents",type:"text",width:150},{data:"isDisplay",type:"numeric",width:150},{data:"tag",type:"text",width:150},...s.auditColumns],cells:function(t,n){return s.cellsEvent({row:t,col:n,grid:o.grid,self:this,pk:[]})},afterChange(t,n){s.afterChangeEvent({changes:t,source:n,gridProps:c,grid:o.grid,self:this})},afterSelectionEnd:function(t,n,g,u){f=t},afterOnCellMouseDown:(t,n)=>{if(o.grid.getColHeader(n.col)==="제목"){const u=o.grid.getSourceDataAtRow(n.row);console.log("제목 칼럼 클릭:",u)}},...s.defaultProps}),p()}),(l,t)=>(N(),M(H,null,[e("form",{class:"search",onSubmit:w,onKeyup:E(w,["enter"])},[e("fieldset",null,[t[22]||(t[22]=e("legend",null,"검색",-1)),e("table",null,[t[21]||(t[21]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[e("tr",null,[t[13]||(t[13]=e("th",null,"게시판카테고리아이디",-1)),e("td",G,[d(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>a.boardCategoryId=n)},null,512),[[r,a.boardCategoryId]])])]),d(e("tr",null,[t[14]||(t[14]=e("th",null,"업체아이디",-1)),e("td",T,[d(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=n=>a.companyId=n)},null,512),[[r,a.companyId]])])],512),[[b,y(i).userInfo.companyId==="kaisa"]]),e("tr",null,[t[15]||(t[15]=e("th",null,"제목",-1)),e("td",J,[d(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>a.title=n)},null,512),[[r,a.title]])])]),e("tr",null,[t[16]||(t[16]=e("th",null,"내용",-1)),e("td",W,[d(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=n=>a.contents=n)},null,512),[[r,a.contents]])])])]),d(e("tbody",j,[e("tr",null,[t[17]||(t[17]=e("th",null,"수정기간",-1)),e("td",z,[C(O,{format:"yyyy-MM-dd",date:[a.startUpdateDt,a.endUpdateDt],onSetStartDate:t[4]||(t[4]=n=>{a.startUpdateDt=n.date}),onSetEndDate:t[5]||(t[5]=n=>{a.endUpdateDt=n.date})},null,8,["date"])])]),e("tr",null,[t[18]||(t[18]=e("th",null,"등록일",-1)),e("td",Q,[C(R,{format:"yyyy-MM-dd",date:[a.createDt],onSetStartDate:t[6]||(t[6]=n=>{a.createDt=n.date})},null,8,["date"])])]),e("tr",null,[t[19]||(t[19]=e("th",null,"수정ID",-1)),e("td",null,[d(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=n=>a.updater=n)},null,512),[[r,a.updater]])]),t[20]||(t[20]=e("th",null,"등록ID",-1)),e("td",null,[d(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=n=>a.creator=n)},null,512),[[r,a.creator]])])])],512),[[b,o.audit]])])]),e("div",X,[e("span",Y,[e("button",{type:"button",class:"button add",onClick:S},t[23]||(t[23]=[e("span",{class:"icon"},"",-1),m("추가")])),e("button",{type:"button",class:"button del",onClick:U},t[24]||(t[24]=[e("span",{class:"icon"},"",-1),m("삭제")])),e("button",{type:"button",class:"button save",onClick:B},t[25]||(t[25]=[e("span",{class:"icon"},"",-1),m("저장")])),e("button",{type:"button",class:"button reset",onClick:t[9]||(t[9]=n=>y(s).reload())},t[26]||(t[26]=[e("span",{class:"icon"},'"',-1),m("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[10]||(t[10]=n=>o.audit=!o.audit)},"상세조회"),t[29]||(t[29]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[11]||(t[11]=n=>y(s).reload())},t[27]||(t[27]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[12]||(t[12]=n=>y(K).excelExport(o.grid,"게시판"))},t[28]||(t[28]=[e("span",{class:"icon"},"",-1)])),e("div",Z,"총 "+q(o.totalCount)+"건",1)])],32),t[30]||(t[30]=e("div",{id:"grid",class:"grid-container"},null,-1)),d(e("div",h,"조회 내역이 없습니다.",512),[[b,o.list.length===0]]),C(A,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":I},null,8,["currentPage","lastPage"])],64))}});export{at as default};
