import{d as k,c as L,r as S,x as V,o as q,e as E,f as e,w as r,v as u,K as U,J as g,l as y,h as w,G as M,L as $,F as T}from"../index.BiHN_QT9.js";import{H as A,g as d,P as B,e as H}from"./Pagination.D04KymE1.js";import{a as C}from"./apiConfig.Xhj7Bla-.js";import{S as K,a as R}from"./SelectGroupDate.DcEFRv-R.js";import{C as F}from"./CommonCodeRadio.CS0R5ThB.js";import"./dateUtil.CCuh71ce.js";class G{async getUser(l){return(await C("/at/getUser",l||{})).data}async getUserList(l){return(await C("/at/getUserList",l||{})).data}async setUser(l){return(await C("/at/setUser",l||{})).data}async setUserList(l){return(await C("/at/setUserList",l||{})).data}}const c=new G,O={colspan:"3"},J={colspan:"3"},W={colspan:"3"},j={colspan:"3"},z={colspan:"3"},Q={colspan:"3"},X={class:"audit"},Y={colspan:"3"},Z={colspan:"3"},h={class:"btnWrap"},_={class:"crud"},tt={class:"totalCount"},et={class:"no-list"},rt=k({__name:"User",setup(x){const l=L(),s=S({userId:"",companyId:"",userName:"",phoneNo:"",memo:"",userStateCode:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),n=S({required:["userId","companyId","userName","pwd","phoneNo","passwordUpdateDt","loginDt","userStateCode"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),f={unique:["companyId"],required:["userId","companyId","userName","pwd","phoneNo","passwordUpdateDt","loginDt","userStateCode"]};let b=null;const D=a=>{a==null||a.preventDefault(),m()},m=()=>{c.getUserList({...s,page:n.currentPage,totalPage:n.totalPage}).then(a=>{var t,o,i,p;n.list=(t=a.data)==null?void 0:t.list,n.totalCount=(o=a.data)==null?void 0:o.totalCount,n.currentPage=(i=a.data)==null?void 0:i.currentPage,n.lastPage=(p=a.data)==null?void 0:p.lastPage,n.grid&&n.grid.updateSettings({data:n.list})},a=>{console.log(a)})},P=a=>{n.currentPage=a,m()},I=()=>{const a={...d.commonAddColumns,userId:"",companyId:"",userName:"",pwd:"",phoneNo:"",passwordUpdateDt:"",memo:"",loginDt:"",userStateCode:"",...d.auditAddColumns};n.list=d.add({newRow:a,list:n.list,grid:n.grid})},N=()=>{d.del({selectedRow:b,grid:n.grid})},v=()=>{const a=d.valid({list:n.list,required:f.required});a&&c.setUserList(a).then(()=>{m()})};return V(()=>{const a=document.querySelector("#grid");n.grid=new A(a,{data:n.list,colHeaders:[...d.commonColumnNames,"사용자아이디","업체아이디","사용자이름","비밀번호","전화번호","비밀번호수정일시","메모","로그인일시","사용자상태코드",...d.auditColumnNames],hiddenColumns:d.hiddenColumns([]),columns:[...d.commonColumns,{data:"userId",type:"text",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"userName",type:"text",width:150},{data:"pwd",type:"text",width:150},{data:"phoneNo",type:"text",width:150},{data:"passwordUpdateDt",type:"date",width:170,...d.dateTimePickerConfig},{data:"memo",type:"text",width:150},{data:"loginDt",type:"date",width:170,...d.dateTimePickerConfig},{data:"userStateCode",type:"dropdown",width:150,source:function(t,o){var i;o((i=l.codeList.userStateCode)==null?void 0:i.map(p=>p.codeValue))}},...d.auditColumns],cells:function(t,o){return d.cellsEvent({row:t,col:o,grid:n.grid,self:this,pk:[]})},afterChange(t,o){d.afterChangeEvent({changes:t,source:o,gridProps:f,grid:n.grid,self:this})},afterSelectionEnd:function(t,o,i,p){b=t},...d.defaultProps}),m()}),(a,t)=>(q(),E(T,null,[e("form",{class:"search",onSubmit:D,onKeyup:$(D,["enter"])},[e("fieldset",null,[t[26]||(t[26]=e("legend",null,"검색",-1)),e("table",null,[t[25]||(t[25]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[e("tr",null,[t[15]||(t[15]=e("th",{scope:"row"},"사용자아이디",-1)),e("td",O,[r(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.userId=o)},null,512),[[u,s.userId]])])]),r(e("tr",null,[t[16]||(t[16]=e("th",{scope:"row"},"업체아이디",-1)),e("td",J,[r(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>s.companyId=o)},null,512),[[u,s.companyId]])])],512),[[U,g(l).userInfo.companyId==="kaisa"]]),e("tr",null,[t[17]||(t[17]=e("th",{scope:"row"},"사용자이름",-1)),e("td",W,[r(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>s.userName=o)},null,512),[[u,s.userName]])])]),e("tr",null,[t[18]||(t[18]=e("th",{scope:"row"},"전화번호",-1)),e("td",j,[r(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.phoneNo=o)},null,512),[[u,s.phoneNo]])])]),e("tr",null,[t[19]||(t[19]=e("th",{scope:"row"},"메모",-1)),e("td",z,[r(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>s.memo=o)},null,512),[[u,s.memo]])])]),e("tr",null,[t[20]||(t[20]=e("th",{scope:"row"},"사용자상태코드",-1)),e("td",Q,[y(F,{cd:"userStateCode",model:s.userStateCode,onSetData:t[5]||(t[5]=o=>{s.userStateCode=o})},null,8,["model"])])])]),r(e("tbody",X,[e("tr",null,[t[21]||(t[21]=e("th",{scope:"row"},"수정기간",-1)),e("td",Y,[y(K,{format:"yyyy-MM-dd",date:[s.startUpdateDt,s.endUpdateDt],onSetStartDate:t[6]||(t[6]=o=>{s.startUpdateDt=o.date}),onSetEndDate:t[7]||(t[7]=o=>{s.endUpdateDt=o.date})},null,8,["date"])])]),e("tr",null,[t[22]||(t[22]=e("th",{scope:"row"},"등록일",-1)),e("td",Z,[y(R,{format:"yyyy-MM-dd",date:[s.createDt],onSetStartDate:t[8]||(t[8]=o=>{s.createDt=o.date})},null,8,["date"])])]),e("tr",null,[t[23]||(t[23]=e("th",{scope:"row"},"수정ID",-1)),e("td",null,[r(e("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=o=>s.updater=o)},null,512),[[u,s.updater]])]),t[24]||(t[24]=e("th",{scope:"row"},"등록ID",-1)),e("td",null,[r(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=o=>s.creator=o)},null,512),[[u,s.creator]])])])],512),[[U,n.audit]])])]),e("div",h,[e("span",_,[e("button",{type:"button",class:"button add",onClick:I},t[27]||(t[27]=[e("span",{class:"icon"},"",-1),w("추가")])),e("button",{type:"button",class:"button del",onClick:N},t[28]||(t[28]=[e("span",{class:"icon"},"",-1),w("삭제")])),e("button",{type:"button",class:"button save",onClick:v},t[29]||(t[29]=[e("span",{class:"icon"},"",-1),w("저장")])),e("button",{type:"button",class:"button reset",onClick:t[11]||(t[11]=o=>g(d).reload())},t[30]||(t[30]=[e("span",{class:"icon"},'"',-1),w("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[12]||(t[12]=o=>n.audit=!n.audit)},"상세조회"),t[33]||(t[33]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[13]||(t[13]=o=>g(d).reload())},t[31]||(t[31]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[14]||(t[14]=o=>g(H).excelExport(n.grid,"사용자"))},t[32]||(t[32]=[e("span",{class:"icon"},"",-1)])),e("div",tt,"총 "+M(n.totalCount)+"건",1)])],32),t[34]||(t[34]=e("div",{id:"grid",class:"grid-container"},null,-1)),r(e("div",et,"조회 내역이 없습니다.",512),[[U,n.list.length===0]]),y(B,{currentPage:n.currentPage,lastPage:n.lastPage,"onUpdate:page":P},null,8,["currentPage","lastPage"])],64))}});export{rt as default};
