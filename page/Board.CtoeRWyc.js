import{d as U,r as x,x as N,o as b,e as v,f as t,A as E,N as K,t as V,_ as R,c as M,w as m,O as F,G as D,F as O,D as G,J as I,v as g,l as P,p as q,K as $,h as B,L as j,B as z}from"../index.DmO2ifJu.js";import{g as u,H as J,P as W,e as Q}from"./Pagination.B6BDlxng.js";import{a as S}from"./apiConfig.BDIhlACd.js";import{S as X,a as Y}from"./SelectGroupDate.DrGs-SkN.js";import"./dateUtil.BLZ8m-3E.js";class Z{async getBoard(n){return(await S("/pd/getBoard",n||{})).data}async getBoardList(n){return(await S("/pd/getBoardList",n||{})).data}async setBoard(n){return(await S("/pd/setBoard",n||{})).data}async setBoardList(n){return(await S("/pd/setBoardList",n||{})).data}}const L=new Z,h=U({__name:"Detail",props:{component:{},data:{},show:{type:Boolean}},emits:["close"],setup(s,{emit:n}){const p=s,y=x({show:p.show,open:!1}),d=n,e=()=>{y.open=!1,setTimeout(()=>{d("close")},200)};return N(()=>{setTimeout(()=>{y.open=!0},100)}),(o,i)=>(b(),v("div",{class:V(["detail-container",{on:y.show}])},[t("div",{class:V(["detail-wrapper",{on:y.open}])},[t("div",{class:"detail-close icon",onClick:e},""),(b(),E(K(o.component),{data:p.data},null,8,["data"]))],2),t("div",{class:V(["detail-dimmed",{on:y.open}]),onClick:e},null,2)],2))}}),_=R(h,[["__scopeId","data-v-da9264e6"]]),tt={disabled:"",value:""},at=["value"],et=U({__name:"CommonCode",props:{cd:{type:String,required:!0},model:{type:String,required:!0},default:{type:String,default:"선택하세요."}},emits:["set-data"],setup(s,{emit:n}){const p=M(),y=n,d=s,e=x({value:d.model}),o=()=>{y("set-data",e.value)};return N(()=>{}),(i,w)=>m((b(),v("select",{"onUpdate:modelValue":w[0]||(w[0]=c=>e.value=c),onChange:o},[t("option",tt,D(d.default),1),(b(!0),v(O,null,G(I(p).codeList[d.cd],(c,k)=>(b(),v("option",{key:k,value:c.codeValue},D(c.codeName),9,at))),128))],544)),[[F,e.value]])}}),ot={class:"detail-content"},lt={class:"detail-scroll"},nt={class:"detail-table"},dt=U({__name:"BoardDetail",props:{data:{type:Object,required:!0}},setup(s){const n=s,p=x({editor:{},editorOption:{}}),y=()=>{p.editor=u.createEditor({name:"#BoardEditor",cnts:n.data})},d=()=>{n.data.boardNo?L.getBoard({boardNo:n.data.boardNo}).then(e=>{n.data.boardNo=e.data.boardNo,n.data.boardCategoryId=e.data.boardCategoryId,n.data.companyId=e.data.companyId,n.data.title=e.data.title,n.data.contents=e.data.contents,n.data.isDisplay=e.data.isDisplay,n.data.tag=e.data.tag,n.data.creator=e.data.creator,n.data.createDt=e.data.createDt,n.data.updater=e.data.updater,n.data.updateDt=e.data.updateDt,y()},e=>{console.log(e)}):y()};return N(()=>{d()}),(e,o)=>(b(),v("div",ot,[o[19]||(o[19]=t("h2",null,"게시판 상세",-1)),t("div",lt,[t("table",nt,[o[18]||(o[18]=t("caption",null,"게시판 상세",-1)),t("tbody",null,[t("tr",null,[o[6]||(o[6]=t("th",{scope:"col"},"게시판번호",-1)),t("td",null,D(s.data.boardNo),1)]),t("tr",null,[o[7]||(o[7]=t("th",{scope:"col"},"게시판카테고리아이디",-1)),t("td",null,[m(t("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=i=>s.data.boardCategoryId=i)},null,512),[[g,s.data.boardCategoryId]])])]),t("tr",null,[o[8]||(o[8]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=i=>s.data.companyId=i)},null,512),[[g,s.data.companyId]])])]),t("tr",null,[o[9]||(o[9]=t("th",{scope:"col"},"제목",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=i=>s.data.title=i)},null,512),[[g,s.data.title]])])]),o[16]||(o[16]=t("tr",null,[t("th",{scope:"col",colspan:"2"},"내용")],-1)),o[17]||(o[17]=t("tr",null,[t("td",{colspan:"2"},[t("div",{id:"BoardEditor"})])],-1)),t("tr",null,[o[10]||(o[10]=t("th",{scope:"col"},"전시여부",-1)),t("td",null,[P(et,{cd:"isDisplay",model:s.data.isDisplay,onSetData:o[3]||(o[3]=i=>{s.data.isDisplay=i})},null,8,["model"])])]),t("tr",null,[o[11]||(o[11]=t("th",{scope:"col"},"태그",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=i=>s.data.tag=i),required:""},null,512),[[g,s.data.tag]])])]),t("tr",null,[o[12]||(o[12]=t("th",{scope:"col"},"등록자",-1)),t("td",null,D(s.data.creator),1)]),t("tr",null,[o[13]||(o[13]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,D(s.data.createDt),1)]),t("tr",null,[o[14]||(o[14]=t("th",{scope:"col"},"수정자",-1)),t("td",null,D(s.data.updater),1)]),t("tr",null,[o[15]||(o[15]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,[m(t("input",{type:"datetime","onUpdate:modelValue":o[5]||(o[5]=i=>s.data.updateDt=i)},null,512),[[g,s.data.updateDt]])])])])])]),o[20]||(o[20]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),st={colspan:"3"},rt={colspan:"3"},it={colspan:"3"},ut={class:"audit"},pt={colspan:"3"},mt={colspan:"3"},yt={class:"btnWrap"},gt={class:"crud"},ct={class:"totalCount"},bt={class:"no-list"},It=U({__name:"Board",setup(s){const n=q(null),p=q(!1),y=M(),d=x({boardCategoryId:"",companyId:"",title:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),e=x({required:["boardCategoryId","companyId","title","isDisplay"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),o={unique:["boardNo"],required:["boardCategoryId","companyId","title","isDisplay"]};let i=null;const w=r=>{r==null||r.preventDefault(),c()},c=()=>{L.getBoardList({...d,page:e.currentPage,totalPage:e.totalPage}).then(r=>{var a,l,f,C;e.list=(a=r.data)==null?void 0:a.list,e.totalCount=(l=r.data)==null?void 0:l.totalCount,e.currentPage=(f=r.data)==null?void 0:f.currentPage,e.lastPage=(C=r.data)==null?void 0:C.lastPage,e.grid&&e.grid.updateSettings({data:e.list})},r=>{console.log(r)})},k=r=>{e.currentPage=r,c()},A=()=>{const r={...u.commonAddColumns,boardNo:"",boardCategoryId:"",companyId:"",title:"",isDisplay:"",tag:"",...u.auditAddColumns};e.list=u.add({newRow:r,list:e.list,grid:e.grid})},H=()=>{u.del({selectedRow:i,grid:e.grid})},T=()=>{const r=u.valid({list:e.list,required:o.required});r&&L.setBoardList(r).then(()=>{c()})};return N(()=>{const r=document.querySelector("#grid");e.grid=new J(r,{data:e.list,colHeaders:[...u.commonColumnNames,"게시판번호","게시판카테고리아이디","업체아이디","제목","전시여부","태그",...u.auditColumnNames],hiddenColumns:u.hiddenColumns([]),columns:[...u.commonColumns,{data:"boardNo",type:"numeric",width:150,readOnly:!0},{data:"boardCategoryId",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"title",type:"text",width:150,className:"underline"},{data:"isDisplay",type:"numeric",width:150},{data:"tag",type:"text",width:150},...u.auditColumns],cells:function(a,l){return u.cellsEvent({row:a,col:l,grid:e.grid,self:this,pk:[]})},afterChange(a,l){u.afterChangeEvent({changes:a,source:l,gridProps:o,grid:e.grid,self:this})},afterSelectionEnd:function(a,l,f,C){i=a},afterOnCellMouseDown:(a,l)=>{const f=e.grid.getColHeader(l.col),C=e.grid.getSourceDataAtRow(l.row);f==="제목"&&C&&(n.value=C,p.value=!0)},...u.defaultProps}),c()}),(r,a)=>(b(),v(O,null,[t("form",{class:"search",onSubmit:w,onKeyup:j(w,["enter"])},[t("fieldset",null,[a[21]||(a[21]=t("legend",null,"검색",-1)),t("table",null,[a[20]||(a[20]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[a[13]||(a[13]=t("th",{scope:"row"},"게시판카테고리아이디",-1)),t("td",st,[m(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=l=>d.boardCategoryId=l)},null,512),[[g,d.boardCategoryId]])])]),m(t("tr",null,[a[14]||(a[14]=t("th",{scope:"row"},"업체아이디",-1)),t("td",rt,[m(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=l=>d.companyId=l)},null,512),[[g,d.companyId]])])],512),[[$,I(y).userInfo.companyId==="kaisa"]]),t("tr",null,[a[15]||(a[15]=t("th",{scope:"row"},"제목",-1)),t("td",it,[m(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=l=>d.title=l)},null,512),[[g,d.title]])])])]),m(t("tbody",ut,[t("tr",null,[a[16]||(a[16]=t("th",{scope:"row"},"수정기간",-1)),t("td",pt,[P(X,{format:"yyyy-MM-dd",date:[d.startUpdateDt,d.endUpdateDt],onSetStartDate:a[3]||(a[3]=l=>{d.startUpdateDt=l.date}),onSetEndDate:a[4]||(a[4]=l=>{d.endUpdateDt=l.date})},null,8,["date"])])]),t("tr",null,[a[17]||(a[17]=t("th",{scope:"row"},"등록일",-1)),t("td",mt,[P(Y,{format:"yyyy-MM-dd",date:[d.createDt],onSetStartDate:a[5]||(a[5]=l=>{d.createDt=l.date})},null,8,["date"])])]),t("tr",null,[a[18]||(a[18]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=l=>d.updater=l)},null,512),[[g,d.updater]])]),a[19]||(a[19]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[m(t("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=l=>d.creator=l)},null,512),[[g,d.creator]])])])],512),[[$,e.audit]])])]),t("div",yt,[t("span",gt,[t("button",{type:"button",class:"button add",onClick:A},a[22]||(a[22]=[t("span",{class:"icon"},"",-1),B("추가")])),t("button",{type:"button",class:"button del",onClick:H},a[23]||(a[23]=[t("span",{class:"icon"},"",-1),B("삭제")])),t("button",{type:"button",class:"button save",onClick:T},a[24]||(a[24]=[t("span",{class:"icon"},"",-1),B("저장")])),t("button",{type:"button",class:"button reset",onClick:a[8]||(a[8]=l=>I(u).reload())},a[25]||(a[25]=[t("span",{class:"icon"},'"',-1),B("초기화")]))]),t("button",{type:"button",class:"audit",onClick:a[9]||(a[9]=l=>e.audit=!e.audit)},"상세조회"),a[28]||(a[28]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:a[10]||(a[10]=l=>I(u).reload())},a[26]||(a[26]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:a[11]||(a[11]=l=>I(Q).excelExport(e.grid,"게시판"))},a[27]||(a[27]=[t("span",{class:"icon"},"",-1)])),t("div",ct,"총 "+D(e.totalCount)+"건",1)])],32),a[29]||(a[29]=t("div",{id:"grid",class:"grid-container"},null,-1)),m(t("div",bt,"조회 내역이 없습니다.",512),[[$,e.list.length===0]]),P(W,{currentPage:e.currentPage,lastPage:e.lastPage,"onUpdate:page":k},null,8,["currentPage","lastPage"]),p.value?(b(),E(_,{key:0,component:dt,data:n.value,show:p.value,onClose:a[12]||(a[12]=l=>p.value=!1)},null,8,["data","show"])):z("",!0)],64))}});export{It as default};
