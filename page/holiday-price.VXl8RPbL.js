import{d as h,c as H,r as D,x as I,o as M,e as N,f as o,l as y,J as u,w as i,K as f,v as g,h as c,G as L,L as q,F as E}from"../index.qpL_22Hi.js";import{H as $,g as n,P as Y,e as A}from"./pagination.CLsXx-Sl.js";import{a as C}from"./api-config.DDt0lwuS.js";import{d as B}from"./date-util.BcAk1-Us.js";import{S as K,a as R,V as F}from"./select-group-date.oRe8eu4O.js";import{C as G}from"./common-code-radio.Dx3Y5kbu.js";class O{async getHolidayPrice(s){return(await C("/od/get-holiday-price",s||{})).data}async getHolidayPriceList(s){return(await C("/od/get-holiday-price-list",s||{})).data}async setHolidayPrice(s){return(await C("/od/set-holiday-price",s||{})).data}async setHolidayPriceList(s){return(await C("/od/set-holiday-price-list",s||{})).data}}const v=new O,T={colspan:"3"},J={colspan:"3"},W={colspan:"3"},j={colspan:"3"},z={class:"audit"},Q={colspan:"3"},X={colspan:"3"},Z={class:"btnWrap"},_={class:"crud"},tt={class:"totalCount"},ot={class:"no-list"},it=h({__name:"holiday-price",setup(x){const s=H(),l=D({holiday:"",companyId:"",holidayName:"",holidayCode:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),a=D({required:["holiday","companyId","price","holidayCode"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),w={unique:["holiday"],required:["holiday","companyId","price","holidayCode"]};let P=null;const b=d=>{d==null||d.preventDefault(),m()},m=()=>{v.getHolidayPriceList({...l,page:a.currentPage,totalPage:a.totalPage}).then(d=>{var t,e,r,p;a.list=(t=d.data)==null?void 0:t.list,a.totalCount=(e=d.data)==null?void 0:e.totalCount,a.currentPage=(r=d.data)==null?void 0:r.currentPage,a.lastPage=(p=d.data)==null?void 0:p.lastPage,a.grid&&a.grid.updateSettings({data:a.list})},d=>{console.log(d)})},S=d=>{a.currentPage=d,m()},U=()=>{const d={...n.commonAddColumns,holiday:"",companyId:"",holidayName:"",price:"",holidayCode:"",...n.auditAddColumns};a.list=n.add({newRow:d,list:a.list,grid:a.grid})},k=()=>{n.del({selectedRow:P,grid:a.grid})},V=()=>{const d=n.valid({list:a.list,required:w.required});d&&v.setHolidayPriceList(d).then(()=>{m()})};return I(()=>{const d=document.querySelector("#grid");a.grid=new $(d,{data:a.list,colHeaders:[...n.commonColumnNames,"휴일","업체아이디","휴일명","가격","휴일코드",...n.auditColumnNames],hiddenColumns:n.hiddenColumns([]),columns:[...n.commonColumns,{data:"holiday",type:"date",width:170,readOnly:!0,...n.datePickerConfig},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"holidayName",type:"text",width:150},{data:"price",type:"numeric",width:150},{data:"holidayCode",type:"dropdown",width:150,source:function(t,e){var r;e((r=s.codeList.holidayCode)==null?void 0:r.map(p=>p.codeValue))}},...n.auditColumns],cells:function(t,e){return n.cellsEvent({row:t,col:e,grid:a.grid,self:this,pk:[]})},afterChange(t,e){n.afterChangeEvent({changes:t,source:e,gridProps:w,grid:a.grid,self:this})},afterSelectionEnd:function(t,e,r,p){P=t},...n.defaultProps}),m()}),(d,t)=>(M(),N(E,null,[o("form",{class:"search",onSubmit:b,onKeyup:q(b,["enter"])},[o("fieldset",null,[t[23]||(t[23]=o("legend",null,"검색",-1)),o("table",null,[t[22]||(t[22]=o("colgroup",null,[o("col",{style:{width:"80px"}}),o("col",{style:{width:"30%"}}),o("col",{style:{width:"80px"}}),o("col")],-1)),o("tbody",null,[o("tr",null,[t[14]||(t[14]=o("th",{scope:"row"},"휴일",-1)),o("td",T,[y(u(F),{modelValue:l.holiday,"onUpdate:modelValue":[t[0]||(t[0]=e=>l.holiday=e),t[1]||(t[1]=e=>{l.holiday=u(B).format(e,"YYYY-MM-DD")})],locale:"ko",format:"yyyy-MM-dd",style:{width:"160px"},class:"input"},null,8,["modelValue"])])]),i(o("tr",null,[t[15]||(t[15]=o("th",{scope:"row"},"업체아이디",-1)),o("td",J,[i(o("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.companyId=e)},null,512),[[g,l.companyId]])])],512),[[f,u(s).userInfo.companyId==="kaisa"]]),o("tr",null,[t[16]||(t[16]=o("th",{scope:"row"},"휴일명",-1)),o("td",W,[i(o("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.holidayName=e)},null,512),[[g,l.holidayName]])])]),o("tr",null,[t[17]||(t[17]=o("th",{scope:"row"},"휴일코드",-1)),o("td",j,[y(G,{cd:"holidayCode",model:l.holidayCode,onSetData:t[4]||(t[4]=e=>{l.holidayCode=e})},null,8,["model"])])])]),i(o("tbody",z,[o("tr",null,[t[18]||(t[18]=o("th",{scope:"row"},"수정기간",-1)),o("td",Q,[y(K,{format:"yyyy-MM-dd",date:[l.startUpdateDt,l.endUpdateDt],onSetStartDate:t[5]||(t[5]=e=>{l.startUpdateDt=e.date}),onSetEndDate:t[6]||(t[6]=e=>{l.endUpdateDt=e.date})},null,8,["date"])])]),o("tr",null,[t[19]||(t[19]=o("th",{scope:"row"},"등록일",-1)),o("td",X,[y(R,{format:"yyyy-MM-dd",date:[l.createDt],onSetStartDate:t[7]||(t[7]=e=>{l.createDt=e.date})},null,8,["date"])])]),o("tr",null,[t[20]||(t[20]=o("th",{scope:"row"},"수정ID",-1)),o("td",null,[i(o("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>l.updater=e)},null,512),[[g,l.updater]])]),t[21]||(t[21]=o("th",{scope:"row"},"등록ID",-1)),o("td",null,[i(o("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>l.creator=e)},null,512),[[g,l.creator]])])])],512),[[f,a.audit]])])]),o("div",Z,[o("span",_,[o("button",{type:"button",class:"button add",onClick:U},t[24]||(t[24]=[o("span",{class:"icon"},"",-1),c("추가")])),o("button",{type:"button",class:"button del",onClick:k},t[25]||(t[25]=[o("span",{class:"icon"},"",-1),c("삭제")])),o("button",{type:"button",class:"button save",onClick:V},t[26]||(t[26]=[o("span",{class:"icon"},"",-1),c("저장")])),o("button",{type:"button",class:"button reset",onClick:t[10]||(t[10]=e=>u(n).reload())},t[27]||(t[27]=[o("span",{class:"icon"},'"',-1),c("초기화")]))]),o("button",{type:"button",class:"audit",onClick:t[11]||(t[11]=e=>a.audit=!a.audit)},"상세조회"),t[30]||(t[30]=o("button",{type:"submit",class:"button3"},[o("span",{class:"icon"},"")],-1)),o("button",{type:"reset",onClick:t[12]||(t[12]=e=>u(n).reload())},t[28]||(t[28]=[o("span",{class:"icon"},'"',-1)])),o("button",{type:"button",class:"button excel",onClick:t[13]||(t[13]=e=>u(A).excelExport(a.grid,"휴일가격"))},t[29]||(t[29]=[o("span",{class:"icon"},"",-1)])),o("div",tt,"총 "+L(a.totalCount)+"건",1)])],32),t[31]||(t[31]=o("div",{id:"grid",class:"grid-container"},null,-1)),i(o("div",ot,"조회 내역이 없습니다.",512),[[f,a.list.length===0]]),y(Y,{currentPage:a.currentPage,lastPage:a.lastPage,"onUpdate:page":S},null,8,["currentPage","lastPage"])],64))}});export{it as default};
