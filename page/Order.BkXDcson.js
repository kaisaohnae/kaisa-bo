import{d as V,c as O,r as v,x as L,o as B,e as I,f as e,w as l,v as p,K as C,J as m,l as y,h as c,G as M,L as q,F as H}from"../index.DmO2ifJu.js";import{H as E,g as s,P as W,e as $}from"./Pagination.B6BDlxng.js";import{a as w}from"./apiConfig.BDIhlACd.js";import{d as Q}from"./dateUtil.BLZ8m-3E.js";import{S as Y,a as A,V as K}from"./SelectGroupDate.DrGs-SkN.js";import{C as R}from"./CommonCodeRadio.BCvbAM9-.js";class h{async getOrder(n){return(await w("/od/getOrder",n||{})).data}async getOrderList(n){return(await w("/od/getOrderList",n||{})).data}async setOrder(n){return(await w("/od/setOrder",n||{})).data}async setOrderList(n){return(await w("/od/setOrderList",n||{})).data}}const N=new h,F={colspan:"3"},G={colspan:"3"},T={colspan:"3"},J={colspan:"3"},j={colspan:"3"},z={colspan:"3"},X={colspan:"3"},Z={class:"audit"},_={colspan:"3"},tt={colspan:"3"},et={class:"btnWrap"},ot={class:"crud"},dt={class:"totalCount"},rt={class:"no-list"},pt=V({__name:"Order",setup(b){const n=O(),d=v({orderNo:"",companyId:"",reserveDay:"",orderStateCode:"",phoneNo:"",orderName:"",email:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),r=v({required:["companyId","productNo","reserveDay","orderStateCode","phoneNo","orderName","price","addPrice","salePrice","headCount","isHotWater","isPickup","isBBQ","isPet"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),P={unique:["orderNo"],required:["companyId","productNo","reserveDay","orderStateCode","phoneNo","orderName","price","addPrice","salePrice","headCount","isHotWater","isPickup","isBBQ","isPet"]};let f=null;const D=a=>{a==null||a.preventDefault(),g()},g=()=>{N.getOrderList({...d,page:r.currentPage,totalPage:r.totalPage}).then(a=>{var t,o,i,u;r.list=(t=a.data)==null?void 0:t.list,r.totalCount=(o=a.data)==null?void 0:o.totalCount,r.currentPage=(i=a.data)==null?void 0:i.currentPage,r.lastPage=(u=a.data)==null?void 0:u.lastPage,r.grid&&r.grid.updateSettings({data:r.list})},a=>{console.log(a)})},S=a=>{r.currentPage=a,g()},x=()=>{const a={...s.commonAddColumns,orderNo:"",companyId:"",productNo:"",reserveDay:"",orderStateCode:"",reserveCode:"",phoneNo:"",orderName:"",email:"",price:"",addPrice:"",salePrice:"",headCount:"",isHotWater:"",isPickup:"",isBBQ:"",isPet:"",memo:"",...s.auditAddColumns};r.list=s.add({newRow:a,list:r.list,grid:r.grid})},U=()=>{s.del({selectedRow:f,grid:r.grid})},k=()=>{const a=s.valid({list:r.list,required:P.required});a&&N.setOrderList(a).then(()=>{g()})};return L(()=>{const a=document.querySelector("#grid");r.grid=new E(a,{data:r.list,colHeaders:[...s.commonColumnNames,"주문번호","업체아이디","상품번호","예약일","주문상태코드","예약코드","전화번호","이름","이메일","가격","추가요금","할인요금","인원수","온수여부","픽업여부","바베큐여부","애완동물여부","메모",...s.auditColumnNames],hiddenColumns:s.hiddenColumns([]),columns:[...s.commonColumns,{data:"orderNo",type:"numeric",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"productNo",type:"numeric",width:150},{data:"reserveDay",type:"date",width:170,...s.datePickerConfig},{data:"orderStateCode",type:"dropdown",width:150,source:function(t,o){var i;o((i=n.codeList.orderStateCode)==null?void 0:i.map(u=>u.codeValue))}},{data:"reserveCode",type:"dropdown",width:150,source:function(t,o){var i;o((i=n.codeList.reserveCode)==null?void 0:i.map(u=>u.codeValue))}},{data:"phoneNo",type:"text",width:150},{data:"orderName",type:"text",width:150},{data:"email",type:"text",width:150},{data:"price",type:"numeric",width:150},{data:"addPrice",type:"numeric",width:150},{data:"salePrice",type:"numeric",width:150},{data:"headCount",type:"numeric",width:150},{data:"isHotWater",type:"numeric",width:150},{data:"isPickup",type:"numeric",width:150},{data:"isBBQ",type:"numeric",width:150},{data:"isPet",type:"numeric",width:150},{data:"memo",type:"text",width:150},...s.auditColumns],cells:function(t,o){return s.cellsEvent({row:t,col:o,grid:r.grid,self:this,pk:[]})},afterChange(t,o){s.afterChangeEvent({changes:t,source:o,gridProps:P,grid:r.grid,self:this})},afterSelectionEnd:function(t,o,i,u){f=t},...s.defaultProps}),g()}),(a,t)=>(B(),I(H,null,[e("form",{class:"search",onSubmit:D,onKeyup:q(D,["enter"])},[e("fieldset",null,[t[29]||(t[29]=e("legend",null,"검색",-1)),e("table",null,[t[28]||(t[28]=e("colgroup",null,[e("col",{style:{width:"80px"}}),e("col",{style:{width:"30%"}}),e("col",{style:{width:"80px"}}),e("col")],-1)),e("tbody",null,[e("tr",null,[t[17]||(t[17]=e("th",{scope:"row"},"주문번호",-1)),e("td",F,[l(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>d.orderNo=o)},null,512),[[p,d.orderNo]])])]),l(e("tr",null,[t[18]||(t[18]=e("th",{scope:"row"},"업체아이디",-1)),e("td",G,[l(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>d.companyId=o)},null,512),[[p,d.companyId]])])],512),[[C,m(n).userInfo.companyId==="kaisa"]]),e("tr",null,[t[19]||(t[19]=e("th",{scope:"row"},"예약일",-1)),e("td",T,[y(m(K),{modelValue:d.reserveDay,"onUpdate:modelValue":[t[2]||(t[2]=o=>d.reserveDay=o),t[3]||(t[3]=o=>{d.reserveDay=m(Q).format(o,"YYYY-MM-DD")})],locale:"ko",format:"yyyy-MM-dd",style:{width:"160px"},class:"input"},null,8,["modelValue"])])]),e("tr",null,[t[20]||(t[20]=e("th",{scope:"row"},"주문상태코드",-1)),e("td",J,[y(R,{cd:"orderStateCode",model:d.orderStateCode,onSetData:t[4]||(t[4]=o=>{d.orderStateCode=o})},null,8,["model"])])]),e("tr",null,[t[21]||(t[21]=e("th",{scope:"row"},"전화번호",-1)),e("td",j,[l(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>d.phoneNo=o)},null,512),[[p,d.phoneNo]])])]),e("tr",null,[t[22]||(t[22]=e("th",{scope:"row"},"이름",-1)),e("td",z,[l(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>d.orderName=o)},null,512),[[p,d.orderName]])])]),e("tr",null,[t[23]||(t[23]=e("th",{scope:"row"},"이메일",-1)),e("td",X,[l(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>d.email=o)},null,512),[[p,d.email]])])])]),l(e("tbody",Z,[e("tr",null,[t[24]||(t[24]=e("th",{scope:"row"},"수정기간",-1)),e("td",_,[y(Y,{format:"yyyy-MM-dd",date:[d.startUpdateDt,d.endUpdateDt],onSetStartDate:t[8]||(t[8]=o=>{d.startUpdateDt=o.date}),onSetEndDate:t[9]||(t[9]=o=>{d.endUpdateDt=o.date})},null,8,["date"])])]),e("tr",null,[t[25]||(t[25]=e("th",{scope:"row"},"등록일",-1)),e("td",tt,[y(A,{format:"yyyy-MM-dd",date:[d.createDt],onSetStartDate:t[10]||(t[10]=o=>{d.createDt=o.date})},null,8,["date"])])]),e("tr",null,[t[26]||(t[26]=e("th",{scope:"row"},"수정ID",-1)),e("td",null,[l(e("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=o=>d.updater=o)},null,512),[[p,d.updater]])]),t[27]||(t[27]=e("th",{scope:"row"},"등록ID",-1)),e("td",null,[l(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=o=>d.creator=o)},null,512),[[p,d.creator]])])])],512),[[C,r.audit]])])]),e("div",et,[e("span",ot,[e("button",{type:"button",class:"button add",onClick:x},t[30]||(t[30]=[e("span",{class:"icon"},"",-1),c("추가")])),e("button",{type:"button",class:"button del",onClick:U},t[31]||(t[31]=[e("span",{class:"icon"},"",-1),c("삭제")])),e("button",{type:"button",class:"button save",onClick:k},t[32]||(t[32]=[e("span",{class:"icon"},"",-1),c("저장")])),e("button",{type:"button",class:"button reset",onClick:t[13]||(t[13]=o=>m(s).reload())},t[33]||(t[33]=[e("span",{class:"icon"},'"',-1),c("초기화")]))]),e("button",{type:"button",class:"audit",onClick:t[14]||(t[14]=o=>r.audit=!r.audit)},"상세조회"),t[36]||(t[36]=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),e("button",{type:"reset",onClick:t[15]||(t[15]=o=>m(s).reload())},t[34]||(t[34]=[e("span",{class:"icon"},'"',-1)])),e("button",{type:"button",class:"button excel",onClick:t[16]||(t[16]=o=>m($).excelExport(r.grid,"주문"))},t[35]||(t[35]=[e("span",{class:"icon"},"",-1)])),e("div",dt,"총 "+M(r.totalCount)+"건",1)])],32),t[37]||(t[37]=e("div",{id:"grid",class:"grid-container"},null,-1)),l(e("div",rt,"조회 내역이 없습니다.",512),[[C,r.list.length===0]]),y(W,{currentPage:r.currentPage,lastPage:r.lastPage,"onUpdate:page":S},null,8,["currentPage","lastPage"])],64))}});export{pt as default};
