import{d as k,r as v,x as T,o as x,e as q,f as t,G as c,l as f,w as p,v as g,p as I,c as A,K as V,h as w,J as D,L as B,A as H,B as O,F as K}from"../index.qpL_22Hi.js";import{H as R,g as r,P as F,e as G}from"./pagination.CLsXx-Sl.js";import{a as b}from"./api-config.DDt0lwuS.js";import{S as j,a as J}from"./select-group-date.oRe8eu4O.js";import{D as W}from"./detail.B9sbWCla.js";import{_ as z}from"./common-code.vue_vue_type_script_setup_true_lang.DqUFMfvb.js";import"./date-util.BcAk1-Us.js";class Q{async getCompany(l){return(await b("/at/get-company",l||{})).data}async getCompanyList(l){return(await b("/at/get-company-list",l||{})).data}async setCompany(l){return(await b("/at/set-company",l||{})).data}async setCompanyList(l){return(await b("/at/set-company-list",l||{})).data}}const N=new Q,X={class:"detail-content"},Y={class:"detail-scroll"},Z={class:"detail-table"},h=k({__name:"company-detail",props:{data:{type:Object,required:!0}},setup(d){const l=d;v({editor:{},editorOption:{}});const i=()=>{l.data.companyId&&N.getCompany({companyId:l.data.companyId}).then(u=>{l.data.companyId=u.data.companyId,l.data.companyTypeCode=u.data.companyTypeCode,l.data.companyName=u.data.companyName,l.data.lttd=u.data.lttd,l.data.lotd=u.data.lotd,l.data.address=u.data.address,l.data.phoneNo=u.data.phoneNo,l.data.creator=u.data.creator,l.data.createDt=u.data.createDt,l.data.updater=u.data.updater,l.data.updateDt=u.data.updateDt},u=>{console.log(u)})};return T(()=>{i()}),(u,e)=>(x(),q("div",X,[e[18]||(e[18]=t("h2",null,"업체 상세",-1)),t("div",Y,[t("table",Z,[e[17]||(e[17]=t("caption",null,"업체 상세",-1)),t("tbody",null,[t("tr",null,[e[6]||(e[6]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,c(d.data.companyId),1)]),t("tr",null,[e[7]||(e[7]=t("th",{scope:"col"},"업체유형코드",-1)),t("td",null,[f(z,{cd:"companyTypeCode",model:d.data.companyTypeCode,onSetData:e[0]||(e[0]=o=>{d.data.companyTypeCode=o})},null,8,["model"])])]),t("tr",null,[e[8]||(e[8]=t("th",{scope:"col"},"업체명",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>d.data.companyName=o)},null,512),[[g,d.data.companyName]])])]),t("tr",null,[e[9]||(e[9]=t("th",{scope:"col"},"위도",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>d.data.lttd=o),required:""},null,512),[[g,d.data.lttd]])])]),t("tr",null,[e[10]||(e[10]=t("th",{scope:"col"},"경도",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>d.data.lotd=o),required:""},null,512),[[g,d.data.lotd]])])]),t("tr",null,[e[11]||(e[11]=t("th",{scope:"col"},"주소",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=o=>d.data.address=o),required:""},null,512),[[g,d.data.address]])])]),t("tr",null,[e[12]||(e[12]=t("th",{scope:"col"},"전화번호",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=o=>d.data.phoneNo=o)},null,512),[[g,d.data.phoneNo]])])]),t("tr",null,[e[13]||(e[13]=t("th",{scope:"col"},"등록자",-1)),t("td",null,c(d.data.creator),1)]),t("tr",null,[e[14]||(e[14]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,c(d.data.createDt),1)]),t("tr",null,[e[15]||(e[15]=t("th",{scope:"col"},"수정자",-1)),t("td",null,c(d.data.updater),1)]),t("tr",null,[e[16]||(e[16]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,c(d.data.updateDt),1)])])])]),e[19]||(e[19]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),_={colspan:"3"},tt={class:"audit"},at={colspan:"3"},et={colspan:"3"},ot={class:"btnWrap"},nt={class:"crud"},lt={class:"totalCount"},dt={class:"no-list"},gt=k({__name:"company",setup(d){const l=I(null),i=I(!1),u=A(),e=v({companyName:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),o=v({required:["companyId","companyTypeCode","companyName","phoneNo"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),P={unique:["companyId"],required:["companyId","companyTypeCode","companyName","phoneNo"]};let S=null;const U=s=>{s==null||s.preventDefault(),C()},C=()=>{N.getCompanyList({...e,page:o.currentPage,totalPage:o.totalPage}).then(s=>{var a,n,m,y;o.list=(a=s.data)==null?void 0:a.list,o.totalCount=(n=s.data)==null?void 0:n.totalCount,o.currentPage=(m=s.data)==null?void 0:m.currentPage,o.lastPage=(y=s.data)==null?void 0:y.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},s=>{console.log(s)})},$=s=>{o.currentPage=s,C()},L=()=>{const s={...r.commonAddColumns,companyId:"",companyTypeCode:"",companyName:"",lttd:"",lotd:"",address:"",phoneNo:"",...r.auditAddColumns};o.list=r.add({newRow:s,list:o.list,grid:o.grid})},M=()=>{r.del({selectedRow:S,grid:o.grid})},E=()=>{const s=r.valid({list:o.list,required:P.required});s&&N.setCompanyList(s).then(()=>{C()})};return T(()=>{const s=document.querySelector("#grid");o.grid=new R(s,{data:o.list,colHeaders:[...r.commonColumnNames,"업체아이디","업체유형코드","업체명","위도","경도","주소","전화번호",...r.auditColumnNames],hiddenColumns:r.hiddenColumns([]),columns:[...r.commonColumns,{data:"companyId",type:"text",width:100,readOnly:!0},{data:"companyTypeCode",type:"dropdown",width:150,source:function(a,n){var m;n((m=u.codeList.companyTypeCode)==null?void 0:m.map(y=>y.codeValue))}},{data:"companyName",type:"text",width:150,className:"underline"},{data:"lttd",type:"text",width:150},{data:"lotd",type:"text",width:150},{data:"address",type:"text",width:150},{data:"phoneNo",type:"text",width:150},...r.auditColumns],cells:function(a,n){return r.cellsEvent({row:a,col:n,grid:o.grid,self:this,pk:[]})},afterChange(a,n){r.afterChangeEvent({changes:a,source:n,gridProps:P,grid:o.grid,self:this})},afterSelectionEnd:function(a,n,m,y){S=a},afterOnCellMouseDown:(a,n)=>{const m=o.grid.getColHeader(n.col),y=o.grid.getSourceDataAtRow(n.row);m==="업체명"&&y&&(l.value=y,i.value=!0)},...r.defaultProps}),C()}),(s,a)=>(x(),q(K,null,[t("form",{class:"search",onSubmit:U,onKeyup:B(U,["enter"])},[t("fieldset",null,[a[17]||(a[17]=t("legend",null,"검색",-1)),t("table",null,[a[16]||(a[16]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[a[11]||(a[11]=t("th",{scope:"row"},"업체명",-1)),t("td",_,[p(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=n=>e.companyName=n)},null,512),[[g,e.companyName]])])])]),p(t("tbody",tt,[t("tr",null,[a[12]||(a[12]=t("th",{scope:"row"},"수정기간",-1)),t("td",at,[f(j,{format:"yyyy-MM-dd",date:[e.startUpdateDt,e.endUpdateDt],onSetStartDate:a[1]||(a[1]=n=>{e.startUpdateDt=n.date}),onSetEndDate:a[2]||(a[2]=n=>{e.endUpdateDt=n.date})},null,8,["date"])])]),t("tr",null,[a[13]||(a[13]=t("th",{scope:"row"},"등록일",-1)),t("td",et,[f(J,{format:"yyyy-MM-dd",date:[e.createDt],onSetStartDate:a[3]||(a[3]=n=>{e.createDt=n.date})},null,8,["date"])])]),t("tr",null,[a[14]||(a[14]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=n=>e.updater=n)},null,512),[[g,e.updater]])]),a[15]||(a[15]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=n=>e.creator=n)},null,512),[[g,e.creator]])])])],512),[[V,o.audit]])])]),t("div",ot,[t("span",nt,[t("button",{type:"button",class:"button add",onClick:L},a[18]||(a[18]=[t("span",{class:"icon"},"",-1),w("추가")])),t("button",{type:"button",class:"button del",onClick:M},a[19]||(a[19]=[t("span",{class:"icon"},"",-1),w("삭제")])),t("button",{type:"button",class:"button save",onClick:E},a[20]||(a[20]=[t("span",{class:"icon"},"",-1),w("저장")])),t("button",{type:"button",class:"button reset",onClick:a[6]||(a[6]=n=>D(r).reload())},a[21]||(a[21]=[t("span",{class:"icon"},'"',-1),w("초기화")]))]),t("button",{type:"button",class:"audit",onClick:a[7]||(a[7]=n=>o.audit=!o.audit)},"상세조회"),a[24]||(a[24]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:a[8]||(a[8]=n=>D(r).reload())},a[22]||(a[22]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:a[9]||(a[9]=n=>D(G).excelExport(o.grid,"업체"))},a[23]||(a[23]=[t("span",{class:"icon"},"",-1)])),t("div",lt,"총 "+c(o.totalCount)+"건",1)])],32),a[25]||(a[25]=t("div",{id:"grid",class:"grid-container"},null,-1)),p(t("div",dt,"조회 내역이 없습니다.",512),[[V,o.list.length===0]]),f(F,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":$},null,8,["currentPage","lastPage"]),i.value?(x(),H(W,{key:0,component:h,data:l.value,show:i.value,onClose:a[10]||(a[10]=n=>i.value=!1)},null,8,["data","show"])):O("",!0)],64))}});export{gt as default};
