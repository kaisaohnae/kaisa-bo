import{d as V,r as P,x as k,o as c,e as $,f as t,G as D,w as p,v as g,l as x,p as N,c as A,K as B,J as f,h as v,L as H,A as O,B as K,F as R}from"../index.sLHaa_0v.js";import{g as i,H as F,P as G,e as T}from"./Pagination.D7qwn8xd.js";import{a as I}from"./apiConfig.T8yPkaPh.js";import{S as j,a as J}from"./SelectGroupDate.BI-88_nn.js";import{_ as W,D as z}from"./CommonCode.vue_vue_type_script_setup_true_lang.Di45rzPq.js";import"./dateUtil.CLORM07S.js";class Q{async getBoard(d){return(await I("/pd/getBoard",d||{})).data}async getBoardList(d){return(await I("/pd/getBoardList",d||{})).data}async setBoard(d){return(await I("/pd/setBoard",d||{})).data}async setBoardList(d){return(await I("/pd/setBoardList",d||{})).data}}const S=new Q,X={class:"detail-content"},Y={class:"detail-scroll"},Z={class:"detail-table"},h=V({__name:"BoardDetail",props:{data:{type:Object,required:!0}},setup(s){const d=s,y=P({editor:{},editorOption:{}}),C=()=>{y.editor=i.createEditor({name:"#BoardEditor",cnts:d.data})},r=()=>{d.data.boardNo?S.getBoard({boardNo:d.data.boardNo}).then(e=>{d.data.boardNo=e.data.boardNo,d.data.boardCategoryId=e.data.boardCategoryId,d.data.companyId=e.data.companyId,d.data.title=e.data.title,d.data.contents=e.data.contents,d.data.isDisplay=e.data.isDisplay,d.data.tag=e.data.tag,d.data.creator=e.data.creator,d.data.createDt=e.data.createDt,d.data.updater=e.data.updater,d.data.updateDt=e.data.updateDt,C()},e=>{console.log(e)}):C()};return k(()=>{r()}),(e,o)=>(c(),$("div",X,[o[19]||(o[19]=t("h2",null,"게시판 상세",-1)),t("div",Y,[t("table",Z,[o[18]||(o[18]=t("caption",null,"게시판 상세",-1)),t("tbody",null,[t("tr",null,[o[6]||(o[6]=t("th",{scope:"col"},"게시판번호",-1)),t("td",null,D(s.data.boardNo),1)]),t("tr",null,[o[7]||(o[7]=t("th",{scope:"col"},"게시판카테고리아이디",-1)),t("td",null,[p(t("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=u=>s.data.boardCategoryId=u)},null,512),[[g,s.data.boardCategoryId]])])]),t("tr",null,[o[8]||(o[8]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=u=>s.data.companyId=u)},null,512),[[g,s.data.companyId]])])]),t("tr",null,[o[9]||(o[9]=t("th",{scope:"col"},"제목",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=u=>s.data.title=u)},null,512),[[g,s.data.title]])])]),o[16]||(o[16]=t("tr",null,[t("th",{scope:"col",colspan:"2"},"내용")],-1)),o[17]||(o[17]=t("tr",null,[t("td",{colspan:"2"},[t("div",{id:"BoardEditor"})])],-1)),t("tr",null,[o[10]||(o[10]=t("th",{scope:"col"},"전시여부",-1)),t("td",null,[x(W,{cd:"isDisplay",model:s.data.isDisplay,onSetData:o[3]||(o[3]=u=>{s.data.isDisplay=u})},null,8,["model"])])]),t("tr",null,[o[11]||(o[11]=t("th",{scope:"col"},"태그",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=u=>s.data.tag=u),required:""},null,512),[[g,s.data.tag]])])]),t("tr",null,[o[12]||(o[12]=t("th",{scope:"col"},"등록자",-1)),t("td",null,D(s.data.creator),1)]),t("tr",null,[o[13]||(o[13]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,D(s.data.createDt),1)]),t("tr",null,[o[14]||(o[14]=t("th",{scope:"col"},"수정자",-1)),t("td",null,D(s.data.updater),1)]),t("tr",null,[o[15]||(o[15]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,[p(t("input",{type:"datetime","onUpdate:modelValue":o[5]||(o[5]=u=>s.data.updateDt=u)},null,512),[[g,s.data.updateDt]])])])])])]),o[20]||(o[20]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),_={colspan:"3"},tt={colspan:"3"},at={colspan:"3"},ot={class:"audit"},et={colspan:"3"},lt={colspan:"3"},dt={class:"btnWrap"},nt={class:"crud"},st={class:"totalCount"},rt={class:"no-list"},bt=V({__name:"Board",setup(s){const d=N(null),y=N(!1),C=A(),r=P({boardCategoryId:"",companyId:"",title:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),e=P({required:["boardCategoryId","companyId","title","isDisplay"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),o={unique:["boardNo"],required:["boardCategoryId","companyId","title","isDisplay"]};let u=null;const U=n=>{n==null||n.preventDefault(),w()},w=()=>{S.getBoardList({...r,page:e.currentPage,totalPage:e.totalPage}).then(n=>{var a,l,b,m;e.list=(a=n.data)==null?void 0:a.list,e.totalCount=(l=n.data)==null?void 0:l.totalCount,e.currentPage=(b=n.data)==null?void 0:b.currentPage,e.lastPage=(m=n.data)==null?void 0:m.lastPage,e.grid&&e.grid.updateSettings({data:e.list})},n=>{console.log(n)})},L=n=>{e.currentPage=n,w()},E=()=>{const n={...i.commonAddColumns,boardNo:"",boardCategoryId:"",companyId:"",title:"",isDisplay:"",tag:"",...i.auditAddColumns};e.list=i.add({newRow:n,list:e.list,grid:e.grid})},q=()=>{i.del({selectedRow:u,grid:e.grid})},M=()=>{const n=i.valid({list:e.list,required:o.required});n&&S.setBoardList(n).then(()=>{w()})};return k(()=>{const n=document.querySelector("#grid");e.grid=new F(n,{data:e.list,colHeaders:[...i.commonColumnNames,"게시판번호","게시판카테고리아이디","업체아이디","제목","전시여부","태그",...i.auditColumnNames],hiddenColumns:i.hiddenColumns([]),columns:[...i.commonColumns,{data:"boardNo",type:"numeric",width:150,readOnly:!0},{data:"boardCategoryId",type:"numeric",width:150},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"title",type:"text",width:150,className:"underline"},{data:"isDisplay",type:"numeric",width:150},{data:"tag",type:"text",width:150},...i.auditColumns],cells:function(a,l){return i.cellsEvent({row:a,col:l,grid:e.grid,self:this,pk:[]})},afterChange(a,l){i.afterChangeEvent({changes:a,source:l,gridProps:o,grid:e.grid,self:this})},afterSelectionEnd:function(a,l,b,m){u=a},afterOnCellMouseDown:(a,l)=>{const b=e.grid.getColHeader(l.col),m=e.grid.getSourceDataAtRow(l.row);b==="제목"&&m&&(d.value=m,y.value=!0)},...i.defaultProps}),w()}),(n,a)=>(c(),$(R,null,[t("form",{class:"search",onSubmit:U,onKeyup:H(U,["enter"])},[t("fieldset",null,[a[21]||(a[21]=t("legend",null,"검색",-1)),t("table",null,[a[20]||(a[20]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[a[13]||(a[13]=t("th",{scope:"row"},"게시판카테고리아이디",-1)),t("td",_,[p(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=l=>r.boardCategoryId=l)},null,512),[[g,r.boardCategoryId]])])]),p(t("tr",null,[a[14]||(a[14]=t("th",{scope:"row"},"업체아이디",-1)),t("td",tt,[p(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=l=>r.companyId=l)},null,512),[[g,r.companyId]])])],512),[[B,f(C).userInfo.companyId==="kaisa"]]),t("tr",null,[a[15]||(a[15]=t("th",{scope:"row"},"제목",-1)),t("td",at,[p(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=l=>r.title=l)},null,512),[[g,r.title]])])])]),p(t("tbody",ot,[t("tr",null,[a[16]||(a[16]=t("th",{scope:"row"},"수정기간",-1)),t("td",et,[x(j,{format:"yyyy-MM-dd",date:[r.startUpdateDt,r.endUpdateDt],onSetStartDate:a[3]||(a[3]=l=>{r.startUpdateDt=l.date}),onSetEndDate:a[4]||(a[4]=l=>{r.endUpdateDt=l.date})},null,8,["date"])])]),t("tr",null,[a[17]||(a[17]=t("th",{scope:"row"},"등록일",-1)),t("td",lt,[x(J,{format:"yyyy-MM-dd",date:[r.createDt],onSetStartDate:a[5]||(a[5]=l=>{r.createDt=l.date})},null,8,["date"])])]),t("tr",null,[a[18]||(a[18]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=l=>r.updater=l)},null,512),[[g,r.updater]])]),a[19]||(a[19]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[p(t("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=l=>r.creator=l)},null,512),[[g,r.creator]])])])],512),[[B,e.audit]])])]),t("div",dt,[t("span",nt,[t("button",{type:"button",class:"button add",onClick:E},a[22]||(a[22]=[t("span",{class:"icon"},"",-1),v("추가")])),t("button",{type:"button",class:"button del",onClick:q},a[23]||(a[23]=[t("span",{class:"icon"},"",-1),v("삭제")])),t("button",{type:"button",class:"button save",onClick:M},a[24]||(a[24]=[t("span",{class:"icon"},"",-1),v("저장")])),t("button",{type:"button",class:"button reset",onClick:a[8]||(a[8]=l=>f(i).reload())},a[25]||(a[25]=[t("span",{class:"icon"},'"',-1),v("초기화")]))]),t("button",{type:"button",class:"audit",onClick:a[9]||(a[9]=l=>e.audit=!e.audit)},"상세조회"),a[28]||(a[28]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:a[10]||(a[10]=l=>f(i).reload())},a[26]||(a[26]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:a[11]||(a[11]=l=>f(T).excelExport(e.grid,"게시판"))},a[27]||(a[27]=[t("span",{class:"icon"},"",-1)])),t("div",st,"총 "+D(e.totalCount)+"건",1)])],32),a[29]||(a[29]=t("div",{id:"grid",class:"grid-container"},null,-1)),p(t("div",rt,"조회 내역이 없습니다.",512),[[B,e.list.length===0]]),x(G,{currentPage:e.currentPage,lastPage:e.lastPage,"onUpdate:page":L},null,8,["currentPage","lastPage"]),y.value?(c(),O(z,{key:0,component:h,data:d.value,show:y.value,onClose:a[12]||(a[12]=l=>y.value=!1)},null,8,["data","show"])):K("",!0)],64))}});export{bt as default};
