import{d as V,r as S,x as k,o as U,e as L,f as t,G as y,w as i,v as p,l as f,p as M,c as B,K as c,h as w,J as v,L as H,A as O,B as T,F as K}from"../index.C-nXzXzh.js";import{H as R,g as u,P as F,e as G}from"./Pagination.Dv7wRgvR.js";import{a as C}from"./apiConfig.Dn3pyRtA.js";import{S as j,a as J}from"./SelectGroupDate.CxGgGt6L.js";import{D as W}from"./Detail.CX0PklKl.js";import{_ as z}from"./CommonCode.vue_vue_type_script_setup_true_lang.GLTqk_w3.js";import"./dateUtil.DX7rpUD5.js";class Q{async getMember(d){return(await C("/at/getMember",d||{})).data}async getMemberList(d){return(await C("/at/getMemberList",d||{})).data}async setMember(d){return(await C("/at/setMember",d||{})).data}async setMemberList(d){return(await C("/at/setMemberList",d||{})).data}}const x=new Q,X={class:"detail-content"},Y={class:"detail-scroll"},Z={class:"detail-table"},h=V({__name:"MemberDetail",props:{data:{type:Object,required:!0}},setup(n){const d=n;S({editor:{},editorOption:{}});const m=()=>{d.data.companyId&&x.getMember({companyId:d.data.companyId}).then(r=>{d.data.memberId=r.data.memberId,d.data.companyId=r.data.companyId,d.data.memberName=r.data.memberName,d.data.email=r.data.email,d.data.phoneNo=r.data.phoneNo,d.data.passwordUpdateDt=r.data.passwordUpdateDt,d.data.loginDt=r.data.loginDt,d.data.memo=r.data.memo,d.data.memberStateCode=r.data.memberStateCode,d.data.creator=r.data.creator,d.data.createDt=r.data.createDt,d.data.updater=r.data.updater,d.data.updateDt=r.data.updateDt},r=>{console.log(r)})};return k(()=>{m()}),(r,a)=>(U(),L("div",X,[a[21]||(a[21]=t("h2",null,"회원 상세",-1)),t("div",Y,[t("table",Z,[a[20]||(a[20]=t("caption",null,"회원 상세",-1)),t("tbody",null,[t("tr",null,[a[7]||(a[7]=t("th",{scope:"col"},"회원아이디",-1)),t("td",null,y(n.data.memberId),1)]),t("tr",null,[a[8]||(a[8]=t("th",{scope:"col"},"업체아이디",-1)),t("td",null,y(n.data.companyId),1)]),t("tr",null,[a[9]||(a[9]=t("th",{scope:"col"},"회원이름",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>n.data.memberName=o)},null,512),[[p,n.data.memberName]])])]),t("tr",null,[a[10]||(a[10]=t("th",{scope:"col"},"이메일",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=o=>n.data.email=o),required:""},null,512),[[p,n.data.email]])])]),t("tr",null,[a[11]||(a[11]=t("th",{scope:"col"},"전화번호",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=o=>n.data.phoneNo=o)},null,512),[[p,n.data.phoneNo]])])]),t("tr",null,[a[12]||(a[12]=t("th",{scope:"col"},"비밀번호수정일시",-1)),t("td",null,[i(t("input",{type:"datetime","onUpdate:modelValue":a[3]||(a[3]=o=>n.data.passwordUpdateDt=o)},null,512),[[p,n.data.passwordUpdateDt]])])]),t("tr",null,[a[13]||(a[13]=t("th",{scope:"col"},"로그인일시",-1)),t("td",null,[i(t("input",{type:"datetime","onUpdate:modelValue":a[4]||(a[4]=o=>n.data.loginDt=o)},null,512),[[p,n.data.loginDt]])])]),t("tr",null,[a[14]||(a[14]=t("th",{scope:"col"},"메모",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=o=>n.data.memo=o),required:""},null,512),[[p,n.data.memo]])])]),t("tr",null,[a[15]||(a[15]=t("th",{scope:"col"},"회원상태코드",-1)),t("td",null,[f(z,{cd:"memberStateCode",model:n.data.memberStateCode,onSetData:a[6]||(a[6]=o=>{n.data.memberStateCode=o})},null,8,["model"])])]),t("tr",null,[a[16]||(a[16]=t("th",{scope:"col"},"등록자",-1)),t("td",null,y(n.data.creator),1)]),t("tr",null,[a[17]||(a[17]=t("th",{scope:"col"},"등록일시",-1)),t("td",null,y(n.data.createDt),1)]),t("tr",null,[a[18]||(a[18]=t("th",{scope:"col"},"수정자",-1)),t("td",null,y(n.data.updater),1)]),t("tr",null,[a[19]||(a[19]=t("th",{scope:"col"},"수정일시",-1)),t("td",null,y(n.data.updateDt),1)])])])]),a[22]||(a[22]=t("div",{class:"detail-bottom"},[t("button",{type:"button"},"저장"),t("button",{type:"button"},"취소")],-1))]))}}),_={colspan:"3"},tt={colspan:"3"},et={class:"audit"},at={colspan:"3"},ot={colspan:"3"},lt={class:"btnWrap"},dt={class:"crud"},nt={class:"totalCount"},st={class:"no-list"},yt=V({__name:"Member",setup(n){const d=M(null),m=M(!1),r=B(),a=S({memberId:"",memberName:"",updater:"",creator:"",startUpdateDt:"",endUpdateDt:"",createDt:""}),o=S({required:["memberId","companyId","memberName","phoneNo","passwordUpdateDt","loginDt","memberStateCode"],grid:{},list:[],audit:!1,totalCount:0,currentPage:1,totalPage:50,lastPage:1}),N={unique:["companyId"],required:["memberId","companyId","memberName","phoneNo","passwordUpdateDt","loginDt","memberStateCode"]};let P=null;const I=s=>{s==null||s.preventDefault(),D()},D=()=>{x.getMemberList({...a,page:o.currentPage,totalPage:o.totalPage}).then(s=>{var e,l,b,g;o.list=(e=s.data)==null?void 0:e.list,o.totalCount=(l=s.data)==null?void 0:l.totalCount,o.currentPage=(b=s.data)==null?void 0:b.currentPage,o.lastPage=(g=s.data)==null?void 0:g.lastPage,o.grid&&o.grid.updateSettings({data:o.list})},s=>{console.log(s)})},$=s=>{o.currentPage=s,D()},q=()=>{const s={...u.commonAddColumns,memberId:"",companyId:"",memberName:"",email:"",phoneNo:"",passwordUpdateDt:"",loginDt:"",memo:"",memberStateCode:"",...u.auditAddColumns};o.list=u.add({newRow:s,list:o.list,grid:o.grid})},E=()=>{u.del({selectedRow:P,grid:o.grid})},A=()=>{const s=u.valid({list:o.list,required:N.required});s&&x.setMemberList(s).then(()=>{D()})};return k(()=>{const s=document.querySelector("#grid");o.grid=new R(s,{data:o.list,colHeaders:[...u.commonColumnNames,"회원아이디","업체아이디","회원이름","이메일","전화번호","비밀번호수정일시","로그인일시","메모","회원상태코드",...u.auditColumnNames],hiddenColumns:u.hiddenColumns([]),columns:[...u.commonColumns,{data:"memberId",type:"text",width:150,readOnly:!0},{data:"companyId",type:"text",width:100,readOnly:!0},{data:"memberName",type:"text",width:150,className:"underline"},{data:"email",type:"text",width:150},{data:"phoneNo",type:"text",width:150},{data:"passwordUpdateDt",type:"date",width:170,...u.dateTimePickerConfig},{data:"loginDt",type:"date",width:170,...u.dateTimePickerConfig},{data:"memo",type:"text",width:150},{data:"memberStateCode",type:"dropdown",width:150,source:function(e,l){var b;l((b=r.codeList.memberStateCode)==null?void 0:b.map(g=>g.codeValue))}},...u.auditColumns],cells:function(e,l){return u.cellsEvent({row:e,col:l,grid:o.grid,self:this,pk:[]})},afterChange(e,l){u.afterChangeEvent({changes:e,source:l,gridProps:N,grid:o.grid,self:this})},afterSelectionEnd:function(e,l,b,g){P=e},afterOnCellMouseDown:(e,l)=>{const b=o.grid.getColHeader(l.col),g=o.grid.getSourceDataAtRow(l.row);b==="회원이름"&&g&&(d.value=g,m.value=!0)},...u.defaultProps}),D()}),(s,e)=>(U(),L(K,null,[t("form",{class:"search",onSubmit:I,onKeyup:H(I,["enter"])},[t("fieldset",null,[e[19]||(e[19]=t("legend",null,"검색",-1)),t("table",null,[e[18]||(e[18]=t("colgroup",null,[t("col",{style:{width:"80px"}}),t("col",{style:{width:"30%"}}),t("col",{style:{width:"80px"}}),t("col")],-1)),t("tbody",null,[t("tr",null,[e[12]||(e[12]=t("th",{scope:"row"},"회원아이디",-1)),t("td",_,[i(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>a.memberId=l)},null,512),[[p,a.memberId]])])]),t("tr",null,[e[13]||(e[13]=t("th",{scope:"row"},"회원이름",-1)),t("td",tt,[i(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>a.memberName=l)},null,512),[[p,a.memberName]])])])]),i(t("tbody",et,[t("tr",null,[e[14]||(e[14]=t("th",{scope:"row"},"수정기간",-1)),t("td",at,[f(j,{format:"yyyy-MM-dd",date:[a.startUpdateDt,a.endUpdateDt],onSetStartDate:e[2]||(e[2]=l=>{a.startUpdateDt=l.date}),onSetEndDate:e[3]||(e[3]=l=>{a.endUpdateDt=l.date})},null,8,["date"])])]),t("tr",null,[e[15]||(e[15]=t("th",{scope:"row"},"등록일",-1)),t("td",ot,[f(J,{format:"yyyy-MM-dd",date:[a.createDt],onSetStartDate:e[4]||(e[4]=l=>{a.createDt=l.date})},null,8,["date"])])]),t("tr",null,[e[16]||(e[16]=t("th",{scope:"row"},"수정ID",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>a.updater=l)},null,512),[[p,a.updater]])]),e[17]||(e[17]=t("th",{scope:"row"},"등록ID",-1)),t("td",null,[i(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>a.creator=l)},null,512),[[p,a.creator]])])])],512),[[c,o.audit]])])]),t("div",lt,[t("span",dt,[t("button",{type:"button",class:"button add",onClick:q},e[20]||(e[20]=[t("span",{class:"icon"},"",-1),w("추가")])),t("button",{type:"button",class:"button del",onClick:E},e[21]||(e[21]=[t("span",{class:"icon"},"",-1),w("삭제")])),t("button",{type:"button",class:"button save",onClick:A},e[22]||(e[22]=[t("span",{class:"icon"},"",-1),w("저장")])),t("button",{type:"button",class:"button reset",onClick:e[7]||(e[7]=l=>v(u).reload())},e[23]||(e[23]=[t("span",{class:"icon"},'"',-1),w("초기화")]))]),t("button",{type:"button",class:"audit",onClick:e[8]||(e[8]=l=>o.audit=!o.audit)},"상세조회"),e[26]||(e[26]=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1)),t("button",{type:"reset",onClick:e[9]||(e[9]=l=>v(u).reload())},e[24]||(e[24]=[t("span",{class:"icon"},'"',-1)])),t("button",{type:"button",class:"button excel",onClick:e[10]||(e[10]=l=>v(G).excelExport(o.grid,"회원"))},e[25]||(e[25]=[t("span",{class:"icon"},"",-1)])),t("div",nt,"총 "+y(o.totalCount)+"건",1)])],32),e[27]||(e[27]=t("div",{id:"grid",class:"grid-container"},null,-1)),i(t("div",st,"조회 내역이 없습니다.",512),[[c,o.list.length===0]]),f(F,{currentPage:o.currentPage,lastPage:o.lastPage,"onUpdate:page":$},null,8,["currentPage","lastPage"]),m.value?(U(),O(W,{key:0,component:h,data:d.value,show:m.value,onClose:e[11]||(e[11]=l=>m.value=!1)},null,8,["data","show"])):T("",!0)],64))}});export{yt as default};
